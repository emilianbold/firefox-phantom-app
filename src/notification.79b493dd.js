(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);!function(){function e(e){return e&&e.__esModule?e.default:e}function n(e,n,t,r){Object.defineProperty(e,n,{get:t,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},i=t.parcelRequirea886;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in a){var n=a[e];delete a[e];var t={id:e,exports:{}};return r[e]=t,n.call(t.exports,t,t.exports),t.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){a[e]=n},t.parcelRequirea886=i);var o=i("yrqZm"),c=i("jLXMA"),l=i("a9js8"),s=i("7gyel"),u=i("edC09"),d=i("fVAzy"),f=i("15Pgw"),p=i("01f3h"),m=i("1Wa82");i("goCP2");var g={};n(g,"BackgroundConnectionProvider",(function(){return E}),(function(e){return E=e})),n(g,"useIncomingBackgroundRequest",(function(){return S}),(function(e){return S=e})),n(g,"usePostOutgoingBackgroundResponse",(function(){return k}),(function(e){return k=e}));var v=i("cuInp"),y=i("1vgyn"),T=(o=i("yrqZm"),i("4P3Ea")),h=i("hZbar"),b=(p=i("01f3h"),function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}l((r=r.apply(e,n||[])).next())}))}),x={isConnected:!1,lastMessage:null,postMessage:h.NOOP},A=e(o).createContext(x),E=function(n){var t=n.children,r=v.slicedToArray(function(){var n=this,t=v.slicedToArray(o.useState(null),2),r=t[0],a=t[1],i=v.slicedToArray(o.useState(null),2),c=i[0],l=i[1];o.useEffect((function(){var t,r=n;return function(){return b(r,void 0,void 0,e(y).mark((function n(){var r,i;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getCurrentWindowAsync();case 2:r=e.sent,i="notification/".concat(r.id),t=T.browser.runtime.connect({name:i}),a(t),t.onMessage.addListener((function(e){l(e)})),t.onDisconnect.addListener((function(){a(null)}));case 8:case"end":return e.stop()}}),n)})))}(),function(){null==t||t.disconnect()}}),[]);var s=o.useCallback((function(e){r&&r.postMessage(e)}),[r]);return[!!r,c,s]}(),3),a=r[0],i=r[1],c=r[2];return e(o).createElement(A.Provider,{value:{isConnected:a,lastMessage:i,postMessage:c}},t)};function w(){var e=o.useContext(A);if(!e)throw new Error("Missing background connection context");return e}function S(){var e=w().lastMessage;return e&&"string"==typeof e.origin&&e.origin&&e.req&&"string"==typeof e.req.method&&e.req.method?e:null}function k(){var e=S(),n=w().postMessage;return o.useCallback((function(t){if(!e)throw new Error("No request received from the background yet");if(e.req.id!==t.id)throw new Error("Request id: ".concat(e.req.id," does not match response id: ").concat(t.id));n(t)}),[e,n])}var C=i("1qebk"),M=i("1tMSC"),P=i("j040j"),I=i("1rSG6"),R=i("gpRlx"),L=i("9lBKv"),q=i("bDjhz"),B=i("1w3DR"),j=i("bWoQY"),N=i("bbVVl"),O=i("cFjyR"),F=i("580bB"),z=(v=i("cuInp"),i("5GStK")),D=(o=i("yrqZm"),i("5BN27")),U=(d=i("fVAzy"),i("226dB")),H=(l=i("a9js8"),I=i("1rSG6"),v=i("cuInp"),o=i("yrqZm"),D=i("5BN27"),i("eNGT7")),W=i("jcs3P"),K=i("3u496"),V=i("jJ2Ea"),Z=i("jj9QT"),G=i("6AaHU"),J=i("5oDS0"),_=i("7Z3sw");function Q(){var e=v.taggedTemplateLiteral(["\n  border-top: 1px solid #333333;\n  border-bottom: 1px solid #333333;\n  width: 100%;\n  display: flex;\n  padding: 10px 5px;\n"]);return Q=function(){return e},e}function Y(){var e=v.taggedTemplateLiteral(["\n  > * {\n    margin: 18px 0px;\n  }\n"]);return Y=function(){return e},e}function X(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  > * {\n    margin: 0px ","px;\n    text-align: left;\n  }\n"]);return X=function(){return e},e}var $=function(e){return e},ee=D.default.div(Rn||(Rn=$(Q()))),ne=D.default.div(kn||(kn=$(Y()))),te=D.default.div(Tn||(Tn=$(X(),0)),(function(e){return e.spacing})),re=function(n){var t=n.tabId,r=n.origin,a=n.confirmApproval,i=n.denyApproval,c=H.useTranslation().t;return e(o).createElement(V.Container,null,e(o).createElement(Z.AccountHeader,{lastChild:e(o).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(o).createElement(V.Body,null,e(o).createElement(V.TopGroup,null,e(o).createElement(J.TabIconHeader,{tabId:t,secondaryText:W.removeWebPrefixes(r)})),e(o).createElement(ee,null,e(o).createElement(ne,null,e(o).createElement(te,{spacing:8},e(o).createElement(_.Text,{size:14,color:"#777777",lineHeight:16.94,weight:500},c("notificationApplicationApprovalPermissionsPrimary"))),e(o).createElement(te,{spacing:8},e(o).createElement(K.CheckmarkIcon,{fill:"#21E56F"}),e(o).createElement(_.Text,{size:14,lineHeight:17},c("notificationApplicationApprovalPermissionsViewWalletActivity"))),e(o).createElement(te,{spacing:8},e(o).createElement(K.CheckmarkIcon,{fill:"#21E56F"}),e(o).createElement(_.Text,{size:14,lineHeight:17},c("notificationApplicationApprovalPermissionsTransactionApproval"))))),e(o).createElement(V.BottomGroup,null,e(o).createElement(te,{spacing:4},e(o).createElement(_.Text,{size:14,lineHeight:17,color:"#777"},c("notificationApplicationApprovalConnectDisclaimer"))))),e(o).createElement(V.Footer,{plain:!0},e(o).createElement(G.ButtonPair,{primaryText:c("notificationApplicationApprovalActionButtonConnect"),secondaryText:c("notificationApplicationApprovalActionButtonCancel"),onPrimaryClicked:function(){return a(r)},onSecondaryClicked:function(){return i(r)}})))},ae=i("5vcFJ"),ie=i("1eJXt"),oe=i("kJkjp"),ce=i("glMqZ");function Q(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n"]);return Q=function(){return e},e}$=function(e){return e};var le=D.default.div(Rn||(Rn=$(Q()))),se=function(n){var t,r=n.tabId,a=n.origin,i=n.requestId,c=I.useSelectedAccount().accountClient.publicKey.toString(),s=g.usePostOutgoingBackgroundResponse(),u=v.slicedToArray(ae.useStorage(U.StorageKeys.TrustedApplicationsByOwnerBrowser,{}),3),f=u[0],p=u[1],m=u[2],y=null!==(t=f[c])&&void 0!==t?t:{},T=void 0!==y[a],h=v.slicedToArray(e(o).useState(!1),2),b=h[0],x=h[1],A=v.slicedToArray(e(o).useState(!1),2),E=A[0],w=A[1],S=function(n){var t=e(z)(y);t[n]=!0,d.analytics.capture("connectionConfirm",{data:{origin:n}}),m(Object.assign(Object.assign({},f),v.defineProperty({},c,t)))},k=function(){d.analytics.capture("connectionDeny",{data:{origin:a}});var e=l.createJsonRpcErrorResponse(i,l.RpcErrorCode.UserRejectedRequest);s(e)};return o.useEffect((function(){var e,n;T?(e={publicKey:c},n=l.createJsonRpcResponse(i,e),s(n)):oe.detectPhishing(a).then((function(e){w(e.result),x(!0)})).catch((function(){x(!0)}))}),[T]),T?null:p||!b?e(o).createElement(le,null,e(o).createElement(ce.Spinner,null)):E?e(o).createElement(ie.BlocklistConnectRequest,{tabId:r,origin:a,confirmApproval:S,denyApproval:k}):e(o).createElement(re,{tabId:r,origin:a,confirmApproval:S,denyApproval:k})},ue={};n(ue,"SignatureRequest",(function(){return Bn}),(function(e){return Bn=e}));v=i("cuInp"),y=i("1vgyn"),o=i("yrqZm"),D=i("5BN27"),H=i("eNGT7");var de=i("kAN3y"),fe=(d=i("fVAzy"),l=i("a9js8"),s=i("7gyel"),U=i("226dB"),i("lziLk")),pe=i("67fgn"),me=(I=i("1rSG6"),R=i("gpRlx"),C=i("1qebk"),o=i("yrqZm"),d=i("fVAzy"),{});n(me,"useFetchScannedTransaction",(function(){return he}),(function(e){return he=e}));v=i("cuInp"),y=i("1vgyn"),o=i("yrqZm"),h=i("hZbar");var ge,ve=i("cLNsJ"),ye=function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}l((r=r.apply(e,n||[])).next())}))},Te=new Error("Ninja API key missing");!function(e){e.ChecksPassed="CHECKS_PASSED",e.KnownMalicious="KNOWN_MALICIOUS",e.SuspectedMalicious="SUSPECTED_MALICIOUS"}(ge||(ge={}));var he=function(n,t){var r=v.slicedToArray(o.useState({error:null,isLoading:!0}),2),a=r[0],i=r[1];if(o.useEffect((function(){ye(void 0,void 0,void 0,e(y).mark((function r(){var a,o,c,l,s,u,d,f,p,m,g;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=new AbortController,o=a.signal,setTimeout((function(){a.abort()}),3e3),c=new Headers,void 0!==h.NINJA_SECURITY_API_KEY){e.next=8;break}return i({error:Te,isLoading:!1}),e.abrupt("return");case 8:return c.append("X-NINJA-API-Key",h.NINJA_SECURITY_API_KEY),c.append("Content-Type","application/json"),l={transactions:n,metadata:{origin:t}},s={method:"POST",headers:c,body:JSON.stringify(l)},u="".concat("https://api.ninja.security/solana/v0/mainnet","/scan/transactions"),d=new Request(u,s),e.next=16,fetch(d,{signal:o});case 16:if(!(f=e.sent).ok){e.next=29;break}return e.next=20,f.json();case 20:if(void 0!==(p=e.sent).status&&[ge.ChecksPassed,ge.KnownMalicious,ge.SuspectedMalicious].includes(p.status)){e.next=24;break}return i({error:new Error("Response missing valid TxnScanStatus"),isLoading:!1}),e.abrupt("return");case 24:m=p.status===ge.KnownMalicious,g=p.status===ge.SuspectedMalicious,i({error:null,isTxnKnownMalicious:m,isTxnSuspectedMalicious:g,isLoading:!1}),e.next=30;break;case 29:i({error:new Error("Ninja API returned non-200 response: ".concat(f.status)),isLoading:!1});case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),e.t0.message.toLowerCase().includes("aborted")?i({error:ve.ERR_REQUEST_TIMEOUT_REACHED,isLoading:!1}):i({error:e.t0,isLoading:!1});case 35:case"end":return e.stop()}}),r,null,[[0,32]])})))}),[JSON.stringify(n)]),null!==a.error&&a.error===Te)throw a.error;return a},be=(ve=i("cLNsJ"),fe=i("lziLk"),i("cneLj")),xe=(v=i("cuInp"),D=i("5BN27"),o=i("yrqZm"),H=i("eNGT7"),h=i("hZbar"),i("boeq2")),Ae=(d=i("fVAzy"),W=i("jcs3P"),s=i("7gyel"),fe=i("lziLk"),i("bGaWd")),Ee=i("9l6gG"),we=(v=i("cuInp"),o=i("yrqZm"),i("3xIqg")),Se=i("aCPnG"),ke=(I=i("1rSG6"),i("eENAE")),Ce={};n(Ce,"useFetchSimulatedTransaction",(function(){return Pe}),(function(e){return Pe=e}));y=i("1vgyn"),fe=i("lziLk"),s=i("7gyel"),I=i("1rSG6"),j=i("bWoQY");var Me=function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}l((r=r.apply(e,n||[])).next())}))};function Pe(n,t){var r=this,a=I.useSelectedAccount().accountClient,i=["simulated-tx",{messages:n}],o=!!n;return j.useQuery({queryKey:i,queryFn:function(){return Me(r,void 0,void 0,e(y).mark((function t(){var r,i,o,c,l;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=s.messagesToTransaction(n)).recentBlockhash){e.next=5;break}return e.next=4,a.getLatestBlockhash();case 4:r.recentBlockhash=e.sent;case 5:return r.feePayer||(r.feePayer=a.publicKey),i=s.getAccountsFromTransaction(r),o=i.filter((function(e){return!/1111111111111111/.test(e.toString())})),e.next=10,a.simulateTransaction(r,o);case 10:return c=e.sent,l=c.value.accounts,e.abrupt("return",new Map(fe.zip(o.map((function(e){return e.toString()})),l)));case 13:case"end":return e.stop()}}),t)})))},enabled:o,refetchInterval:t})}var Ie=i("ehiNV").Buffer,Re=(W=i("jcs3P"),i("7ZQfp")),Le={};n(Le,"useTokenMetasForMints",(function(){return Ne}),(function(e){return Ne=e}));y=i("1vgyn");var qe=i("foMWJ"),Be=i("54rXI"),je=(pe=i("67fgn"),W=i("jcs3P"),Ae=i("bGaWd"),be=i("cneLj"),function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}l((r=r.apply(e,n||[])).next())}))}),Ne=function(n){var t,r=Ae.useFetchTokenMetas().data,a=new Map(null==r?void 0:r.map((function(e){return[e.address,e]}))),i=null===(t=be.useFetchConnection())||void 0===t?void 0:t.data,o=null==i?void 0:i.connection;return qe.useAsync((function(){return je(void 0,void 0,void 0,e(y).mark((function t(){var r,i,c,l,s,u,d,f,p,m,g,v,T,h,b,x,A,E,w,S,k,C,M;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length&&o){e.next=3;break}return e.abrupt("return",{});case 3:for(l={},s=[],u=!0,d=!1,f=void 0,e.prev=6,p=n[Symbol.iterator]();!(u=(m=p.next()).done);u=!0)g=m.value,(v=a.get(g))?l[g]=v:s.push(g);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),d=!0,f=e.t0;case 14:e.prev=14,e.prev=15,u||null==p.return||p.return();case 17:if(e.prev=17,!d){e.next=20;break}throw f;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(!s.length){e.next=60;break}return e.next=25,pe.fetchMintInfos(s,o);case 25:return T=e.sent,e.next=28,Be.fetchCollectibleMetadata(s,o);case 28:h=e.sent.reduce((function(e,n){return e[n.mint.toString()]=n,e}),{}),b=!0,x=!1,A=void 0,e.prev=30,E=s[Symbol.iterator]();case 32:if(b=(w=E.next()).done){e.next=46;break}if(S=w.value,k=T[S],C=h[S],!k){e.next=43;break}if(!C){e.next=42;break}return e.next=41,Be.fetchUriData(C.data.uri,S);case 41:M=e.sent;case 42:l[S]={decimals:k.decimals,address:S,symbol:null!==(r=null==C?void 0:C.data.symbol)&&void 0!==r?r:W.formatAddressShort(S),name:null!==(c=null!==(i=null==M?void 0:M.name)&&void 0!==i?i:null==C?void 0:C.data.name)&&void 0!==c?c:"Unknown",isCollectible:!!C&&!!C.data.uri};case 43:b=!0,e.next=32;break;case 46:e.next=52;break;case 48:e.prev=48,e.t1=e.catch(30),x=!0,A=e.t1;case 52:e.prev=52,e.prev=53,b||null==E.return||E.return();case 55:if(e.prev=55,!x){e.next=58;break}throw A;case 58:return e.finish(55);case 59:return e.finish(52);case 60:return e.abrupt("return",l);case 61:case"end":return e.stop()}}),t,null,[[6,10,14,22],[15,,17,21],[30,48,52,60],[53,,55,59]])})))}),[n.length])},Oe=(V=i("jJ2Ea"),Z=i("jj9QT"),G=i("6AaHU"),J=i("5oDS0"),i("j7d8I"));v=i("cuInp"),D=i("5BN27"),_=i("7Z3sw");function Q(){var e=v.taggedTemplateLiteral(["\n  background: #2a2a2a;\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return Q=function(){return e},e}function Y(){var e=v.taggedTemplateLiteral(["\n  padding-top: 0px;\n  padding-bottom: 12px;\n  padding-left: 18px;\n  padding-right: 18px;\n  border-top: 1px solid #222222;\n  > * {\n    margin-top: 12px;\n  }\n"]);return Y=function(){return e},e}function X(){var e=v.taggedTemplateLiteral(["\n  padding: 12px 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return X=function(){return e},e}function Fe(){var e=v.taggedTemplateLiteral([""]);return Fe=function(){return e},e}function ze(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  > * {\n    display: flex;\n    align-items: center;\n  }\n"]);return ze=function(){return e},e}$=function(e){return e};var De=D.default.section(Rn||(Rn=$(Q()))),Ue=D.default.div(kn||(kn=$(Y()))),He=(D.default.div(Tn||(Tn=$(X()))),D.default(_.Text).attrs({textAlign:"left",size:14,weight:500,lineHeight:17})(Ze||(Ze=$(Fe()))),D.default.div(Ge||(Ge=$(ze())))),We=(_=i("7Z3sw"),{});n(We,"TransactionInstructionRows",(function(){return Ye}),(function(e){return Ye=e})),n(We,"SignMessageInstructionRow",(function(){return Xe}),(function(e){return Xe=e})),n(We,"RowCard",(function(){return cn}),(function(e){return cn=e}));v=i("cuInp"),y=i("1vgyn"),D=i("5BN27"),o=i("yrqZm"),d=i("fVAzy"),W=i("jcs3P"),I=i("1rSG6"),v=i("cuInp"),o=i("yrqZm");Oe=i("j7d8I"),_=i("7Z3sw");var Ke=i("8ePxM"),Ve=i("8G5sy");pe=i("67fgn"),be=i("cneLj");function Q(){var e=v.taggedTemplateLiteral(["\n  background: #2a2a2a;\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return Q=function(){return e},e}function Y(){var e=v.taggedTemplateLiteral(["\n  padding: 12px 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return Y=function(){return e},e}function X(){var e=v.taggedTemplateLiteral(["\n  padding-top: 0px;\n  padding-bottom: 12px;\n  padding-left: 18px;\n  padding-right: 18px;\n  border-top: 1px solid #222222;\n  > * {\n    margin-top: 12px;\n  }\n"]);return X=function(){return e},e}function Fe(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n"]);return Fe=function(){return e},e}function ze(){var e=v.taggedTemplateLiteral(["\n  text-decoration: none;\n  cursor: pointer;\n"]);return ze=function(){return e},e}$=function(e){return e};var Ze,Ge,Je=i("ehiNV").Buffer,_e=function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}l((r=r.apply(e,n||[])).next())}))},Qe=[],Ye=function(n){var t=n.messages,r=I.useSelectedAccount().accountClient,a=o.useCallback((function(){return _e(void 0,void 0,void 0,e(y).mark((function n(){var a,i;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return r.decodeMessageAsync(e)})));case 2:return a=e.sent,(i=a.filter((function(e){return void 0!==e}))).flat().forEach((function(e){e&&d.analytics.capture("transactionInstructionApproval",{data:{origin:origin,type:e.type}})})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),n)})))}),[t]),i=v.slicedToArray(function(n,t){var r=v.slicedToArray(e(o).useState({value:t,error:null,isPending:!0}),2),a=r[0],i=r[1];return e(o).useEffect((function(){n().then((function(e){return i({value:e,error:null,isPending:!1})})).catch((function(e){return i({value:t,error:e.toString(),isPending:!1})}))}),[n,t]),[a.value,a.error,a.isPending]}(a,Qe),3),c=i[0],l=(i[1],i[2]),s=c.flat();return e(o).createElement(Oe.LoadingContent,{isLoading:l},s.map((function(n,t){return e(o).createElement(on,{key:t,decodedMessage:n})})))},Xe=function(n){var t,r=n.message,a=n.display;if("hex"===(void 0===a?"utf8":a))t="0x".concat(Je.from(r).toString("hex"));else t=(new TextDecoder).decode(r);return e(o).createElement($e,null,e(o).createElement(en,null,e(o).createElement(_.Text,{textAlign:"left",size:14,weight:600,lineHeight:17},"Sign message"),e(o).createElement(Ke.Info,{tooltipAlignment:"bottomRight",info:e(o).createElement(Ve.TooltipContent,{paddingLeft:10,paddingRight:10},e(o).createElement(Ve.TooltipText,null,"Make sure you understand what you are signing and trust the application that is requesting this."))})),e(o).createElement(nn,null,e(o).createElement(tn,null,e(o).createElement(_.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"pre-line",wordBreak:"break-all",textAlign:"left",color:"#777"},t))))},$e=D.default.section(Rn||(Rn=$(Q()))),en=D.default.div(kn||(kn=$(Y()))),nn=D.default.div(Tn||(Tn=$(X()))),tn=D.default.div(Ze||(Ze=$(Fe()))),rn=D.default.a.attrs({target:"_blank",rel:"noopener noreferrer"})(Ge||(Ge=$(ze()))),an=function(e){var n=e.condition,t=e.wrapper,r=e.children;return n?t(r):r},on=function(n){var t,r=n.decodedMessage,a=null===(t=be.useFetchConnection())||void 0===t?void 0:t.data,i=null==a?void 0:a.cluster,c=o.useMemo((function(){return sn(r)}),[r]),l=o.useMemo((function(){return mn(r,i)}),[r,i]);return e(o).createElement(cn,{title:c,rowItems:l})},cn=function(n){var t=n.title,r=n.rowItems,a=n.emptyDescription,i=n.info;return e(o).createElement($e,null,e(o).createElement(en,null,e(o).createElement(_.Text,{textAlign:"left",size:14,weight:500,lineHeight:17},t),i&&e(o).createElement(Ke.Info,{info:i})),e(o).createElement(nn,null,r.map((function(n){var t=n.keyText,r=n.valueText,a=n.valueColor,i=n.link;return e(o).createElement(tn,{key:t||r},t&&e(o).createElement(_.Text,{size:14,lineHeight:17,color:"#777777"},t),e(o).createElement(an,{condition:i,wrapper:function(n){return e(o).createElement(rn,{href:i},n)}},e(o).createElement(_.Text,{size:14,weight:500,lineHeight:17,color:a,whiteSpace:t?"normal":"pre-line",wordBreak:"break-word"},r)))})),0===r.length&&e(o).createElement(tn,null,e(o).createElement(_.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal"},a))))},ln={cancelOrder:"Cancel order",cancelOrderV2:"Cancel order",newOrder:"Place order",newOrderV3:"Place order",settleFunds:"Settle funds",matchOrders:"Match orders",initializeMint:"Initialize mint",initializeAccount:"Initialize account",transfer:"Transfer",approve:"Approve",mintTo:"Mint to",closeAccount:"Close account",systemCreate:"Create account",systemTransfer:"Transfer SOL",createAssociatedTokenAccount:"Create token account",signMessage:"Sign Message",unknown:"Unknown"},sn=function(e){var n,t=e.type;return null!==(n=ln[t])&&void 0!==n?n:t},un={side:{label:"Side",isAddress:!1},orderId:{label:"Order Id",isAddress:!1},limit:{label:"Limit",isAddress:!1},basePubkey:{label:"Base wallet",isAddress:!0},quotePubkey:{label:"Quote wallet",isAddress:!0}},dn={amount:{label:"Amount",isAddress:!1},accountPubkey:{label:"Account",isAddress:!0},mintPubkey:{label:"Mint",isAddress:!0},sourcePubkey:{label:"Source",isAddress:!0},destinationPubkey:{label:"Destination",isAddress:!0},ownerPubkey:{label:"Owner",isAddress:!0}},fn={toPubkey:{label:"To",isAddress:!0},accountPubkey:{label:"Account",isAddress:!0},basePubkey:{label:"Base",isAddress:!0},seed:{label:"Seed",isAddress:!1},noncePubkey:{label:"Nonce",isAddress:!0},authorizedPubkey:{label:"Authorized",isAddress:!0},newAuthorizedPubkey:{label:"New authorized",isAddress:!0},newAccountPubkey:{label:"New account",isAddress:!0},amount:{label:"Amount",isAddress:!1},lamports:{label:"Amount",isAddress:!1}},pn=function(e,n){var t=e.market,r=e.marketInfo,a=e.data,i=[];r&&i.push({keyText:"Market",valueText:r.name});var o=a.side,c=a.limitPrice,l=a.maxQuantity,s=a.maxBaseQuantity,u=a.orderType,d=a.ownerPubkey;i.push({keyText:"Side",valueText:o.charAt(0).toUpperCase()+o.slice(1)}),i.push({keyText:"Price",valueText:(null==t?void 0:t.priceLotsToNumber(c))||""+c});var f=n?s:l;return i.push({keyText:"Quantity",valueText:(null==t?void 0:t.baseSizeLotsToNumber(f))||""+f}),i.push({keyText:"Type",valueText:u.charAt(0).toUpperCase()+u.slice(1)}),i.push({keyText:"Owner",valueText:vn(d)}),i},mn=function(e,n){switch(e.type){case"cancelOrder":case"cancelOrderV2":case"matchOrders":case"settleFunds":return function(e,n){var t=[];return e.marketInfo&&t.push({keyText:"Market",valueText:e.marketInfo.name}),gn(t,e.data,un,n),t}(e,n);case"closeAccount":case"initializeAccount":case"transfer":case"approve":case"mintTo":return function(e,n){var t=[];return gn(t,e.data,dn,n),t}(e,n);case"systemCreate":case"systemTransfer":return function(e,n){var t=[];return gn(t,e.data,fn,n),t}(e,n);case"newOrder":return pn(e,!1);case"newOrderV3":return pn(e,!0);case"unknown":case"createAssociatedTokenAccount":return function(e,n){var t=e.rawData,r=t.length>20?W.formatHashMedium(t,10):t,a=e.data.programId,i=n?pe.generateAddressSolscanUrl(a.toString(),n):void 0;return r?[{keyText:"Program Id",valueText:vn(a),valueColor:"#8A81F8",link:i},{keyText:"Data",valueText:r}]:[{keyText:"Program Id",valueText:vn(a),valueColor:"#8A81F8",link:i}]}(e,n);default:return[]}},gn=function(e,n,t,r){Object.entries(n).forEach((function(n){var a=v.slicedToArray(n,2),i=a[0],o=a[1],c=t[i];if(c){var l=c.label,s="",u=void 0,d=void 0;c.isAddress?(s=vn(o),r&&(u=pe.generateAddressSolscanUrl(o.toString(),r),d="#8A81F8")):"lamports"===i?s="".concat(W.formatTokenAmount(W.lamportsToSolana(o))," SOL"):"function"==typeof o.toString()?s=o.toString():"string"==typeof o&&(s=o),e.push({keyText:l,valueText:s,valueColor:d,link:u})}}))},vn=function(e){var n=e.toString();return W.formatHashMedium(n)},yn=(Ve=i("8G5sy"),Ke=i("8ePxM"),i("4WZBg"));function Q(){var e=v.taggedTemplateLiteral(["\n  height: 150px;\n"]);return Q=function(){return e},e}function Y(){var e=v.taggedTemplateLiteral(["\n  color: ",";\n"]);return Y=function(){return e},e}function X(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 12px 20px;\n  width: 100%;\n  height: 48px;\n  border-width: 1px;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return X=function(){return e},e}$=function(e){return e};var Tn,hn=D.default(Oe.LoadingContent)(Rn||(Rn=$(Q()))),bn=D.default(_.Text)(kn||(kn=$(Y(),0)),(function(e){return e.isKnownMalicious?En:An})),xn=D.default.div(Tn||(Tn=$(X(),0)),(function(e){return e.isKnownMalicious?En:An})),An="#FFDC62",En="#EB3742",wn=function(n){var t,r,a=n.tabId,i=n.origin,c=n.messages,l=n.confirmApproval,u=n.denyApproval,f=n.transactionName,p=n.isTxnKnownMalicious,m=n.isTxnSuspectedMalicious,g=H.useTranslation().t,y=(r=Re.useBlockchainState().feeCalculator,W.lamportsToSolana(r.lamportsPerSignature))*s.getRequiredSignatures(c),T=v.slicedToArray(o.useState(!1),2),b=T[0],x=T[1],A=Ae.useFetchSolanaBalance(),E=A.data,w=Ae.useFetchAssetsWithAccount(),S=w.data,k=Ee.useFetchCollectibles(),C=k.data,M=o.useMemo((function(){if(!S||!C)return fe.objectArrayToMap([],"account");var e=v.toConsumableArray(S).concat(v.toConsumableArray(C));return fe.objectArrayToMap(e,"account")}),[S,C]),P=!A.isFetched||!w.isFetched||!k.isFetched,R=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Ce.useFetchSimulatedTransaction(e,n),r=t.error,a=I.useSelectedAccount().accountClient,i=t.data,c=o.useMemo((function(){var e=new Map;if(i){var n=!0,t=!1,r=void 0;try{for(var o,c=i[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=v.slicedToArray(o.value,2),s=l[0],u=l[1];if(u&&u.data&&u.owner.toString()===we.TOKEN_PROGRAM_ID.toString()){var d=v.slicedToArray(u.data,1)[0];try{var f=Se.deserializeTokenAccount(Ie.from(d,"base64"));f.owner===a.publicKey.toString()&&e.set(s,f)}catch(e){}}}}catch(e){t=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(t)throw r}}return e}}),[i]);return{balances:o.useMemo((function(){var e={};if(i&&c){var n=a.publicKey.toString(),t=null==i?void 0:i.get(n);t&&(e[n]={amount:new ke.BigNumber(t.lamports)});var r=!0,o=!1,l=void 0;try{for(var s,u=c[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=v.slicedToArray(s.value,2),f=d[0],p=d[1];p.owner===n&&(e[f]={mint:p.mint,amount:p.amount,delegate:p.delegate})}}catch(e){o=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}return e}}),[i,c]),error:r}}(c,5e3),L=Object.values(null!==(t=R.balances)&&void 0!==t?t:{}).map((function(e){return e.mint})).filter((function(e){return!!e})),q=Le.useTokenMetasForMints(L),B=o.useMemo((function(){var e,n=R.balances;if(n&&!P){var t=[],r=!0,a=!1,i=void 0;try{for(var o,c=Object.entries(n)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var l=v.slicedToArray(o.value,2),s=l[0],u=l[1];if(void 0===u.mint&&E){var d=u.amount.minus(E),f=W.lamportsToSolana(d.toNumber())+y;if(0!==f){var p=W.formatTokenAmount(Math.abs(f));t.push({keyText:h.SOLANA.symbol,valueText:d.isNegative()?"-".concat(p," ").concat(h.SOLANA.symbol):"+".concat(p," ").concat(h.SOLANA.symbol),valueColor:d.isNegative()?"#EB3742":"#21E56F"})}}else{var m=M[s],g=u.mint;if(m){var T=u.amount.minus(m.baseBalance),b=W.amountToUiAmount(T.abs(),m.decimals),x=W.formatTokenAmount(Math.abs(b));if("fungible"===m.type){var A=null!==(e=null==m?void 0:m.symbol)&&void 0!==e?e:W.formatAddressShort(null!=g?g:m.address);0!==b&&t.push({keyText:A,valueText:T.isNegative()?"-".concat(x," ").concat(A):"+".concat(x," ").concat(A),valueColor:T.isNegative()?"#EB3742":"#21E56F"})}else if("collectible"===m.type){if(0!==b){var w="1"===x?"":"(".concat(x,")");t.push({keyText:"NFT",valueText:T.isNegative()?"-".concat(m.name," ").concat(w):"+".concat(m.name," ").concat(w)})}}}else if(q.value&&g){var S=q.value[g];if(S){var k=W.amountToUiAmount(u.amount.toNumber(),S.decimals);if(0!==k){var C=W.formatTokenAmount(k),I="1"===C?"":"(".concat(C,")");t.push({keyText:S.isCollectible?"NFT":S.symbol,valueText:S.isCollectible?"+".concat(S.name," ").concat(I):"+".concat(C," ").concat(S.symbol),valueColor:S.isCollectible?void 0:"#21E56F"})}}}}}}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return t}}),[R,M,E,y,q,P]),j=e(o).createElement(Ve.TooltipContent,{paddingLeft:10,paddingRight:10},e(o).createElement(Ve.TooltipText,null,g("notificationTransactionApprovalEstimatesBasedOnSimulations"))),N=g("notificationTransactionApprovalUnableToFetchBalanceChanges");R.error instanceof xe.TransactionSimulationError&&(N=g("notificationTransactionApprovalTransactionMayFailToConfirm"));var O=o.useMemo((function(){var e=s.canEvadeTransactionSimulation(c);return e&&d.analytics.capture("transactionCanEvadeSimulation",{data:{messages:c.join("|")}}),e}),[c]);return O&&(N=g("notificationTransactionApprovalSignUnableToSimulate")),e(o).createElement(V.Container,null,e(o).createElement(Z.AccountHeader,{firstChild:e(o).createElement("div",null),lastChild:e(o).createElement("div",null)}),e(o).createElement(V.Body,null,e(o).createElement(V.Icon,null,e(o).createElement(J.TabIconHeader,{tabId:a,primaryText:f,secondaryText:W.removeWebPrefixes(i)})),e(o).createElement(hn,{isLoading:void 0===B&&!R.error,showingDelayMs:0},(p||m)&&e(o).createElement(xn,{isKnownMalicious:p},e(o).createElement(bn,{size:14,weight:500,lineHeight:19.6,isKnownMalicious:p},g(p?"notificationTransactionApprovalKnownMalicious":"notificationTransactionApprovalSuspectedMalicious"))),R.error||O?e(o).createElement(We.RowCard,{title:g("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:[{valueText:N,valueColor:En}],info:j}):e(o).createElement(We.RowCard,{title:g("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:B,emptyDescription:g("notificationTransactionApprovalNoBalanceChanges"),info:j}),e(o).createElement(De,null,e(o).createElement(Ue,null,e(o).createElement(He,null,e(o).createElement(_.Text,{size:14,lineHeight:17,textAlign:"left",color:"#777",style:{gap:10,marginLeft:"-8px"}},e(o).createElement(Ke.Info,{info:e(o).createElement(Ve.TooltipContent,{paddingLeft:10,paddingRight:10},e(o).createElement(Ve.TooltipText,null,g("notificationTransactionApprovalSolanaAmountRequired")))}),g("notificationTransactionApprovalNetworkFee")),e(o).createElement(_.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word"},e(o).createElement(yn.SolBalance,null,y))))),e(o).createElement(_.Text,{size:14,lineHeight:19,color:"#777777",margin:"17px 0",onClick:function(){return x(!b)}},g(b?"notificationTransactionApprovalHideAdvancedDetails":"notificationTransactionApprovalViewAdvancedDetails")),b&&e(o).createElement(We.TransactionInstructionRows,{messages:c}))),e(o).createElement(V.Footer,null,e(o).createElement(G.ButtonPair,{primaryText:g("notificationTransactionApprovalActionButtonApprove"),secondaryText:g("notificationTransactionApprovalActionButtonCancel"),onPrimaryClicked:l,onSecondaryClicked:u})))},Sn=i("3UD42");V=i("jJ2Ea"),v=i("cuInp"),o=i("yrqZm"),D=i("5BN27"),H=i("eNGT7"),W=i("jcs3P"),Z=i("jj9QT"),J=i("5oDS0"),G=i("6AaHU"),_=i("7Z3sw"),V=i("jJ2Ea");function Q(){var e=v.taggedTemplateLiteral(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return Q=function(){return e},e}function Y(){var e=v.taggedTemplateLiteral(["\n  border: 1px solid ",";\n  border-radius: 8px;\n  padding: 10px 10px;\n  margin-bottom: 10px;\n"]);return Y=function(){return e},e}$=function(e){return e};var kn,Cn="#eb3742",Mn=D.default.div(Rn||(Rn=$(Q()))),Pn=D.default.div(kn||(kn=$(Y(),0)),Cn),In=function(n){var t=n.tabId,r=n.origin,a=n.proceedToApproval,i=n.denyApproval,c=H.useTranslation().t;return e(o).createElement(V.Container,null,e(o).createElement(Z.AccountHeader,{lastChild:e(o).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(o).createElement(V.Body,null,e(o).createElement(V.TopGroup,null,e(o).createElement(J.TabIconHeader,{tabId:t,secondaryText:W.removeWebPrefixes(r),showWarning:!0})),e(o).createElement(Mn,null,e(o).createElement(Pn,null,e(o).createElement(_.Text,{size:14,color:Cn},c("maliciousTransactionWarning"))),e(o).createElement(_.Text,{size:14,color:"#777777",hoverColor:Cn,onClick:function(){return a(r)}},c("maliciousTransactionWarningIgnoreWarning")))),e(o).createElement(V.Footer,{plain:!0},e(o).createElement(G.Button,{onClick:function(){return i(r)}},c("maliciousTransactionWarningButtonClose"))))};ce=i("glMqZ"),P=i("j040j");function Q(){var e=v.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n"]);return Q=function(){return e},e}$=function(e){return e};var Rn,Ln=function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}l((r=r.apply(e,n||[])).next())}))},qn=D.default.div(Rn||(Rn=$(Q()))),Bn=function(n){var t,r=n.origin,a=n.requestId,i=n.requestMethod,c=n.tabId,u=n.unsignedTransactionMessages,f=void 0===u?[]:u,p=n.unsignedTransactions,m=void 0===p?[]:p,T=n.signAndSendSignatures,h=void 0===T?[]:T,b=n.options,x=void 0===b?{}:b,A=H.useTranslation().t,E=v.slicedToArray(o.useState(!1),2),w=E[0],S=E[1],k=P.useFeatureFlags().isTxSubmissionServiceEnabled,M=R.useTransactionsManager(),L=g.usePostOutgoingBackgroundResponse(),q=I.useSelectedAccount(),B=q.accountClient,j=q.accountMeta,N=j.type===U.AccountType.Ledger,O=i===l.ProviderToWalletRequestMethods.SignTransaction,F=i===l.ProviderToWalletRequestMethods.SignAllTransactions,z=i===l.ProviderToWalletRequestMethods.SignAndSendTransaction,D=null===(t=be.useFetchConnection())||void 0===t?void 0:t.data,W=null==D?void 0:D.connection,K=C.useDetailViews(),Z=K.pushDetailView,G=K.popDetailView,J=s.canEvadeTransactionSimulation(f),_=B,Q=_.publicKey.toString(),Y=function(e,n){var t=fe.getOrigin(n)||"",r=me.useFetchScannedTransaction(e,t);return o.useEffect((function(){null!==r.error&&r.error===ve.ERR_REQUEST_TIMEOUT_REACHED?d.analytics.capture("scanTransactionRequestTimeoutReached",{data:{origin:t}}):null!==r.error&&d.analytics.capture("scanTransactionRequestError",{data:{origin:t,error:r.error.message}})}),[r,t]),r}(m,r),X=Y.isTxnKnownMalicious,$=Y.isTxnSuspectedMalicious,ee=Y.isLoading,ne=o.useCallback((function(n){return Ln(void 0,void 0,void 0,e(y).mark((function t(){var i,c,u,p,m,g,v,T,b,A,E;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!N){t.next=6;break}if(W){t.next=4;break}return t.abrupt("return");case 4:c=pe.createSignerFromLedgerAccountMeta(j,n),_=new de.AccountClient(W,c,k,M);case 6:if(t.prev=6,!z){t.next=16;break}return u=s.messageAndSignaturesToTransaction(f[0],h),t.next=11,_.signAndSendTransactionAsync(u,x);case 11:p=t.sent,d.analytics.capture("signAndSendTransaction",{data:{origin:r}}),i=l.createSignSuccessResponse(a,p,Q),t.next=45;break;case 16:m=[],g=!0,v=!1,T=void 0,t.prev=18,b=f[Symbol.iterator]();case 20:if(g=(A=b.next()).done){t.next=30;break}return E=A.value,t.t0=m,t.next=25,_.signMessageAsync(E);case 25:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 27:g=!0,t.next=20;break;case 30:t.next=36;break;case 32:t.prev=32,t.t2=t.catch(18),v=!0,T=t.t2;case 36:t.prev=36,t.prev=37,g||null==b.return||b.return();case 39:if(t.prev=39,!v){t.next=42;break}throw T;case 42:return t.finish(39);case 43:return t.finish(36);case 44:O?(d.analytics.capture("signTransaction",{data:{origin:r}}),i=l.createSignSuccessResponse(a,m[0],Q)):F&&(d.analytics.capture("signAllTransactions",{data:{origin:r}}),i=l.createSignAllTransactionsSuccessResponse(a,m,Q));case 45:d.analytics.capture("transactionConfirm",{data:{origin:fe.getOrigin(r),canEvadeSimulation:J}}),L(i),t.next=53;break;case 49:t.prev=49,t.t3=t.catch(6),console.error(t.t3),Sn.isKnownLedgerActionError(t.t3)?Z(e(o).createElement(V.LedgerWrapper,null,e(o).createElement(Sn.LedgerActionError,{ledgerActionError:t.t3,onRetryClick:function(){G()},onCancelClick:function(){i=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest),L(i)}}))):N?(i=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest),L(i)):(i=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.TransactionRejected,null===t.t3||void 0===t.t3?void 0:t.t3.message),L(i));case 53:case"end":return t.stop()}}),t,null,[[6,49],[18,32,36,44],[37,,39,43]])})))}),[a,f,B,W,L,r,J]),te=o.useCallback((function(){N?Z(e(o).createElement(V.LedgerWrapper,null,e(o).createElement(Sn.LedgerAction,{ledgerAction:ne,cancel:ae})),{shouldShowBackButton:!1}):ne()}),[ne,m,r,Q,J]),re=o.useCallback((function(){d.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:fe.getOrigin(r)}}),S(!0)}),[r]),ae=o.useCallback((function(){var e=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest);d.analytics.capture("transactionDeny",{data:{origin:fe.getOrigin(r),canEvadeSimulation:J}}),L(e)}),[a,L,r,J]);return ee?e(o).createElement(qn,null,e(o).createElement(ce.Spinner,null)):X&&!w?e(o).createElement(In,{tabId:c,origin:r,proceedToApproval:re,denyApproval:ae}):e(o).createElement(wn,{tabId:c,origin:r,messages:f,confirmApproval:te,denyApproval:ae,transactionName:A("notificationSignatureRequestApproveTransactionCapitalized"),isTxnKnownMalicious:X,isTxnSuspectedMalicious:$})},jn={};n(jn,"SignMessageRequest",(function(){return Fn}),(function(e){return Fn=e}));y=i("1vgyn"),o=i("yrqZm"),d=i("fVAzy"),l=i("a9js8"),U=i("226dB"),W=i("jcs3P"),I=i("1rSG6"),C=i("1qebk"),be=i("cneLj"),Sn=i("3UD42"),G=i("6AaHU"),Z=i("jj9QT"),V=i("jJ2Ea"),J=i("5oDS0");var Nn=i("ehiNV").Buffer,On=function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function c(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}l((r=r.apply(e,n||[])).next())}))},Fn=function(n){var t,r=n.origin,a=n.requestId,i=n.message,c=n.display,s=n.tabId,u=g.usePostOutgoingBackgroundResponse(),f=I.useSelectedAccount(),p=f.accountClient,m=f.accountMeta,v=null===(t=be.useFetchConnection())||void 0===t?void 0:t.data,T=null==v?void 0:v.connection,h=C.useDetailViews().pushDetailView,b=o.useCallback((function(){return On(void 0,void 0,void 0,e(y).mark((function n(){var t,o,c,s;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p,e.prev=1,e.next=4,t.signUTF8(Nn.from(i).toString());case 4:o=e.sent,c=t.publicKey.toString(),s=l.createSignSuccessResponse(a,o,c),d.analytics.capture("signMessageConfirm",{data:{origin:r}}),u(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),A();case 14:case"end":return e.stop()}}),n,null,[[1,11]])})))}),[a,i,p,T,u]),x=o.useCallback((function(){m.type===U.AccountType.Ledger?h(e(o).createElement(V.LedgerWrapper,null,e(o).createElement(Sn.LedgerAction,{ledgerAction:b,cancel:A})),{shouldShowBackButton:!1}):b()}),[b]),A=o.useCallback((function(){var e=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest);d.analytics.capture("transactionDeny",{data:{origin:r}}),u(e)}),[a,u]);return e(o).createElement(V.Container,null,e(o).createElement(Z.AccountHeader,{firstChild:e(o).createElement("div",null),lastChild:e(o).createElement("div",null)}),e(o).createElement(V.Body,null,e(o).createElement(V.Icon,null,e(o).createElement(J.TabIconHeader,{tabId:s,primaryText:"Signature Request",secondaryText:W.removeWebPrefixes(r)})),e(o).createElement(We.SignMessageInstructionRow,{message:i,display:c})),e(o).createElement(V.Footer,null,e(o).createElement(G.ButtonPair,{primaryText:"Approve",secondaryText:"Cancel",onPrimaryClicked:x,onSecondaryClicked:A})))},zn=i("aq3jz");u.initSentry();var Dn=function(){var n=g.useIncomingBackgroundRequest();if(!n)return null;var t=n.origin,r=n.req,a=n.tabId,i=r.id,c=r.method,u=r.params,f=u.message,p=u.messages,m=u.transaction,v=u.transactions,y=u.display,T=u.options,h=m?s.transactionStringToMessageString(m):f,b=v?v.map((function(e){return s.transactionStringToMessageString(e)})):p,x=c===l.ProviderToWalletRequestMethods.Connect,A=c===l.ProviderToWalletRequestMethods.SignMessage,E=c===l.ProviderToWalletRequestMethods.SignTransaction,w=c===l.ProviderToWalletRequestMethods.SignAllTransactions,S=c===l.ProviderToWalletRequestMethods.SignAndSendTransaction,k=E||w,M=h instanceof Uint8Array?h:l.objectToUint8Array(null!=h?h:{}),P=E||S?[h]:w?b:void 0,I=E||S?[f?s.messageStringToTransactionString(f):m]:w?p?p.map((function(e){return s.messageStringToTransactionString(e)})):v:void 0,R=S&&m?s.transactionStringToTransaction(m,"bs58").signatures:void 0,L=x?"Connection Error":"Transaction Error",q="There was an error attempting to ".concat(x?"connect to the application":"sign the transaction",". Please try again.");return o.useEffect((function(){d.analytics.capture("notificationOpen",{data:{method:c}})}),[c]),e(o).createElement(zn.PopupAndNotificationErrorBoundary,{title:L,message:q},x?e(o).createElement(se,{tabId:a,origin:t,requestId:i}):A?e(o).createElement(C.DetailViewsProvider,null,e(o).createElement(jn.SignMessageRequest,{tabId:a,origin:t,requestId:i,message:M,display:y})):k?e(o).createElement(C.DetailViewsProvider,null,e(o).createElement(ue.SignatureRequest,{tabId:a,origin:t,requestId:i,requestMethod:c,unsignedTransactionMessages:P,unsignedTransactions:I})):S?e(o).createElement(C.DetailViewsProvider,null,e(o).createElement(ue.SignatureRequest,{tabId:a,origin:t,requestId:i,requestMethod:c,unsignedTransactionMessages:P,unsignedTransactions:I,signAndSendSignatures:R,options:T})):null)},Un=function(){var n=o.useCallback((function(n){return e(o).createElement(B.ModalsProvider,null,e(o).createElement(q.WalletMenuProvider,null,e(o).createElement(F.Unlock,{unlockSeedAndMnemonic:n})))}),[]),t=o.useCallback((function(){p.openTabAsync({url:"onboarding.html"}),window.close()}),[]);return e(o).createElement(e(o).Fragment,null,e(o).createElement(f.ThemedGlobalStyle,{backgroundColor:"#222222"}),e(o).createElement(zn.PopupAndNotificationErrorBoundary,null,e(o).createElement(O.Main,null,e(o).createElement(P.FeatureFlagsProvider,null,e(o).createElement(N.BannerProvider,null,e(o).createElement(j.QueryProvider,null,e(o).createElement(g.BackgroundConnectionProvider,null,e(o).createElement(M.SeedProvider,{renderLocked:n,openOnboarding:t},e(o).createElement(R.TransactionsProvider,null,e(o).createElement(L.HardwareWalletProvider,null,e(o).createElement(I.AccountsProvider,null,e(o).createElement(q.WalletMenuProvider,null,e(o).createElement(Dn,null)))))))))),e(o).createElement("div",{id:m.MODAL_ID}))))};c.render(e(o).createElement(Un,null),document.getElementById("root"))}();define=__define;})(window.define);