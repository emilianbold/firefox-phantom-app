(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);!function(){function e(e){return e&&e.__esModule?e.default:e}function n(e,n,t,r){Object.defineProperty(e,n,{get:t,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},o=t.parcelRequirea886;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in a){var n=a[e];delete a[e];var t={id:e,exports:{}};return r[e]=t,n.call(t.exports,t,t.exports),t.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){a[e]=n},t.parcelRequirea886=o);var i=o("yrqZm"),c=o("jLXMA"),l=o("a9js8"),s=o("7gyel"),u=o("edC09"),d=o("15Pgw"),p=o("01f3h"),f=o("1Wa82");o("goCP2");var m={};n(m,"BackgroundConnectionProvider",(function(){return E}),(function(e){return E=e})),n(m,"useIncomingBackgroundRequest",(function(){return w}),(function(e){return w=e})),n(m,"usePostOutgoingBackgroundResponse",(function(){return S}),(function(e){return S=e}));var g=o("cuInp"),v=o("1vgyn"),y=(i=o("yrqZm"),o("4P3Ea")),T=o("hZbar"),h=(p=o("01f3h"),function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))}),x={isConnected:!1,lastMessage:null,postMessage:T.NOOP},b=e(i).createContext(x),E=function(n){var t=n.children,r=g.slicedToArray(function(){var n=this,t=g.slicedToArray(i.useState(null),2),r=t[0],a=t[1],o=g.slicedToArray(i.useState(null),2),c=o[0],l=o[1];i.useEffect((function(){var t,r=n;return function(){return h(r,void 0,void 0,e(v).mark((function n(){var r,o;return e(v).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getCurrentWindowAsync();case 2:r=e.sent,o="notification/".concat(r.id),t=y.browser.runtime.connect({name:o}),a(t),t.onMessage.addListener((function(e){l(e)})),t.onDisconnect.addListener((function(){a(null)}));case 8:case"end":return e.stop()}}),n)})))}(),function(){null==t||t.disconnect()}}),[]);var s=i.useCallback((function(e){r&&r.postMessage(e)}),[r]);return[!!r,c,s]}(),3),a=r[0],o=r[1],c=r[2];return e(i).createElement(b.Provider,{value:{isConnected:a,lastMessage:o,postMessage:c}},t)};function A(){var e=i.useContext(b);if(!e)throw new Error("Missing background connection context");return e}function w(){var e=A().lastMessage;return e&&"string"==typeof e.origin&&e.origin&&e.req&&"string"==typeof e.req.method&&e.req.method?e:null}function S(){var e=w(),n=A().postMessage;return i.useCallback((function(t){if(!e)throw new Error("No request received from the background yet");if(e.req.id!==t.id)throw new Error("Request id: ".concat(e.req.id," does not match response id: ").concat(t.id));n(t)}),[e,n])}var k=o("1qebk"),C=o("1rSG6"),M=o("gpRlx"),P=o("9lBKv"),I=o("bDjhz"),R=o("1w3DR"),L=o("bWoQY"),q=o("cFjyR"),B=o("580bB"),j=(g=o("cuInp"),o("5GStK")),N=(i=o("yrqZm"),o("5BN27")),O=o("fVAzy"),F=o("226dB"),z=(l=o("a9js8"),C=o("1rSG6"),g=o("cuInp"),i=o("yrqZm"),N=o("5BN27"),o("eNGT7")),D=o("jcs3P"),U=o("3u496"),W=o("jJ2Ea"),H=o("jj9QT"),K=o("6AaHU"),G=o("5oDS0"),Z=o("7Z3sw");function J(){var e=g.taggedTemplateLiteral(["\n  border-top: 1px solid #333333;\n  border-bottom: 1px solid #333333;\n  width: 100%;\n  display: flex;\n  padding: 10px 5px;\n"]);return J=function(){return e},e}function V(){var e=g.taggedTemplateLiteral(["\n  > * {\n    margin: 18px 0px;\n  }\n"]);return V=function(){return e},e}function _(){var e=g.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  > * {\n    margin: 0px ","px;\n    text-align: left;\n  }\n"]);return _=function(){return e},e}var Q=function(e){return e},Y=N.default.div(In||(In=Q(J()))),X=N.default.div(wn||(wn=Q(V()))),$=N.default.div(vn||(vn=Q(_(),0)),(function(e){return e.spacing})),ee=function(n){var t=n.tabId,r=n.origin,a=n.confirmApproval,o=n.denyApproval,c=z.useTranslation().t;return e(i).createElement(W.Container,null,e(i).createElement(H.AccountHeader,{lastChild:e(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(i).createElement(W.Body,null,e(i).createElement(W.TopGroup,null,e(i).createElement(G.TabIconHeader,{tabId:t,secondaryText:D.removeWebPrefixes(r)})),e(i).createElement(Y,null,e(i).createElement(X,null,e(i).createElement($,{spacing:8},e(i).createElement(Z.Text,{size:14,color:"#777777",lineHeight:16.94,weight:500},c("notificationApplicationApprovalPermissionsPrimary"))),e(i).createElement($,{spacing:8},e(i).createElement(U.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement(Z.Text,{size:14,lineHeight:17},c("notificationApplicationApprovalPermissionsViewWalletActivity"))),e(i).createElement($,{spacing:8},e(i).createElement(U.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement(Z.Text,{size:14,lineHeight:17},c("notificationApplicationApprovalPermissionsTransactionApproval"))))),e(i).createElement(W.BottomGroup,null,e(i).createElement($,{spacing:4},e(i).createElement(Z.Text,{size:14,lineHeight:17,color:"#777"},c("notificationApplicationApprovalConnectDisclaimer"))))),e(i).createElement(W.Footer,{plain:!0},e(i).createElement(K.ButtonPair,{primaryText:c("notificationApplicationApprovalActionButtonConnect"),secondaryText:c("notificationApplicationApprovalActionButtonCancel"),onPrimaryClicked:function(){return a(r)},onSecondaryClicked:function(){return o(r)}})))},ne=o("5vcFJ"),te=o("1eJXt"),re=o("kJkjp"),ae=o("glMqZ");function J(){var e=g.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n"]);return J=function(){return e},e}Q=function(e){return e};var oe=N.default.div(In||(In=Q(J()))),ie=function(n){var t,r=n.tabId,a=n.origin,o=n.requestId,c=C.useSelectedSolanaAccount().accountClient.publicKey.toString(),s=m.usePostOutgoingBackgroundResponse(),u=g.slicedToArray(ne.useStorage(F.StorageKeys.TrustedApplicationsByOwnerBrowser,{}),3),d=u[0],p=u[1],f=u[2],v=null!==(t=d[c])&&void 0!==t?t:{},y=void 0!==v[a],T=g.slicedToArray(e(i).useState(!1),2),h=T[0],x=T[1],b=g.slicedToArray(e(i).useState(!1),2),E=b[0],A=b[1],w=function(n){var t=e(j)(v);t[n]=!0,O.analytics.capture("connectionConfirm",{data:{origin:n}}),f(Object.assign(Object.assign({},d),g.defineProperty({},c,t)))},S=function(){O.analytics.capture("connectionDeny",{data:{origin:a}});var e=l.createJsonRpcErrorResponse(o,l.RpcErrorCode.UserRejectedRequest);s(e)};return i.useEffect((function(){var e,n;y?(e={publicKey:c},n=l.createJsonRpcResponse(o,e),s(n)):re.detectPhishing(a).then((function(e){A(e.result),x(!0)})).catch((function(){x(!0)}))}),[y]),y?null:p||!h?e(i).createElement(oe,null,e(i).createElement(ae.Spinner,null)):E?e(i).createElement(te.BlocklistConnectRequest,{tabId:r,origin:a,confirmApproval:w,denyApproval:S}):e(i).createElement(ee,{tabId:r,origin:a,confirmApproval:w,denyApproval:S})},ce={};n(ce,"SignatureRequest",(function(){return qn}),(function(e){return qn=e}));g=o("cuInp"),v=o("1vgyn"),i=o("yrqZm"),N=o("5BN27"),z=o("eNGT7");var le=o("kAN3y"),se=(O=o("fVAzy"),l=o("a9js8"),s=o("7gyel"),F=o("226dB"),o("lziLk")),ue=o("67fgn"),de=(C=o("1rSG6"),M=o("gpRlx"),k=o("1qebk"),i=o("yrqZm"),O=o("fVAzy"),{});n(de,"useFetchScannedTransaction",(function(){return ve}),(function(e){return ve=e}));g=o("cuInp"),v=o("1vgyn"),i=o("yrqZm"),T=o("hZbar");var pe,fe=o("cLNsJ"),me=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},ge=new Error("Ninja API key missing");!function(e){e.ChecksPassed="CHECKS_PASSED",e.KnownMalicious="KNOWN_MALICIOUS",e.SuspectedMalicious="SUSPECTED_MALICIOUS"}(pe||(pe={}));var ve=function(n,t){var r=g.slicedToArray(i.useState({error:null,isLoading:!0}),2),a=r[0],o=r[1];if(i.useEffect((function(){me(void 0,void 0,void 0,e(v).mark((function r(){var a,i,c,l,s,u,d,p,f,m,g;return e(v).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=new AbortController,i=a.signal,setTimeout((function(){a.abort()}),3e3),c=new Headers,void 0!==T.NINJA_SECURITY_API_KEY){e.next=8;break}return o({error:ge,isLoading:!1}),e.abrupt("return");case 8:return c.append("X-NINJA-API-Key",T.NINJA_SECURITY_API_KEY),c.append("Content-Type","application/json"),l={transactions:n,metadata:{origin:t}},s={method:"POST",headers:c,body:JSON.stringify(l)},u="".concat("https://api.ninja.security/solana/v0/mainnet","/scan/transactions"),d=new Request(u,s),e.next=16,fetch(d,{signal:i});case 16:if(!(p=e.sent).ok){e.next=29;break}return e.next=20,p.json();case 20:if(void 0!==(f=e.sent).status&&[pe.ChecksPassed,pe.KnownMalicious,pe.SuspectedMalicious].includes(f.status)){e.next=24;break}return o({error:new Error("Response missing valid TxnScanStatus"),isLoading:!1}),e.abrupt("return");case 24:m=f.status===pe.KnownMalicious,g=f.status===pe.SuspectedMalicious,o({error:null,isTxnKnownMalicious:m,isTxnSuspectedMalicious:g,isLoading:!1}),e.next=30;break;case 29:o({error:new Error("Ninja API returned non-200 response: ".concat(p.status)),isLoading:!1});case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),e.t0.message.toLowerCase().includes("aborted")?o({error:fe.ERR_REQUEST_TIMEOUT_REACHED,isLoading:!1}):o({error:e.t0,isLoading:!1});case 35:case"end":return e.stop()}}),r,null,[[0,32]])})))}),[JSON.stringify(n)]),null!==a.error&&a.error===ge)throw a.error;return a},ye=(fe=o("cLNsJ"),se=o("lziLk"),o("cneLj")),Te=(g=o("cuInp"),N=o("5BN27"),i=o("yrqZm"),z=o("eNGT7"),T=o("hZbar"),o("boeq2")),he=(O=o("fVAzy"),D=o("jcs3P"),s=o("7gyel"),se=o("lziLk"),o("bGaWd")),xe=o("9l6gG"),be=(g=o("cuInp"),i=o("yrqZm"),o("3xIqg")),Ee=o("aCPnG"),Ae=(C=o("1rSG6"),o("eENAE")),we={};n(we,"useFetchSimulatedTransaction",(function(){return ke}),(function(e){return ke=e}));v=o("1vgyn"),se=o("lziLk"),s=o("7gyel"),C=o("1rSG6"),L=o("bWoQY");var Se=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))};function ke(n,t){var r=this,a=C.useSelectedSolanaAccount().accountClient,o=["simulated-tx",{messages:n}],i=!!n;return L.useQuery({queryKey:o,queryFn:function(){return Se(r,void 0,void 0,e(v).mark((function t(){var r,o,i,c,l;return e(v).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=s.messagesToTransaction(n)).recentBlockhash){e.next=5;break}return e.next=4,a.getLatestBlockhash();case 4:r.recentBlockhash=e.sent;case 5:return r.feePayer||(r.feePayer=a.publicKey),o=s.getAccountsFromTransaction(r),i=o.filter((function(e){return!/1111111111111111/.test(e.toString())})),e.next=10,a.simulateTransaction(r,i);case 10:return c=e.sent,l=c.value.accounts,e.abrupt("return",new Map(se.zip(i.map((function(e){return e.toString()})),l)));case 13:case"end":return e.stop()}}),t)})))},enabled:i,refetchInterval:t})}var Ce=o("ehiNV").Buffer,Me=o("6kYrF"),Pe={};n(Pe,"useTokenMetasForMints",(function(){return qe}),(function(e){return qe=e}));v=o("1vgyn");var Ie=o("foMWJ"),Re=o("54rXI"),Le=(ue=o("67fgn"),D=o("jcs3P"),he=o("bGaWd"),ye=o("cneLj"),function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))}),qe=function(n){var t,r=he.useFetchTokenMetas().data,a=new Map(null==r?void 0:r.map((function(e){return[e.address,e]}))),o=null===(t=ye.useFetchConnection())||void 0===t?void 0:t.data,i=null==o?void 0:o.connection;return Ie.useAsync((function(){return Le(void 0,void 0,void 0,e(v).mark((function t(){var r,o,c,l,s,u,d,p,f,m,g,y,T,h,x,b,E,A,w,S,k,C,M;return e(v).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length&&i){e.next=3;break}return e.abrupt("return",{});case 3:for(l={},s=[],u=!0,d=!1,p=void 0,e.prev=6,f=n[Symbol.iterator]();!(u=(m=f.next()).done);u=!0)g=m.value,(y=a.get(g))?l[g]=y:s.push(g);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),d=!0,p=e.t0;case 14:e.prev=14,e.prev=15,u||null==f.return||f.return();case 17:if(e.prev=17,!d){e.next=20;break}throw p;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(!s.length){e.next=60;break}return e.next=25,ue.fetchMintInfos(s,i);case 25:return T=e.sent,e.next=28,Re.fetchCollectibleMetadata(s,i);case 28:h=e.sent.reduce((function(e,n){return e[n.mint.toString()]=n,e}),{}),x=!0,b=!1,E=void 0,e.prev=30,A=s[Symbol.iterator]();case 32:if(x=(w=A.next()).done){e.next=46;break}if(S=w.value,k=T[S],C=h[S],!k){e.next=43;break}if(!C){e.next=42;break}return e.next=41,Re.fetchUriData(C.data.uri,S);case 41:M=e.sent;case 42:l[S]={decimals:k.decimals,address:S,symbol:null!==(r=null==C?void 0:C.data.symbol)&&void 0!==r?r:D.formatAddressShort(S),name:null!==(c=null!==(o=null==M?void 0:M.name)&&void 0!==o?o:null==C?void 0:C.data.name)&&void 0!==c?c:"Unknown",isCollectible:!!C&&!!C.data.uri};case 43:x=!0,e.next=32;break;case 46:e.next=52;break;case 48:e.prev=48,e.t1=e.catch(30),b=!0,E=e.t1;case 52:e.prev=52,e.prev=53,x||null==A.return||A.return();case 55:if(e.prev=55,!b){e.next=58;break}throw E;case 58:return e.finish(55);case 59:return e.finish(52);case 60:return e.abrupt("return",l);case 61:case"end":return e.stop()}}),t,null,[[6,10,14,22],[15,,17,21],[30,48,52,60],[53,,55,59]])})))}),[n.length])},Be=(W=o("jJ2Ea"),H=o("jj9QT"),K=o("6AaHU"),G=o("5oDS0"),o("j7d8I"));g=o("cuInp"),N=o("5BN27"),Z=o("7Z3sw");function J(){var e=g.taggedTemplateLiteral(["\n  background: #2a2a2a;\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return J=function(){return e},e}function V(){var e=g.taggedTemplateLiteral(["\n  padding-top: 0px;\n  padding-bottom: 12px;\n  padding-left: 18px;\n  padding-right: 18px;\n  border-top: 1px solid #222222;\n  > * {\n    margin-top: 12px;\n  }\n"]);return V=function(){return e},e}function _(){var e=g.taggedTemplateLiteral(["\n  padding: 12px 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return _=function(){return e},e}function je(){var e=g.taggedTemplateLiteral([""]);return je=function(){return e},e}function Ne(){var e=g.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  > * {\n    display: flex;\n    align-items: center;\n  }\n"]);return Ne=function(){return e},e}Q=function(e){return e};var Oe=N.default.section(In||(In=Q(J()))),Fe=N.default.div(wn||(wn=Q(V()))),ze=(N.default.div(vn||(vn=Q(_()))),N.default(Z.Text).attrs({textAlign:"left",size:14,weight:500,lineHeight:17})(Ke||(Ke=Q(je()))),N.default.div(Ge||(Ge=Q(Ne())))),De=(Z=o("7Z3sw"),{});n(De,"TransactionInstructionRows",(function(){return _e}),(function(e){return _e=e})),n(De,"SignMessageInstructionRow",(function(){return Qe}),(function(e){return Qe=e})),n(De,"RowCard",(function(){return an}),(function(e){return an=e}));g=o("cuInp"),v=o("1vgyn"),N=o("5BN27"),i=o("yrqZm"),O=o("fVAzy"),D=o("jcs3P"),C=o("1rSG6"),g=o("cuInp"),i=o("yrqZm");Be=o("j7d8I"),Z=o("7Z3sw");var Ue=o("8ePxM"),We=o("8G5sy"),He=(ue=o("67fgn"),ye=o("cneLj"),o("iOnOq"));function J(){var e=g.taggedTemplateLiteral(["\n  background: #2a2a2a;\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return J=function(){return e},e}function V(){var e=g.taggedTemplateLiteral(["\n  padding: 12px 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return V=function(){return e},e}function _(){var e=g.taggedTemplateLiteral(["\n  padding-top: 0px;\n  padding-bottom: 12px;\n  padding-left: 18px;\n  padding-right: 18px;\n  border-top: 1px solid #222222;\n  > * {\n    margin-top: 12px;\n  }\n"]);return _=function(){return e},e}function je(){var e=g.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n"]);return je=function(){return e},e}function Ne(){var e=g.taggedTemplateLiteral(["\n  text-decoration: none;\n  cursor: pointer;\n"]);return Ne=function(){return e},e}Q=function(e){return e};var Ke,Ge,Ze=o("ehiNV").Buffer,Je=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},Ve=[],_e=function(n){var t=n.messages,r=C.useSelectedSolanaAccount().accountClient,a=i.useCallback((function(){return Je(void 0,void 0,void 0,e(v).mark((function n(){var a,o;return e(v).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return r.decodeMessageAsync(e)})));case 2:return a=e.sent,(o=a.filter((function(e){return void 0!==e}))).flat().forEach((function(e){e&&O.analytics.capture("transactionInstructionApproval",{data:{origin:origin,type:e.type}})})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),n)})))}),[t]),o=g.slicedToArray(function(n,t){var r=g.slicedToArray(e(i).useState({value:t,error:null,isPending:!0}),2),a=r[0],o=r[1];return e(i).useEffect((function(){n().then((function(e){return o({value:e,error:null,isPending:!1})})).catch((function(e){return o({value:t,error:e.toString(),isPending:!1})}))}),[n,t]),[a.value,a.error,a.isPending]}(a,Ve),3),c=o[0],l=(o[1],o[2]),s=c.flat();return e(i).createElement(Be.LoadingContent,{isLoading:l},s.map((function(n,t){return e(i).createElement(rn,{key:t,decodedMessage:n})})))},Qe=function(n){var t,r=n.message,a=n.display;if("hex"===(void 0===a?"utf8":a))t="0x".concat(Ze.from(r).toString("hex"));else t=(new TextDecoder).decode(r);return e(i).createElement(Ye,null,e(i).createElement(Xe,null,e(i).createElement(Z.Text,{textAlign:"left",size:14,weight:600,lineHeight:17},"Sign message"),e(i).createElement(Ue.Info,{tooltipAlignment:"bottomRight",info:e(i).createElement(We.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(We.TooltipText,null,"Make sure you understand what you are signing and trust the application that is requesting this."))})),e(i).createElement($e,null,e(i).createElement(en,null,e(i).createElement(Z.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"pre-line",wordBreak:"break-all",textAlign:"left",color:"#777"},t))))},Ye=N.default.section(In||(In=Q(J()))),Xe=N.default.div(wn||(wn=Q(V()))),$e=N.default.div(vn||(vn=Q(_()))),en=N.default.div(Ke||(Ke=Q(je()))),nn=N.default.a.attrs({target:"_blank",rel:"noopener noreferrer"})(Ge||(Ge=Q(Ne()))),tn=function(e){var n=e.condition,t=e.wrapper,r=e.children;return n?t(r):r},rn=function(n){var t,r=n.decodedMessage,a=null===(t=ye.useFetchConnection())||void 0===t?void 0:t.data,o=null==a?void 0:a.cluster,c=He.usePreferredExplorer().preferredExplorer,l=i.useMemo((function(){return cn(r)}),[r]),s=i.useMemo((function(){return pn(r,c.type,o)}),[r,o,c]);return e(i).createElement(an,{title:l,rowItems:s})},an=function(n){var t=n.title,r=n.rowItems,a=n.emptyDescription,o=n.info;return e(i).createElement(Ye,null,e(i).createElement(Xe,null,e(i).createElement(Z.Text,{textAlign:"left",size:14,weight:500,lineHeight:17},t),o&&e(i).createElement(Ue.Info,{info:o})),e(i).createElement($e,null,r.map((function(n){var t=n.keyText,r=n.valueText,a=n.valueColor,o=n.link;return e(i).createElement(en,{key:t||r},t&&e(i).createElement(Z.Text,{size:14,lineHeight:17,color:"#777777"},t),e(i).createElement(tn,{condition:o,wrapper:function(n){return e(i).createElement(nn,{href:o},n)}},e(i).createElement(Z.Text,{size:14,weight:500,lineHeight:17,color:a,whiteSpace:t?"normal":"pre-line",wordBreak:"break-word"},r)))})),0===r.length&&e(i).createElement(en,null,e(i).createElement(Z.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal"},a))))},on={cancelOrder:"Cancel order",cancelOrderV2:"Cancel order",newOrder:"Place order",newOrderV3:"Place order",settleFunds:"Settle funds",matchOrders:"Match orders",initializeMint:"Initialize mint",initializeAccount:"Initialize account",transfer:"Transfer",approve:"Approve",mintTo:"Mint to",closeAccount:"Close account",systemCreate:"Create account",systemTransfer:"Transfer SOL",createAssociatedTokenAccount:"Create token account",signMessage:"Sign Message",unknown:"Unknown"},cn=function(e){var n,t=e.type;return null!==(n=on[t])&&void 0!==n?n:t},ln={side:{label:"Side",isAddress:!1},orderId:{label:"Order Id",isAddress:!1},limit:{label:"Limit",isAddress:!1},basePubkey:{label:"Base wallet",isAddress:!0},quotePubkey:{label:"Quote wallet",isAddress:!0}},sn={amount:{label:"Amount",isAddress:!1},accountPubkey:{label:"Account",isAddress:!0},mintPubkey:{label:"Mint",isAddress:!0},sourcePubkey:{label:"Source",isAddress:!0},destinationPubkey:{label:"Destination",isAddress:!0},ownerPubkey:{label:"Owner",isAddress:!0}},un={toPubkey:{label:"To",isAddress:!0},accountPubkey:{label:"Account",isAddress:!0},basePubkey:{label:"Base",isAddress:!0},seed:{label:"Seed",isAddress:!1},noncePubkey:{label:"Nonce",isAddress:!0},authorizedPubkey:{label:"Authorized",isAddress:!0},newAuthorizedPubkey:{label:"New authorized",isAddress:!0},newAccountPubkey:{label:"New account",isAddress:!0},amount:{label:"Amount",isAddress:!1},lamports:{label:"Amount",isAddress:!1}},dn=function(e,n){var t=e.market,r=e.marketInfo,a=e.data,o=[];r&&o.push({keyText:"Market",valueText:r.name});var i=a.side,c=a.limitPrice,l=a.maxQuantity,s=a.maxBaseQuantity,u=a.orderType,d=a.ownerPubkey;o.push({keyText:"Side",valueText:i.charAt(0).toUpperCase()+i.slice(1)}),o.push({keyText:"Price",valueText:(null==t?void 0:t.priceLotsToNumber(c))||""+c});var p=n?s:l;return o.push({keyText:"Quantity",valueText:(null==t?void 0:t.baseSizeLotsToNumber(p))||""+p}),o.push({keyText:"Type",valueText:u.charAt(0).toUpperCase()+u.slice(1)}),o.push({keyText:"Owner",valueText:mn(d)}),o},pn=function(e,n,t){switch(e.type){case"cancelOrder":case"cancelOrderV2":case"matchOrders":case"settleFunds":return function(e,n,t){var r=[];return e.marketInfo&&r.push({keyText:"Market",valueText:e.marketInfo.name}),fn(r,e.data,ln,n,t),r}(e,n,t);case"closeAccount":case"initializeAccount":case"transfer":case"approve":case"mintTo":return function(e,n,t){var r=[];return fn(r,e.data,sn,n,t),r}(e,n,t);case"systemCreate":case"systemTransfer":return function(e,n,t){var r=[];return fn(r,e.data,un,n,t),r}(e,n,t);case"newOrder":return dn(e,!1);case"newOrderV3":return dn(e,!0);case"unknown":case"createAssociatedTokenAccount":return function(e,n,t){var r=e.rawData,a=r.length>20?D.formatHashMedium(r,10):r,o=e.data.programId,i=t?ue.generateAddressExplorerUrl(o.toString(),t,n):void 0;return a?[{keyText:"Program Id",valueText:mn(o),valueColor:"#8A81F8",link:i},{keyText:"Data",valueText:a}]:[{keyText:"Program Id",valueText:mn(o),valueColor:"#8A81F8",link:i}]}(e,n,t);default:return[]}},fn=function(e,n,t,r,a){Object.entries(n).forEach((function(n){var o=g.slicedToArray(n,2),i=o[0],c=o[1],l=t[i];if(l){var s=l.label,u="",d=void 0,p=void 0;l.isAddress?(u=mn(c),a&&(d=ue.generateAddressExplorerUrl(c.toString(),a,r),p="#8A81F8")):"lamports"===i?u="".concat(D.formatTokenAmount(D.lamportsToSolana(Number(c)))," SOL"):"function"==typeof c.toString()?u=c.toString():"string"==typeof c&&(u=c),e.push({keyText:s,valueText:u,valueColor:p,link:d})}}))},mn=function(e){var n=e.toString();return D.formatHashMedium(n)},gn=(We=o("8G5sy"),Ue=o("8ePxM"),o("4WZBg"));function J(){var e=g.taggedTemplateLiteral(["\n  height: 150px;\n"]);return J=function(){return e},e}function V(){var e=g.taggedTemplateLiteral(["\n  color: ",";\n"]);return V=function(){return e},e}function _(){var e=g.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 12px 20px;\n  width: 100%;\n  height: 48px;\n  border-width: 1px;\n  border-style: solid;\n  border-color: ",";\n  border-radius: 6px;\n  margin-bottom: 10px;\n"]);return _=function(){return e},e}Q=function(e){return e};var vn,yn=N.default(Be.LoadingContent)(In||(In=Q(J()))),Tn=N.default(Z.Text)(wn||(wn=Q(V(),0)),(function(e){return e.isKnownMalicious?bn:xn})),hn=N.default.div(vn||(vn=Q(_(),0)),(function(e){return e.isKnownMalicious?bn:xn})),xn="#FFDC62",bn="#EB3742",En=function(n){var t,r=n.tabId,a=n.origin,o=n.messages,c=n.confirmApproval,l=n.denyApproval,u=n.transactionName,d=n.isTxnKnownMalicious,p=n.isTxnSuspectedMalicious,f=z.useTranslation().t,m=Me.useGetNetworkFee()*s.getRequiredSignatures(o),v=g.slicedToArray(i.useState(!1),2),y=v[0],h=v[1],x=he.useFetchSolanaBalance(),b=x.data,E=he.useFetchAssetsWithAccount(),A=E.data,w=xe.useFetchCollectibles(),S=w.data,k=i.useMemo((function(){if(!A||!S)return se.objectArrayToMap([],"account");var e=g.toConsumableArray(A).concat(g.toConsumableArray(S));return se.objectArrayToMap(e,"account")}),[A,S]),M=!x.isFetched||!E.isFetched||!w.isFetched,P=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=we.useFetchSimulatedTransaction(e,n),r=t.error,a=C.useSelectedSolanaAccount().accountClient,o=t.data,c=i.useMemo((function(){var e=new Map;if(o){var n=!0,t=!1,r=void 0;try{for(var i,c=o[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=g.slicedToArray(i.value,2),s=l[0],u=l[1];if(u&&u.data&&u.owner.toString()===be.TOKEN_PROGRAM_ID.toString()){var d=g.slicedToArray(u.data,1)[0];try{var p=Ee.deserializeTokenAccount(Ce.from(d,"base64"));p.owner===a.publicKey.toString()&&e.set(s,p)}catch(e){}}}}catch(e){t=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(t)throw r}}return e}}),[o]);return{balances:i.useMemo((function(){var e={};if(o&&c){var n=a.publicKey.toString(),t=null==o?void 0:o.get(n);t&&(e[n]={amount:new Ae.BigNumber(t.lamports)});var r=!0,i=!1,l=void 0;try{for(var s,u=c[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=g.slicedToArray(s.value,2),p=d[0],f=d[1];f.owner===n&&(e[p]={mint:f.mint,amount:f.amount,delegate:f.delegate})}}catch(e){i=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}return e}}),[o,c]),error:r}}(o,5e3),I=Object.values(null!==(t=P.balances)&&void 0!==t?t:{}).map((function(e){return e.mint})).filter((function(e){return!!e})),R=Pe.useTokenMetasForMints(I),L=i.useMemo((function(){var e,n=P.balances;if(n&&!M){var t=[],r=!0,a=!1,o=void 0;try{for(var i,c=Object.entries(n)[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=g.slicedToArray(i.value,2),s=l[0],u=l[1];if(void 0===u.mint&&b){var d=u.amount.minus(b),p=D.lamportsToSolana(d.toNumber())+m;if(0!==p){var f=D.formatTokenAmount(Math.abs(p));t.push({keyText:T.SOLANA.symbol,valueText:d.isNegative()?"-".concat(f," ").concat(T.SOLANA.symbol):"+".concat(f," ").concat(T.SOLANA.symbol),valueColor:d.isNegative()?"#EB3742":"#21E56F"})}}else{var v=k[s],y=u.mint;if(v){var h=u.amount.minus(v.baseBalance),x=D.amountToUiAmount(h.abs(),v.decimals),E=D.formatTokenAmount(Math.abs(x));if("fungible"===v.type){var A=null!==(e=null==v?void 0:v.symbol)&&void 0!==e?e:D.formatAddressShort(null!=y?y:v.address);0!==x&&t.push({keyText:A,valueText:h.isNegative()?"-".concat(E," ").concat(A):"+".concat(E," ").concat(A),valueColor:h.isNegative()?"#EB3742":"#21E56F"})}else if("collectible"===v.type){if(0!==x){var w="1"===E?"":"(".concat(E,")");t.push({keyText:"NFT",valueText:h.isNegative()?"-".concat(v.name," ").concat(w):"+".concat(v.name," ").concat(w)})}}}else if(R.value&&y){var S=R.value[y];if(S){var C=D.amountToUiAmount(u.amount.toNumber(),S.decimals);if(0!==C){var I=D.formatTokenAmount(C),L="1"===I?"":"(".concat(I,")");t.push({keyText:S.isCollectible?"NFT":S.symbol,valueText:S.isCollectible?"+".concat(S.name," ").concat(L):"+".concat(I," ").concat(S.symbol),valueColor:S.isCollectible?void 0:"#21E56F"})}}}}}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}}),[P,k,b,m,R,M]),q=e(i).createElement(We.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(We.TooltipText,null,f("notificationTransactionApprovalEstimatesBasedOnSimulations"))),B=f("notificationTransactionApprovalUnableToFetchBalanceChanges");P.error instanceof Te.TransactionSimulationError&&(B=f("notificationTransactionApprovalTransactionMayFailToConfirm"));var j=i.useMemo((function(){var e=s.canEvadeTransactionSimulation(o);return e&&O.analytics.capture("transactionCanEvadeSimulation",{data:{messages:o.join("|")}}),e}),[o]);return j&&(B=f("notificationTransactionApprovalSignUnableToSimulate")),e(i).createElement(W.Container,null,e(i).createElement(H.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement(W.Body,null,e(i).createElement(W.Icon,null,e(i).createElement(G.TabIconHeader,{tabId:r,primaryText:u,secondaryText:D.removeWebPrefixes(a)})),e(i).createElement(yn,{isLoading:void 0===L&&!P.error,showingDelayMs:0},(d||p)&&e(i).createElement(hn,{isKnownMalicious:d},e(i).createElement(Tn,{size:14,weight:500,lineHeight:19.6,isKnownMalicious:d},f(d?"notificationTransactionApprovalKnownMalicious":"notificationTransactionApprovalSuspectedMalicious"))),P.error||j?e(i).createElement(De.RowCard,{title:f("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:[{valueText:B,valueColor:bn}],info:q}):e(i).createElement(De.RowCard,{title:f("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:L,emptyDescription:f("notificationTransactionApprovalNoBalanceChanges"),info:q}),e(i).createElement(Oe,null,e(i).createElement(Fe,null,e(i).createElement(ze,null,e(i).createElement(Z.Text,{size:14,lineHeight:17,textAlign:"left",color:"#777",style:{gap:10,marginLeft:"-8px"}},e(i).createElement(Ue.Info,{info:e(i).createElement(We.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(We.TooltipText,null,f("notificationTransactionApprovalSolanaAmountRequired")))}),f("notificationTransactionApprovalNetworkFee")),e(i).createElement(Z.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word"},e(i).createElement(gn.SolBalance,null,m))))),e(i).createElement(Z.Text,{size:14,lineHeight:19,color:"#777777",margin:"17px 0",onClick:function(){return h(!y)}},f(y?"notificationTransactionApprovalHideAdvancedDetails":"notificationTransactionApprovalViewAdvancedDetails")),y&&e(i).createElement(De.TransactionInstructionRows,{messages:o}))),e(i).createElement(W.Footer,null,e(i).createElement(K.ButtonPair,{primaryText:f("notificationTransactionApprovalActionButtonApprove"),secondaryText:f("notificationTransactionApprovalActionButtonCancel"),onPrimaryClicked:c,onSecondaryClicked:l})))},An=o("3UD42");W=o("jJ2Ea"),g=o("cuInp"),i=o("yrqZm"),N=o("5BN27"),z=o("eNGT7"),D=o("jcs3P"),H=o("jj9QT"),G=o("5oDS0"),K=o("6AaHU"),Z=o("7Z3sw"),W=o("jJ2Ea");function J(){var e=g.taggedTemplateLiteral(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return J=function(){return e},e}function V(){var e=g.taggedTemplateLiteral(["\n  border: 1px solid ",";\n  border-radius: 8px;\n  padding: 10px 10px;\n  margin-bottom: 10px;\n"]);return V=function(){return e},e}Q=function(e){return e};var wn,Sn="#eb3742",kn=N.default.div(In||(In=Q(J()))),Cn=N.default.div(wn||(wn=Q(V(),0)),Sn),Mn=function(n){var t=n.tabId,r=n.origin,a=n.proceedToApproval,o=n.denyApproval,c=z.useTranslation().t;return e(i).createElement(W.Container,null,e(i).createElement(H.AccountHeader,{lastChild:e(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(i).createElement(W.Body,null,e(i).createElement(W.TopGroup,null,e(i).createElement(G.TabIconHeader,{tabId:t,secondaryText:D.removeWebPrefixes(r),showWarning:!0})),e(i).createElement(kn,null,e(i).createElement(Cn,null,e(i).createElement(Z.Text,{size:14,color:Sn},c("maliciousTransactionWarning"))),e(i).createElement(Z.Text,{size:14,color:"#777777",hoverColor:Sn,onClick:function(){return a(r)}},c("maliciousTransactionWarningIgnoreWarning")))),e(i).createElement(W.Footer,{plain:!0},e(i).createElement(K.Button,{onClick:function(){return o(r)}},c("maliciousTransactionWarningButtonClose"))))},Pn=(ae=o("glMqZ"),o("iOBRd"));function J(){var e=g.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n"]);return J=function(){return e},e}Q=function(e){return e};var In,Rn=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},Ln=N.default.div(In||(In=Q(J()))),qn=function(n){var t,r=n.origin,a=n.requestId,o=n.requestMethod,c=n.tabId,u=n.unsignedTransactionMessages,d=void 0===u?[]:u,p=n.unsignedTransactions,f=void 0===p?[]:p,y=n.signAndSendSignatures,T=void 0===y?[]:y,h=n.options,x=void 0===h?{}:h,b=z.useTranslation().t,E=g.slicedToArray(i.useState(!1),2),A=E[0],w=E[1],S=g.slicedToArray(Pn.useFeatureFlags(["tx-submission-service"]),1)[0],P=M.useTransactionsManager(),I=m.usePostOutgoingBackgroundResponse(),R=C.useSelectedSolanaAccount(),L=R.accountClient,q=R.accountMeta,B=q.type===F.AccountType.Ledger,j=o===l.ProviderToWalletRequestMethods.SignTransaction,N=o===l.ProviderToWalletRequestMethods.SignAllTransactions,D=o===l.ProviderToWalletRequestMethods.SignAndSendTransaction,U=null===(t=ye.useFetchConnection())||void 0===t?void 0:t.data,H=null==U?void 0:U.connection,K=k.useDetailViews(),G=K.pushDetailView,Z=K.popDetailView,J=s.canEvadeTransactionSimulation(d),V=L,_=V.publicKey.toString(),Q=function(e,n){var t=se.getOrigin(n)||"",r=de.useFetchScannedTransaction(e,t);return i.useEffect((function(){null!==r.error&&r.error===fe.ERR_REQUEST_TIMEOUT_REACHED?O.analytics.capture("scanTransactionRequestTimeoutReached",{data:{origin:t}}):null!==r.error&&O.analytics.capture("scanTransactionRequestError",{data:{origin:t,error:r.error.message}})}),[r,t]),r}(f,r),Y=Q.isTxnKnownMalicious,X=Q.isTxnSuspectedMalicious,$=Q.isLoading,ee=i.useCallback((function(n){return Rn(void 0,void 0,void 0,e(v).mark((function t(){var o,c,u,p,f,m,g,y,h,b,E;return e(v).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!B){t.next=6;break}if(H){t.next=4;break}return t.abrupt("return");case 4:c=ue.createSignerFromLedgerAccountMeta(q,n),V=new le.AccountClient(H,c,S,P);case 6:if(t.prev=6,!D){t.next=16;break}return u=s.messageAndSignaturesToTransaction(d[0],T),t.next=11,V.signAndSendTransactionAsync(u,x);case 11:p=t.sent,O.analytics.capture("signAndSendTransaction",{data:{origin:r}}),o=l.createSignSuccessResponse(a,p,_),t.next=45;break;case 16:f=[],m=!0,g=!1,y=void 0,t.prev=18,h=d[Symbol.iterator]();case 20:if(m=(b=h.next()).done){t.next=30;break}return E=b.value,t.t0=f,t.next=25,V.signMessageAsync(E);case 25:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 27:m=!0,t.next=20;break;case 30:t.next=36;break;case 32:t.prev=32,t.t2=t.catch(18),g=!0,y=t.t2;case 36:t.prev=36,t.prev=37,m||null==h.return||h.return();case 39:if(t.prev=39,!g){t.next=42;break}throw y;case 42:return t.finish(39);case 43:return t.finish(36);case 44:j?(O.analytics.capture("signTransaction",{data:{origin:r}}),o=l.createSignSuccessResponse(a,f[0],_)):N&&(O.analytics.capture("signAllTransactions",{data:{origin:r}}),o=l.createSignAllTransactionsSuccessResponse(a,f,_));case 45:O.analytics.capture("transactionConfirm",{data:{origin:se.getOrigin(r),canEvadeSimulation:J}}),I(o),t.next=53;break;case 49:t.prev=49,t.t3=t.catch(6),console.error(t.t3),An.isKnownLedgerActionError(t.t3)?G(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(An.LedgerActionError,{ledgerActionError:t.t3,onRetryClick:function(){Z()},onCancelClick:function(){o=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest),I(o)}}))):B?(o=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest),I(o)):(o=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.TransactionRejected,null===t.t3||void 0===t.t3?void 0:t.t3.message),I(o));case 53:case"end":return t.stop()}}),t,null,[[6,49],[18,32,36,44],[37,,39,43]])})))}),[a,d,L,H,I,r,J]),ne=i.useCallback((function(){B?G(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(An.LedgerAction,{ledgerAction:ee,cancel:re})),{shouldShowBackButton:!1}):ee()}),[ee,f,r,_,J]),te=i.useCallback((function(){O.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:se.getOrigin(r)}}),w(!0)}),[r]),re=i.useCallback((function(){var e=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest);O.analytics.capture("transactionDeny",{data:{origin:se.getOrigin(r),canEvadeSimulation:J}}),I(e)}),[a,I,r,J]);return $?e(i).createElement(Ln,null,e(i).createElement(ae.Spinner,null)):Y&&!A?e(i).createElement(Mn,{tabId:c,origin:r,proceedToApproval:te,denyApproval:re}):e(i).createElement(En,{tabId:c,origin:r,messages:d,confirmApproval:ne,denyApproval:re,transactionName:b("notificationSignatureRequestApproveTransactionCapitalized"),isTxnKnownMalicious:Y,isTxnSuspectedMalicious:X})},Bn={};n(Bn,"SignMessageRequest",(function(){return On}),(function(e){return On=e}));v=o("1vgyn"),i=o("yrqZm"),O=o("fVAzy"),l=o("a9js8"),F=o("226dB"),D=o("jcs3P"),C=o("1rSG6"),k=o("1qebk"),ye=o("cneLj"),An=o("3UD42"),K=o("6AaHU"),H=o("jj9QT"),W=o("jJ2Ea"),G=o("5oDS0");var jn=o("ehiNV").Buffer,Nn=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},On=function(n){var t,r=n.origin,a=n.requestId,o=n.message,c=n.display,s=n.tabId,u=m.usePostOutgoingBackgroundResponse(),d=C.useSelectedSolanaAccount(),p=d.accountClient,f=d.accountMeta,g=null===(t=ye.useFetchConnection())||void 0===t?void 0:t.data,y=null==g?void 0:g.connection,T=k.useDetailViews().pushDetailView,h=i.useCallback((function(){return Nn(void 0,void 0,void 0,e(v).mark((function n(){var t,i,c,s;return e(v).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p,e.prev=1,e.next=4,t.signUTF8(jn.from(o).toString());case 4:i=e.sent,c=t.publicKey.toString(),s=l.createSignSuccessResponse(a,i,c),O.analytics.capture("signMessageConfirm",{data:{origin:r}}),u(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),b();case 14:case"end":return e.stop()}}),n,null,[[1,11]])})))}),[a,o,p,y,u]),x=i.useCallback((function(){f.type===F.AccountType.Ledger?T(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(An.LedgerAction,{ledgerAction:h,cancel:b})),{shouldShowBackButton:!1}):h()}),[h]),b=i.useCallback((function(){var e=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest);O.analytics.capture("transactionDeny",{data:{origin:r}}),u(e)}),[a,u]);return e(i).createElement(W.Container,null,e(i).createElement(H.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement(W.Body,null,e(i).createElement(W.Icon,null,e(i).createElement(G.TabIconHeader,{tabId:s,primaryText:"Signature Request",secondaryText:D.removeWebPrefixes(r)})),e(i).createElement(De.SignMessageInstructionRow,{message:o,display:c})),e(i).createElement(W.Footer,null,e(i).createElement(K.ButtonPair,{primaryText:"Approve",secondaryText:"Cancel",onPrimaryClicked:x,onSecondaryClicked:b})))},Fn=o("aq3jz"),zn=o("3I0N1"),Dn=o("2vDhy");u.initSentry();var Un=function(){var n=m.useIncomingBackgroundRequest();if(!n)return null;var t=n.origin,r=n.req,a=n.tabId,o=r.id,c=r.method,u=r.params,d=u.message,p=u.messages,f=u.transaction,g=u.transactions,v=u.display,y=u.options,T=f?s.transactionStringToMessageString(f):d,h=g?g.map((function(e){return s.transactionStringToMessageString(e)})):p,x=c===l.ProviderToWalletRequestMethods.Connect,b=c===l.ProviderToWalletRequestMethods.SignMessage,E=c===l.ProviderToWalletRequestMethods.SignTransaction,A=c===l.ProviderToWalletRequestMethods.SignAllTransactions,w=c===l.ProviderToWalletRequestMethods.SignAndSendTransaction,S=E||A,C=T instanceof Uint8Array?T:l.objectToUint8Array(null!=T?T:{}),M=E||w?[T]:A?h:void 0,P=E||w?[d?s.messageStringToTransactionString(d):f]:A?p?p.map((function(e){return s.messageStringToTransactionString(e)})):g:void 0,I=w&&f?s.transactionStringToTransaction(f,"bs58").signatures:void 0,R=x?"Connection Error":"Transaction Error",L="There was an error attempting to ".concat(x?"connect to the application":"sign the transaction",". Please try again.");return Dn.useRootGroupEffect(),Dn.useCaptureOpen("notificationOpen",{data:{method:c}}),e(i).createElement(Fn.PopupAndNotificationErrorBoundary,{title:R,message:L},x?e(i).createElement(ie,{tabId:a,origin:t,requestId:o}):b?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(Bn.SignMessageRequest,{tabId:a,origin:t,requestId:o,message:C,display:v})):S?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ce.SignatureRequest,{tabId:a,origin:t,requestId:o,requestMethod:c,unsignedTransactionMessages:M,unsignedTransactions:P})):w?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ce.SignatureRequest,{tabId:a,origin:t,requestId:o,requestMethod:c,unsignedTransactionMessages:M,unsignedTransactions:P,signAndSendSignatures:I,options:y})):null)},Wn=function(){var n=i.useCallback((function(n){return e(i).createElement(R.ModalsProvider,null,e(i).createElement(I.WalletMenuProvider,null,e(i).createElement(B.Unlock,{onUnlock:n})))}),[]),t=i.useCallback((function(){p.openTabAsync({url:"onboarding.html"}),window.close()}),[]);return e(i).createElement(e(i).Fragment,null,e(i).createElement(d.ThemedGlobalStyle,{backgroundColor:"#222222"}),e(i).createElement(Fn.PopupAndNotificationErrorBoundary,null,e(i).createElement(q.Main,null,e(i).createElement(L.QueryProvider,null,e(i).createElement(m.BackgroundConnectionProvider,null,e(i).createElement(zn.ExtensionLockWrapper,{renderLocked:n,openOnboarding:t},e(i).createElement(M.TransactionsProvider,null,e(i).createElement(P.HardwareWalletProvider,null,e(i).createElement(C.SolanaAccountsProvider,null,e(i).createElement(I.WalletMenuProvider,null,e(i).createElement(Un,null)))))))),e(i).createElement("div",{id:f.MODAL_ID}))))};c.render(e(i).createElement(Wn,null),document.getElementById("root"))}();define=__define;})(window.define);