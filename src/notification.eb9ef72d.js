function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},o=n.parcelRequirea886;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},n.parcelRequirea886=o);var i=o("aZikt"),l=o("ihAua"),c=o("eLyRJ"),s=o("ci2Mj"),u=o("8C6BZ"),d=o("5cKs6"),p=o("iyOkC"),m=o("4yWCU");o("6CHoY");var g={};t(g,"BackgroundConnectionProvider",(function(){return E}),(function(e){return E=e})),t(g,"useIncomingBackgroundRequest",(function(){return A}),(function(e){return A=e})),t(g,"usePostOutgoingBackgroundResponse",(function(){return x}),(function(e){return x=e}));i=o("aZikt");var f=o("e5x4G"),y=o("6oEu9"),h=(p=o("iyOkC"),function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))});const v={isConnected:!1,lastMessage:null,postMessage:y.NOOP},T=e(i).createContext(v),E=({children:t})=>{const[n,r,a]=function(){const[e,t]=i.useState(null),[n,r]=i.useState(null);i.useEffect((()=>{let e;return(()=>h(this,void 0,void 0,(function*(){const n=`notification/${(yield p.getCurrentWindowAsync()).id}`;e=f.browser.runtime.connect({name:n}),t(e),e.onMessage.addListener((e=>{r(e)})),e.onDisconnect.addListener((()=>{t(null)}))})))(),()=>{null==e||e.disconnect()}}),[]);const a=i.useCallback((t=>{e&&e.postMessage(t)}),[e]);return[!!e,n,a]}();return e(i).createElement(T.Provider,{value:{isConnected:n,lastMessage:r,postMessage:a}},t)};function b(){const e=i.useContext(T);if(!e)throw new Error("Missing background connection context");return e}function A(){const{lastMessage:e}=b();return e&&"string"==typeof e.origin&&e.origin&&e.req&&"string"==typeof e.req.method&&e.req.method?e:null}function x(){const e=A(),{postMessage:t}=b();return i.useCallback((n=>{if(!e)throw new Error("No request received from the background yet");if(e.req.id!==n.id)throw new Error(`Request id: ${e.req.id} does not match response id: ${n.id}`);t(n)}),[e,t])}var k=o("6rMcH"),w=o("6a67Q"),C=o("eduP0"),S=o("ixd3d"),M=o("82Ilk"),P=o("9ZliH"),R=o("5DQqc"),I=o("eeuNW"),B=o("g9lcT"),q=o("h5G75"),F=o("bMYcF"),O=o("6mzlH"),H=o("jSC0s"),D=o("cjUNA"),L=(i=o("aZikt"),o("hHMPk")),z=(u=o("8C6BZ"),o("lwple")),N=(c=o("eLyRJ"),M=o("82Ilk"),i=o("aZikt"),L=o("hHMPk"),o("7Qmuu")),j=o("cFuyE"),W=o("hJDxl"),$=o("bJYWD"),U=o("9AO5f"),Z=o("aADTv"),K=o("lSpdH"),J=o("g7X40");const Q=L.default.div`
  border-top: 1px solid #333333;
  border-bottom: 1px solid #333333;
  width: 100%;
  display: flex;
  padding: 10px 5px;
`,V=L.default.div`
  > * {
    margin: 18px 0px;
  }
`,G=L.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  > * {
    margin: 0px ${e=>e.spacing}px;
    text-align: left;
  }
`,Y=({tabId:t,origin:n,confirmApproval:r,denyApproval:a})=>{const{t:o}=N.useTranslation();return e(i).createElement($.Container,null,e(i).createElement(U.AccountHeader,{lastChild:e(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(i).createElement($.Body,null,e(i).createElement($.TopGroup,null,e(i).createElement(K.TabIconHeader,{tabId:t,secondaryText:j.removeWebPrefixes(n)})),e(i).createElement(Q,null,e(i).createElement(V,null,e(i).createElement(G,{spacing:8},e(i).createElement(J.Text,{size:14,color:"#777777",lineHeight:16.94,weight:500},o("notificationApplicationApprovalPermissionsPrimary"))),e(i).createElement(G,{spacing:8},e(i).createElement(W.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement(J.Text,{size:14,lineHeight:17},o("notificationApplicationApprovalPermissionsViewWalletActivity"))),e(i).createElement(G,{spacing:8},e(i).createElement(W.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement(J.Text,{size:14,lineHeight:17},o("notificationApplicationApprovalPermissionsTransactionApproval"))))),e(i).createElement($.BottomGroup,null,e(i).createElement(G,{spacing:4},e(i).createElement(J.Text,{size:14,lineHeight:17,color:"#777"},o("notificationApplicationApprovalConnectDisclaimer"))))),e(i).createElement($.Footer,{plain:!0},e(i).createElement(Z.ButtonPair,{primaryText:o("notificationApplicationApprovalActionButtonConnect"),secondaryText:o("notificationApplicationApprovalActionButtonCancel"),onPrimaryClicked:()=>r(n),onSecondaryClicked:()=>a(n)})))};var _=o("6oQjh"),X=o("iO2dB"),ee=o("9OxTN"),te=o("lPkGw");const ne=L.default.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: center;
  align-items: center;
`,re=({tabId:t,origin:n,requestId:r})=>{var a;const{accountClient:o}=M.useSelectedAccount(),l=o.publicKey.toString(),s=g.usePostOutgoingBackgroundResponse(),[d,p,m]=_.useStorage(z.StorageKeys.TrustedApplicationsByOwner,{}),f=null!==(a=d[l])&&void 0!==a?a:{},y=void 0!==f[n],[h,v]=e(i).useState(!1),[T,E]=e(i).useState(!1),b=t=>{const n=e(D)(f);n[t]=!0,u.analytics.capture("connectionConfirm",{data:{origin:t}}),m(Object.assign(Object.assign({},d),{[l]:n}))},A=()=>{u.analytics.capture("connectionDeny",{data:{origin:n}});const e=c.createJsonRpcErrorResponse(r,c.RpcErrorCode.UserRejectedRequest);s(e)};if(i.useEffect((()=>{y?(()=>{const e={publicKey:l},t=c.createJsonRpcResponse(r,e);s(t)})():ee.detectPhishing(n).then((e=>{E(e.result),v(!0)})).catch((()=>{v(!0)}))}),[y]),y)return null;return p||!h?e(i).createElement(ne,null,e(i).createElement(te.Spinner,null)):T?e(i).createElement(X.BlocklistConnectRequest,{tabId:t,origin:n,confirmApproval:b,denyApproval:A}):e(i).createElement(Y,{tabId:t,origin:n,confirmApproval:b,denyApproval:A})};var ae={};t(ae,"SignatureRequest",(function(){return at}),(function(e){return at=e}));i=o("aZikt"),N=o("7Qmuu");var oe=o("bgp3N"),ie=(u=o("8C6BZ"),c=o("eLyRJ"),o("HEK4k")),le=(z=o("lwple"),o("7Lj33")),ce=(M=o("82Ilk"),P=o("9ZliH"),w=o("6a67Q"),k=o("6rMcH"),L=o("hHMPk"),i=o("aZikt"),N=o("7Qmuu"),y=o("6oEu9"),o("9qtir")),se=(j=o("cFuyE"),ie=o("HEK4k"),c=o("eLyRJ"),o("6gzK9")),ue=(S=o("ixd3d"),o("7zHiM")),de=o("mB8NW"),pe=(i=o("aZikt"),o("hZalX")),me=o("ljcNr"),ge=(M=o("82Ilk"),o("jC9PB")),fe={};t(fe,"useFetchSimulatedTransaction",(function(){return he}),(function(e){return he=e}));se=o("6gzK9"),ie=o("HEK4k"),M=o("82Ilk"),q=o("h5G75");var ye=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};function he(e,t){const{accountClient:n}=M.useSelectedAccount(),r=["simulated-tx",{messages:e}],a=!!e;return q.useQuery({queryKey:r,queryFn:()=>ye(this,void 0,void 0,(function*(){const t=ie.messagesToTransaction(e);t.recentBlockhash||(t.recentBlockhash=yield n.getRecentBlockHash()),t.feePayer||(t.feePayer=n.publicKey);const r=ie.getAccountsFromTransaction(t).filter((e=>!/1111111111111111/.test(e.toString()))),a=(yield n.simulateTransaction(t,r)).value.accounts;return new Map(se.zip(r.map((e=>e.toString())),a))})),enabled:a,refetchInterval:t})}var ve=o("dkOkP").Buffer;j=o("cFuyE");var Te=o("j2x34");var Ee={};t(Ee,"useTokenMetasForMints",(function(){return ke}),(function(e){return ke=e}));var be=o("lxqKj"),Ae=o("9MFgk"),xe=(le=o("7Lj33"),j=o("cFuyE"),w=o("6a67Q"),ue=o("7zHiM"),function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))});const ke=e=>{const t=ue.useFetchTokenMetas().data,n=new Map(null==t?void 0:t.map((e=>[e.address,e]))),r=w.useConnection();return be.useAsync((()=>xe(void 0,void 0,void 0,(function*(){var t,a,o;if(!e.length)return{};const i={},l=[];for(const t of e){const e=n.get(t);e?i[t]=e:l.push(t)}if(l.length){const e=yield le.fetchMintInfos(l,r),n=yield Ae.fetchCollectibleMetadata(l,r);for(const r of l){const l=e[r],c=n[r];if(l){let e;c&&(e=yield Ae.fetchUriData(c.data.uri,r)),i[r]={decimals:l.decimals,address:r,symbol:null!==(t=null==c?void 0:c.data.symbol)&&void 0!==t?t:j.formatAddressShort(r),name:null!==(o=null!==(a=null==e?void 0:e.name)&&void 0!==a?a:null==c?void 0:c.data.name)&&void 0!==o?o:"Unknown",isCollectible:!!c&&!!c.data.uri}}}}return i}))),[e.length])};$=o("bJYWD"),U=o("9AO5f"),Z=o("aADTv"),K=o("lSpdH");var we=o("eopQk");L=o("hHMPk"),J=o("g7X40");const Ce=L.default.section`
  background: #2a2a2a;
  border-radius: 6px;
  margin-bottom: 10px;
`,Se=L.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;
  > * {
    margin-top: 12px;
  }
`,Me=(L.default.div`
  padding: 12px 18px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,L.default(J.Text).attrs({textAlign:"left",size:14,weight:500,lineHeight:17})``,L.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  > * {
    display: flex;
    align-items: center;
  }
`);J=o("g7X40");var Pe={};t(Pe,"TransactionInstructionRows",(function(){return Oe}),(function(e){return Oe=e})),t(Pe,"SignMessageInstructionRow",(function(){return He}),(function(e){return He=e})),t(Pe,"RowCard",(function(){return We}),(function(e){return We=e}));L=o("hHMPk"),i=o("aZikt"),u=o("8C6BZ"),j=o("cFuyE"),M=o("82Ilk"),i=o("aZikt");we=o("eopQk"),J=o("g7X40");var Re=o("k7WoY"),Ie=o("k8hDx"),Be=o("dkOkP").Buffer,qe=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Fe=[],Oe=({messages:t})=>{const{accountClient:n}=M.useSelectedAccount(),r=i.useCallback((()=>qe(void 0,void 0,void 0,(function*(){const e=(yield Promise.all(t.map((e=>n.decodeMessageAsync(e))))).filter((e=>void 0!==e));return e.flat().forEach((e=>{e&&u.analytics.capture("transactionInstructionApproval",{data:{origin:origin,type:e.type}})})),e}))),[t]),[a,o,l]=function(t,n){const[r,a]=e(i).useState({value:n,error:null,isPending:!0});e(i).useEffect((()=>{t().then((e=>a({value:e,error:null,isPending:!1}))).catch((e=>a({value:n,error:e.toString(),isPending:!1})))}),[t,n]);const{value:o,error:l,isPending:c}=r;return[o,l,c]}(r,Fe),c=a.flat();return e(i).createElement(we.LoadingContent,{isLoading:l},c.map(((t,n)=>e(i).createElement(je,{key:n,decodedMessage:t}))))},He=({message:t,display:n="utf8"})=>{let r;if("hex"===n)r=`0x${Be.from(t).toString("hex")}`;else r=(new TextDecoder).decode(t);return e(i).createElement(De,null,e(i).createElement(Le,null,e(i).createElement(J.Text,{textAlign:"left",size:14,weight:600,lineHeight:17},"Sign message"),e(i).createElement(Re.Info,{tooltipAlignment:"bottomRight",info:e(i).createElement(Ie.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(Ie.TooltipText,{size:14,color:"#FFF",weight:500,lineHeight:20},"Make sure you understand what you are signing and trust the application that is requesting this."))})),e(i).createElement(ze,null,e(i).createElement(Ne,null,e(i).createElement(J.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"pre-line",wordBreak:"break-all",textAlign:"left",color:"#777"},r))))},De=L.default.section`
  background: #2a2a2a;
  border-radius: 6px;
  margin-bottom: 10px;
`,Le=L.default.div`
  padding: 12px 18px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,ze=L.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;
  > * {
    margin-top: 12px;
  }
`,Ne=L.default.div`
  display: flex;
  justify-content: space-between;
`,je=({decodedMessage:t})=>{const n=i.useMemo((()=>Ue(t)),[t]),r=i.useMemo((()=>Ve(t)),[t]);return e(i).createElement(We,{title:n,rowItems:r})},We=({title:t,rowItems:n,emptyDescription:r,info:a})=>e(i).createElement(De,null,e(i).createElement(Le,null,e(i).createElement(J.Text,{textAlign:"left",size:14,weight:500,lineHeight:17},t),a&&e(i).createElement(Re.Info,{info:a})),e(i).createElement(ze,null,n.map((({keyText:t,valueText:n,valueColor:r})=>e(i).createElement(Ne,{key:t||n},t&&e(i).createElement(J.Text,{size:14,lineHeight:17,color:"#777777"},t),e(i).createElement(J.Text,{size:14,weight:500,lineHeight:17,color:r,whiteSpace:t?"normal":"pre-line",wordBreak:"break-word"},n)))),0===n.length&&e(i).createElement(Ne,null,e(i).createElement(J.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal"},r)))),$e={cancelOrder:"Cancel order",cancelOrderV2:"Cancel order",newOrder:"Place order",newOrderV3:"Place order",settleFunds:"Settle funds",matchOrders:"Match orders",initializeMint:"Initialize mint",initializeAccount:"Initialize account",transfer:"Transfer",approve:"Approve",mintTo:"Mint to",closeAccount:"Close account",systemCreate:"Create account",systemTransfer:"Transfer SOL",createAssociatedTokenAccount:"Create token account",signMessage:"Sign Message",unknown:"Unknown"},Ue=e=>{var t;const{type:n}=e;return null!==(t=$e[n])&&void 0!==t?t:n},Ze={side:{label:"Side",isAddress:!1},orderId:{label:"Order Id",isAddress:!1},limit:{label:"Limit",isAddress:!1},basePubkey:{label:"Base wallet",isAddress:!0},quotePubkey:{label:"Quote wallet",isAddress:!0}},Ke={amount:{label:"Amount",isAddress:!1},accountPubkey:{label:"Account",isAddress:!0},mintPubkey:{label:"Mint",isAddress:!0},sourcePubkey:{label:"Source",isAddress:!0},destinationPubkey:{label:"Destination",isAddress:!0},ownerPubkey:{label:"Owner",isAddress:!0}},Je={toPubkey:{label:"To",isAddress:!0},accountPubkey:{label:"Account",isAddress:!0},basePubkey:{label:"Base",isAddress:!0},seed:{label:"Seed",isAddress:!1},noncePubkey:{label:"Nonce",isAddress:!0},authorizedPubkey:{label:"Authorized",isAddress:!0},newAuthorizedPubkey:{label:"New authorized",isAddress:!0},newAccountPubkey:{label:"New account",isAddress:!0},amount:{label:"Amount",isAddress:!1},lamports:{label:"Amount",isAddress:!1}},Qe=(e,t)=>{const{market:n,marketInfo:r,data:a}=e,o=[];r&&o.push({keyText:"Market",valueText:r.name});const{side:i,limitPrice:l,maxQuantity:c,maxBaseQuantity:s,orderType:u,ownerPubkey:d}=a;o.push({keyText:"Side",valueText:i.charAt(0).toUpperCase()+i.slice(1)}),o.push({keyText:"Price",valueText:(null==n?void 0:n.priceLotsToNumber(l))||""+l});const p=t?s:c;return o.push({keyText:"Quantity",valueText:(null==n?void 0:n.baseSizeLotsToNumber(p))||""+p}),o.push({keyText:"Type",valueText:u.charAt(0).toUpperCase()+u.slice(1)}),o.push({keyText:"Owner",valueText:Ye(d)}),o},Ve=e=>{switch(e.type){case"cancelOrder":case"cancelOrderV2":case"matchOrders":case"settleFunds":return(e=>{const t=[];return e.marketInfo&&t.push({keyText:"Market",valueText:e.marketInfo.name}),Ge(t,e.data,Ze),t})(e);case"closeAccount":case"initializeAccount":case"transfer":case"approve":case"mintTo":return(e=>{const t=[];return Ge(t,e.data,Ke),t})(e);case"systemCreate":case"systemTransfer":return(e=>{const t=[];return Ge(t,e.data,Je),t})(e);case"newOrder":return Qe(e,!1);case"newOrderV3":return Qe(e,!0);case"unknown":case"createAssociatedTokenAccount":return(e=>{const t=e.rawData,n=t.length>20?j.formatHashMedium(t,10):t;return n?[{keyText:"Program Id",valueText:Ye(e.data.programId)},{keyText:"Data",valueText:n}]:[{keyText:"Program Id",valueText:Ye(e.data.programId)}]})(e);default:return[]}},Ge=(e,t,n)=>{Object.entries(t).forEach((([t,r])=>{const a=n[t];if(a){const{label:n,isAddress:o}=a,i=n;let l="";o?l=Ye(r):"lamports"===t?l=`${j.formatTokenAmount(j.lamportsToSolana(r))} SOL`:"function"==typeof r.toString()?l=r.toString():"string"==typeof r&&(l=r),e.push({keyText:i,valueText:l})}}))},Ye=e=>{const t=e.toString();return j.formatHashMedium(t)};Ie=o("k8hDx"),Re=o("k7WoY");var _e=o("2MtnF");const Xe=L.default(we.LoadingContent)`
  height: 150px;
`,et=L.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 12px 20px;
  width: 100%;
  height: 44px;
  border-width: 1px;
  border-style: solid;
  border-color: ${e=>e.warningColor};
  border-radius: 6px;
  margin-bottom: 10px;
`,tt=({tabId:t,origin:n,messages:r,requestMethod:a,confirmApproval:o,denyApproval:l,transactionName:s})=>{var u;const{t:d}=N.useTranslation(),{isSignAndSendWarningEnabled:p}=S.useFeatureFlags(),m=(()=>{const{feeCalculator:e}=Te.useBlockchainState();return j.lamportsToSolana(e.lamportsPerSignature)})()*ie.getRequiredSignatures(r),[g,f]=i.useState(!1),h=ue.useFetchSolanaBalance(),v=h.data,T=ue.useFetchAssetsWithAccount(),E=T.data,b=de.useFetchCollectibles(),A=b.data,x=i.useMemo((()=>{if(!E||!A)return se.objectArrayToMap([],"account");const e=[...E,...A];return se.objectArrayToMap(e,"account")}),[E,A]),k=!h.isFetched||!T.isFetched||!b.isFetched,w=((e,t=!1)=>{const n=fe.useFetchSimulatedTransaction(e,t),r=n.error,{accountClient:a}=M.useSelectedAccount(),o=n.data,l=i.useMemo((()=>{const e=new Map;if(o){for(const[t,n]of o)if(n&&n.data&&n.owner.toString()===pe.TOKEN_PROGRAM_ID.toString()){const[r]=n.data;try{const n=me.deserializeTokenAccount(ve.from(r,"base64"));n.owner===a.publicKey.toString()&&e.set(t,n)}catch(e){}}return e}}),[o]);return{balances:i.useMemo((()=>{const e={};if(!o||!l)return;const t=a.publicKey.toString(),n=null==o?void 0:o.get(t);n&&(e[t]={amount:new ge.BigNumber(n.lamports)});for(const[n,r]of l)r.owner===t&&(e[n]={mint:r.mint,amount:r.amount,delegate:r.delegate});return e}),[o,l]),error:r}})(r,5e3),{warningMsg:C,warningMsgColor:P,buttonTheme:R}=((e,t,n)=>t!==c.ProviderToWalletRequestMethods.SignAndSendTransaction&&e?{warningMsg:n("notificationTransactionApprovalSignSendWarning"),warningMsgColor:"#FFDC62"}:{})(p,a,d),I=Object.values(null!==(u=w.balances)&&void 0!==u?u:{}).map((e=>e.mint)).filter((e=>!!e)),B=Ee.useTokenMetasForMints(I),q=i.useMemo((()=>{var e;const{balances:t}=w;if(!t||k)return;const n=[];for(const[r,a]of Object.entries(t)){if(void 0===a.mint&&v){const e=a.amount.minus(v),t=j.lamportsToSolana(e.toNumber())+m;if(0!==t){const r=j.formatTokenAmount(Math.abs(t));n.push({keyText:y.SOLANA.symbol,valueText:e.isNegative()?`-${r} ${y.SOLANA.symbol}`:`+${r} ${y.SOLANA.symbol}`,valueColor:e.isNegative()?"#EB3742":"#21E56F"})}continue}const t=x[r],o=a.mint;if(t){const r=a.amount.minus(t.baseBalance),i=j.amountToUiAmount(r.abs(),t.decimals),l=j.formatTokenAmount(Math.abs(i));if("fungible"===t.type){const a=null!==(e=null==t?void 0:t.symbol)&&void 0!==e?e:j.formatAddressShort(null!=o?o:t.address);0!==i&&n.push({keyText:a,valueText:r.isNegative()?`-${l} ${a}`:`+${l} ${a}`,valueColor:r.isNegative()?"#EB3742":"#21E56F"})}else if("collectible"===t.type){const e="NFT";if(0!==i){const a="1"===l?"":`(${l})`;n.push({keyText:e,valueText:r.isNegative()?`-${t.name} ${a}`:`+${t.name} ${a}`})}}}else if(B.value&&o){const e=B.value[o];if(e){const t=j.amountToUiAmount(a.amount.toNumber(),e.decimals);if(0!==t){const r=j.formatTokenAmount(t),a="1"===r?"":`(${r})`;n.push({keyText:e.isCollectible?"NFT":e.symbol,valueText:e.isCollectible?`+${e.name} ${a}`:`+${r} ${e.symbol}`,valueColor:e.isCollectible?void 0:"#21E56F"})}}}}return n}),[w,x,v,m,B,k]),F=e(i).createElement(Ie.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(Ie.TooltipText,{size:14,color:"#FFF",lineHeight:18},d("notificationTransactionApprovalEstimatesBasedOnSimulations")));return e(i).createElement($.Container,null,e(i).createElement(U.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement($.Body,null,e(i).createElement($.Icon,null,e(i).createElement(K.TabIconHeader,{tabId:t,primaryText:s,secondaryText:j.removeWebPrefixes(n)})),e(i).createElement(Xe,{isLoading:void 0===q&&!w.error,showingDelayMs:0},P&&e(i).createElement(et,{warningColor:P},e(i).createElement(J.Text,{size:14,weight:500,lineHeight:19.6,color:P},C)),w.error?e(i).createElement(Pe.RowCard,{title:d("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:[{valueText:w.error instanceof ce.TransactionSimulationError?d("notificationTransactionApprovalTransactionMayFailToConfirm"):d("notificationTransactionApprovalUnableToFetchBalanceChanges"),valueColor:"#EB3742"}],info:F}):e(i).createElement(Pe.RowCard,{title:d("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:q,emptyDescription:d("notificationTransactionApprovalNoBalanceChanges"),info:F}),e(i).createElement(Ce,null,e(i).createElement(Se,null,e(i).createElement(Me,null,e(i).createElement(J.Text,{size:14,lineHeight:17,textAlign:"left",color:"#777",style:{gap:10,marginLeft:"-8px"}},e(i).createElement(Re.Info,{info:e(i).createElement(Ie.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(Ie.TooltipText,{size:14,color:"#FFF",lineHeight:18},d("notificationTransactionApprovalSolanaAmountRequired")))}),d("notificationTransactionApprovalNetworkFee")),e(i).createElement(J.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word"},e(i).createElement(_e.SolBalance,null,m))))),e(i).createElement(J.Text,{size:14,lineHeight:19,color:"#777777",margin:"17px 0",onClick:()=>f(!g)},d(g?"notificationTransactionApprovalHideAdvancedDetails":"notificationTransactionApprovalViewAdvancedDetails")),g&&e(i).createElement(Pe.TransactionInstructionRows,{messages:r}))),e(i).createElement($.Footer,null,e(i).createElement(Z.ButtonPair,{primaryText:d("notificationTransactionApprovalActionButtonApprove"),secondaryText:d("notificationTransactionApprovalActionButtonCancel"),onPrimaryClicked:o,onSecondaryClicked:l,primaryTheme:R})))};var nt=o("djb9u"),rt=($=o("bJYWD"),function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))});const at=({origin:t,requestId:n,requestMethod:r,tabId:a,unsignedTransactionMessages:o=[],options:l={}})=>{const{t:s}=N.useTranslation(),d=P.useTransactionsManager(),p=g.usePostOutgoingBackgroundResponse(),{accountClient:m,accountMeta:f}=M.useSelectedAccount(),y=f.type===z.AccountType.Ledger,h=r===c.ProviderToWalletRequestMethods.SignTransaction,v=r===c.ProviderToWalletRequestMethods.SignAllTransactions,T=r===c.ProviderToWalletRequestMethods.SignAndSendTransaction,E=w.useConnection(),{pushDetailView:b,popDetailView:A}=k.useDetailViews(),x=i.useCallback((r=>rt(void 0,void 0,void 0,(function*(){let a=m;const s=a.publicKey.toString(),g=[];let x;if(y){const e=le.createSignerFromLedgerAccountMeta(f,r);a=new oe.AccountClient(E,e,d)}try{if(T){const e=ie.messageToTransaction(o[0]),t=yield a.signAndSendTransactionAsync(e,l);x=c.createSignSuccessResponse(n,t,s)}else{for(const e of o)g.push(yield a.signMessageAsync(e));h?x=c.createSignSuccessResponse(n,g[0],s):v&&(x=c.createSignAllTransactionsSuccessResponse(n,g,s))}u.analytics.capture("transactionConfirm",{data:{origin:t}}),p(x)}catch(t){console.error(t),nt.isKnownLedgerActionError(t)?b(e(i).createElement($.LedgerWrapper,null,e(i).createElement(nt.LedgerActionError,{ledgerActionError:t,onRetryClick:()=>{A()},onCancelClick:()=>{x=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.UserRejectedRequest),p(x)}}))):y?(x=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.UserRejectedRequest),p(x)):(x=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.TransactionRejected),p(x))}}))),[n,o,m,E,p]),C=i.useCallback((()=>{y?b(e(i).createElement($.LedgerWrapper,null,e(i).createElement(nt.LedgerAction,{ledgerAction:x,cancel:S})),{shouldShowBackButton:!1}):x()}),[x]),S=i.useCallback((()=>{const e=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.UserRejectedRequest);u.analytics.capture("transactionDeny",{data:{origin:t}}),p(e)}),[n,p]);return e(i).createElement(tt,{tabId:a,origin:t,requestMethod:r,messages:o,confirmApproval:C,denyApproval:S,transactionName:s("notificationSignatureRequestApproveTransactionCapitalized")})};var ot={};t(ot,"SignMessageRequest",(function(){return lt}),(function(e){return lt=e}));i=o("aZikt"),u=o("8C6BZ"),c=o("eLyRJ"),z=o("lwple"),j=o("cFuyE"),M=o("82Ilk"),w=o("6a67Q"),k=o("6rMcH"),nt=o("djb9u"),Z=o("aADTv"),U=o("9AO5f"),$=o("bJYWD"),K=o("lSpdH");var it=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const lt=t=>{const{origin:n,requestId:r,message:a,display:o,tabId:l}=t,s=g.usePostOutgoingBackgroundResponse(),{accountClient:d,accountMeta:p}=M.useSelectedAccount(),m=w.useConnection(),{pushDetailView:f}=k.useDetailViews(),y=i.useCallback((()=>it(void 0,void 0,void 0,(function*(){const e=d;try{const t=yield e.signUint8MessageAsync(a),o=e.publicKey.toString(),i=c.createSignSuccessResponse(r,t,o);u.analytics.capture("signMessageConfirm",{data:{origin:n}}),s(i)}catch(e){v()}}))),[r,a,d,m,s]),h=i.useCallback((()=>{p.type===z.AccountType.Ledger?f(e(i).createElement($.LedgerWrapper,null,e(i).createElement(nt.LedgerAction,{ledgerAction:y,cancel:v})),{shouldShowBackButton:!1}):y()}),[y]),v=i.useCallback((()=>{const e=c.createJsonRpcErrorResponse(r,c.RpcErrorCode.UserRejectedRequest);u.analytics.capture("transactionDeny",{data:{origin:n}}),s(e)}),[r,s]);return e(i).createElement($.Container,null,e(i).createElement(U.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement($.Body,null,e(i).createElement($.Icon,null,e(i).createElement(K.TabIconHeader,{tabId:l,primaryText:"Signature Request",secondaryText:j.removeWebPrefixes(n)})),e(i).createElement(Pe.SignMessageInstructionRow,{message:a,display:o})),e(i).createElement($.Footer,null,e(i).createElement(Z.ButtonPair,{primaryText:"Approve",secondaryText:"Cancel",onPrimaryClicked:h,onSecondaryClicked:v})))};var ct=o("i2Zy4");s.initSentry();const st=()=>{const t=g.useIncomingBackgroundRequest();if(!t)return null;const{origin:n,req:r,tabId:a}=t,{id:o,method:l}=r,{message:s,messages:d,display:p,options:m}=r.params,f=l===c.ProviderToWalletRequestMethods.Connect,y=l===c.ProviderToWalletRequestMethods.SignMessage,h=l===c.ProviderToWalletRequestMethods.SignTransaction,v=l===c.ProviderToWalletRequestMethods.SignAllTransactions,T=l===c.ProviderToWalletRequestMethods.SignAndSendTransaction,E=h||v,b=s instanceof Uint8Array?s:c.objectToUint8Array(null!=s?s:{}),A=h||T?[s]:v?d:void 0,x=f?"Connection Error":"Transaction Error",w=`There was an error attempting to ${f?"connect to the application":"sign the transaction"}. Please try again.`;return i.useEffect((()=>{u.analytics.capture("notificationOpen",{data:{method:l}})}),[l]),e(i).createElement(ct.PopupAndNotificationErrorBoundary,{title:x,message:w},f?e(i).createElement(re,{tabId:a,origin:n,requestId:o}):y?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ot.SignMessageRequest,{tabId:a,origin:n,requestId:o,message:b,display:p})):E?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ae.SignatureRequest,{tabId:a,origin:n,requestId:o,requestMethod:l,unsignedTransactionMessages:A})):T?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ae.SignatureRequest,{tabId:a,origin:n,requestId:o,requestMethod:l,unsignedTransactionMessages:A,options:m})):null)},ut=()=>{const t=i.useCallback((t=>e(i).createElement(B.ModalsProvider,null,e(i).createElement(I.WalletMenuProvider,null,e(i).createElement(H.Unlock,{unlockSeedAndMnemonic:t})))),[]),n=i.useCallback((()=>{p.openTabAsync({url:"onboarding.html"}),window.close()}),[]);return e(i).createElement(e(i).Fragment,null,e(i).createElement(d.ThemedGlobalStyle,{backgroundColor:"#222222"}),e(i).createElement(ct.PopupAndNotificationErrorBoundary,null,e(i).createElement(O.Main,null,e(i).createElement(S.FeatureFlagsProvider,null,e(i).createElement(F.BannerProvider,null,e(i).createElement(q.QueryProvider,null,e(i).createElement(g.BackgroundConnectionProvider,null,e(i).createElement(C.SeedProvider,{renderLocked:t,openOnboarding:n},e(i).createElement(w.ConnectionProvider,null,e(i).createElement(P.TransactionsProvider,null,e(i).createElement(R.HardwareWalletProvider,null,e(i).createElement(M.AccountsProvider,null,e(i).createElement(I.WalletMenuProvider,null,e(i).createElement(st,null))))))))))),e(i).createElement("div",{id:m.MODAL_ID}))))};l.render(e(i).createElement(ut,null),document.getElementById("root"));