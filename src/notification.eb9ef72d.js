(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},r=n.parcelRequirea886;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},n.parcelRequirea886=r);var i=r("aZikt"),s=r("ihAua"),c=r("eLyRJ"),l=r("HEK4k"),u=r("ci2Mj"),d=r("5cKs6"),p=r("iyOkC"),m=r("4yWCU");r("6CHoY");var g={};t(g,"BackgroundConnectionProvider",(function(){return E}),(function(e){return E=e})),t(g,"useIncomingBackgroundRequest",(function(){return b}),(function(e){return b=e})),t(g,"usePostOutgoingBackgroundResponse",(function(){return x}),(function(e){return x=e}));i=r("aZikt");var f=r("e5x4G"),v=r("6oEu9"),y=(p=r("iyOkC"),function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))});const h={isConnected:!1,lastMessage:null,postMessage:v.NOOP},T=e(i).createContext(h),E=({children:t})=>{const[n,a,o]=function(){const[e,t]=i.useState(null),[n,a]=i.useState(null);i.useEffect((()=>{let e;return(()=>y(this,void 0,void 0,(function*(){const n=`notification/${(yield p.getCurrentWindowAsync()).id}`;e=f.browser.runtime.connect({name:n}),t(e),e.onMessage.addListener((e=>{a(e)})),e.onDisconnect.addListener((()=>{t(null)}))})))(),()=>{null==e||e.disconnect()}}),[]);const o=i.useCallback((t=>{e&&e.postMessage(t)}),[e]);return[!!e,n,o]}();return e(i).createElement(T.Provider,{value:{isConnected:n,lastMessage:a,postMessage:o}},t)};function A(){const e=i.useContext(T);if(!e)throw new Error("Missing background connection context");return e}function b(){const{lastMessage:e}=A();return e&&"string"==typeof e.origin&&e.origin&&e.req&&"string"==typeof e.req.method&&e.req.method?e:null}function x(){const e=b(),{postMessage:t}=A();return i.useCallback((n=>{if(!e)throw new Error("No request received from the background yet");if(e.req.id!==n.id)throw new Error(`Request id: ${e.req.id} does not match response id: ${n.id}`);t(n)}),[e,t])}var k=r("6rMcH"),w=r("ixd3d"),S=r("82Ilk"),C=r("9ZliH"),M=r("5DQqc"),P=r("eeuNW"),R=r("g9lcT"),I=r("h5G75"),O=r("6mzlH"),B=r("jSC0s"),F=r("cjUNA"),q=(i=r("aZikt"),r("hHMPk")),H=r("8C6BZ"),L=r("lwple"),D=(c=r("eLyRJ"),S=r("82Ilk"),i=r("aZikt"),q=r("hHMPk"),r("7Qmuu")),N=r("cFuyE"),j=r("hJDxl"),W=r("bJYWD"),K=r("9AO5f"),U=r("aADTv"),z=r("lSpdH"),$=r("g7X40");const Q=q.default.div`
  border-top: 1px solid #333333;
  border-bottom: 1px solid #333333;
  width: 100%;
  display: flex;
  padding: 10px 5px;
`,J=q.default.div`
  > * {
    margin: 18px 0px;
  }
`,Z=q.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  > * {
    margin: 0px ${e=>e.spacing}px;
    text-align: left;
  }
`,_=({tabId:t,origin:n,confirmApproval:a,denyApproval:o})=>{const{t:r}=D.useTranslation();return e(i).createElement(W.Container,null,e(i).createElement(K.AccountHeader,{lastChild:e(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(i).createElement(W.Body,null,e(i).createElement(W.TopGroup,null,e(i).createElement(z.TabIconHeader,{tabId:t,secondaryText:N.removeWebPrefixes(n)})),e(i).createElement(Q,null,e(i).createElement(J,null,e(i).createElement(Z,{spacing:8},e(i).createElement($.Text,{size:14,color:"#777777",lineHeight:16.94,weight:500},r("notificationApplicationApprovalPermissionsPrimary"))),e(i).createElement(Z,{spacing:8},e(i).createElement(j.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement($.Text,{size:14,lineHeight:17},r("notificationApplicationApprovalPermissionsViewWalletActivity"))),e(i).createElement(Z,{spacing:8},e(i).createElement(j.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement($.Text,{size:14,lineHeight:17},r("notificationApplicationApprovalPermissionsTransactionApproval"))))),e(i).createElement(W.BottomGroup,null,e(i).createElement(Z,{spacing:4},e(i).createElement($.Text,{size:14,lineHeight:17,color:"#777"},r("notificationApplicationApprovalConnectDisclaimer"))))),e(i).createElement(W.Footer,{plain:!0},e(i).createElement(U.ButtonPair,{primaryText:r("notificationApplicationApprovalActionButtonConnect"),secondaryText:r("notificationApplicationApprovalActionButtonCancel"),onPrimaryClicked:()=>a(n),onSecondaryClicked:()=>o(n)})))};var G=r("6oQjh"),V=r("iO2dB"),Y=r("9OxTN"),X=r("lPkGw");const ee=q.default.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: center;
  align-items: center;
`,te=({tabId:t,origin:n,requestId:a})=>{var o;const{accountClient:r}=S.useSelectedAccount(),s=r.publicKey.toString(),l=g.usePostOutgoingBackgroundResponse(),[u,d,p]=G.useStorage(L.StorageKeys.TrustedApplicationsByOwnerBrowser,{}),m=null!==(o=u[s])&&void 0!==o?o:{},f=void 0!==m[n],[v,y]=e(i).useState(!1),[h,T]=e(i).useState(!1),E=t=>{const n=e(F)(m);n[t]=!0,H.analytics.capture("connectionConfirm",{data:{origin:t}}),p(Object.assign(Object.assign({},u),{[s]:n}))},A=()=>{H.analytics.capture("connectionDeny",{data:{origin:n}});const e=c.createJsonRpcErrorResponse(a,c.RpcErrorCode.UserRejectedRequest);l(e)};if(i.useEffect((()=>{f?(()=>{const e={publicKey:s},t=c.createJsonRpcResponse(a,e);l(t)})():Y.detectPhishing(n).then((e=>{T(e.result),y(!0)})).catch((()=>{y(!0)}))}),[f]),f)return null;return d||!v?e(i).createElement(ee,null,e(i).createElement(X.Spinner,null)):h?e(i).createElement(V.BlocklistConnectRequest,{tabId:t,origin:n,confirmApproval:E,denyApproval:A}):e(i).createElement(_,{tabId:t,origin:n,confirmApproval:E,denyApproval:A})};var ne={};t(ne,"SignatureRequest",(function(){return yt}),(function(e){return yt=e}));i=r("aZikt"),q=r("hHMPk"),D=r("7Qmuu");var ae=r("bgp3N"),oe=(H=r("8C6BZ"),c=r("eLyRJ"),l=r("HEK4k"),L=r("lwple"),r("7eQt4")),re=r("7Lj33"),ie=(S=r("82Ilk"),C=r("9ZliH"),k=r("6rMcH"),i=r("aZikt"),H=r("8C6BZ"),{});t(ie,"useFetchScannedTransaction",(function(){return de}),(function(e){return de=e}));i=r("aZikt"),v=r("6oEu9");var se=r("j5GoN"),ce=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};const le=new Error("Ninja API key missing");var ue;!function(e){e.ChecksPassed="CHECKS_PASSED",e.KnownMalicious="KNOWN_MALICIOUS",e.SuspectedMalicious="SUSPECTED_MALICIOUS"}(ue||(ue={}));const de=(e,t)=>{const[n,a]=i.useState({error:null,isLoading:!0});if(i.useEffect((()=>{ce(void 0,void 0,void 0,(function*(){try{const n=new AbortController,o=n.signal;setTimeout((()=>{n.abort()}),3e3);const r=new Headers;if(void 0===v.NINJA_SECURITY_API_KEY)return void a({error:le,isLoading:!1});r.append("X-NINJA-API-Key",v.NINJA_SECURITY_API_KEY),r.append("Content-Type","application/json");const i={transactions:e,metadata:{origin:t}},s={method:"POST",headers:r,body:JSON.stringify(i)},c=new Request("https://api.ninja.security/solana/v0/mainnet/scan/transactions",s),l=yield fetch(c,{signal:o});if(l.ok){const e=yield l.json();if(void 0===e.status||![ue.ChecksPassed,ue.KnownMalicious,ue.SuspectedMalicious].includes(e.status))return void a({error:new Error("Response missing valid TxnScanStatus"),isLoading:!1});const t=e.status===ue.KnownMalicious,n=e.status===ue.SuspectedMalicious;a({error:null,isTxnKnownMalicious:t,isTxnSuspectedMalicious:n,isLoading:!1})}else a({error:new Error(`Ninja API returned non-200 response: ${l.status}`),isLoading:!1})}catch(e){e.message.toLowerCase().includes("aborted")?a({error:se.ERR_REQUEST_TIMEOUT_REACHED,isLoading:!1}):a({error:e,isLoading:!1})}}))}),[JSON.stringify(e)]),null!==n.error&&n.error===le)throw n.error;return n};se=r("j5GoN"),oe=r("7eQt4");var pe=r("fMhDQ"),me=(q=r("hHMPk"),i=r("aZikt"),D=r("7Qmuu"),v=r("6oEu9"),r("9qtir")),ge=(H=r("8C6BZ"),N=r("cFuyE"),l=r("HEK4k"),oe=r("7eQt4"),r("lzptm")),fe=r("2t1ms"),ve=(i=r("aZikt"),r("hZalX")),ye=r("ljcNr"),he=(S=r("82Ilk"),r("jC9PB")),Te={};t(Te,"useFetchSimulatedTransaction",(function(){return Ae}),(function(e){return Ae=e}));oe=r("7eQt4"),l=r("HEK4k"),S=r("82Ilk"),I=r("h5G75");var Ee=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};function Ae(e,t){const{accountClient:n}=S.useSelectedAccount(),a=["simulated-tx",{messages:e}],o=!!e;return I.useQuery({queryKey:a,queryFn:()=>Ee(this,void 0,void 0,(function*(){const t=l.messagesToTransaction(e);t.recentBlockhash||(t.recentBlockhash=yield n.getLatestBlockhash()),t.feePayer||(t.feePayer=n.publicKey);const a=l.getAccountsFromTransaction(t).filter((e=>!/1111111111111111/.test(e.toString()))),o=(yield n.simulateTransaction(t,a)).value.accounts;return new Map(oe.zip(a.map((e=>e.toString())),o))})),enabled:o,refetchInterval:t})}var be=r("dkOkP").Buffer;var xe=r("8udvA"),ke={};t(ke,"useTokenMetasForMints",(function(){return Me}),(function(e){return Me=e}));var we=r("lxqKj"),Se=r("9MFgk"),Ce=(re=r("7Lj33"),N=r("cFuyE"),ge=r("lzptm"),pe=r("fMhDQ"),function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))});const Me=e=>{var t;const n=ge.useFetchTokenMetas().data,a=new Map(null==n?void 0:n.map((e=>[e.address,e]))),o=null===(t=pe.useFetchConnection())||void 0===t?void 0:t.data,r=null==o?void 0:o.connection;return we.useAsync((()=>Ce(void 0,void 0,void 0,(function*(){var t,n,o;if(!e.length||!r)return{};const i={},s=[];for(const t of e){const e=a.get(t);e?i[t]=e:s.push(t)}if(s.length){const e=yield re.fetchMintInfos(s,r),a=(yield Se.fetchCollectibleMetadata(s,r)).reduce(((e,t)=>(e[t.mint.toString()]=t,e)),{});for(const r of s){const s=e[r],c=a[r];if(s){let e;c&&(e=yield Se.fetchUriData(c.data.uri,r)),i[r]={decimals:s.decimals,address:r,symbol:null!==(t=null==c?void 0:c.data.symbol)&&void 0!==t?t:N.formatAddressShort(r),name:null!==(o=null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null==c?void 0:c.data.name)&&void 0!==o?o:"Unknown",isCollectible:!!c&&!!c.data.uri}}}}return i}))),[e.length])};W=r("bJYWD"),K=r("9AO5f"),U=r("aADTv"),z=r("lSpdH");var Pe=r("eopQk");q=r("hHMPk"),$=r("g7X40");const Re=q.default.section`
  background: #2a2a2a;
  border-radius: 6px;
  margin-bottom: 10px;
`,Ie=q.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;
  > * {
    margin-top: 12px;
  }
`,Oe=(q.default.div`
  padding: 12px 18px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,q.default($.Text).attrs({textAlign:"left",size:14,weight:500,lineHeight:17})``,q.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  > * {
    display: flex;
    align-items: center;
  }
`);$=r("g7X40");var Be={};t(Be,"TransactionInstructionRows",(function(){return Ne}),(function(e){return Ne=e})),t(Be,"SignMessageInstructionRow",(function(){return je}),(function(e){return je=e})),t(Be,"RowCard",(function(){return Ze}),(function(e){return Ze=e}));q=r("hHMPk"),i=r("aZikt"),H=r("8C6BZ"),N=r("cFuyE"),S=r("82Ilk"),i=r("aZikt");Pe=r("eopQk"),$=r("g7X40");var Fe=r("k7WoY"),qe=r("k8hDx"),He=(re=r("7Lj33"),pe=r("fMhDQ"),r("dkOkP").Buffer),Le=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};const De=[],Ne=({messages:t})=>{const{accountClient:n}=S.useSelectedAccount(),a=i.useCallback((()=>Le(void 0,void 0,void 0,(function*(){const e=(yield Promise.all(t.map((e=>n.decodeMessageAsync(e))))).filter((e=>void 0!==e));return e.flat().forEach((e=>{e&&H.analytics.capture("transactionInstructionApproval",{data:{origin:origin,type:e.type}})})),e}))),[t]),[o,r,s]=function(t,n){const[a,o]=e(i).useState({value:n,error:null,isPending:!0});e(i).useEffect((()=>{t().then((e=>o({value:e,error:null,isPending:!1}))).catch((e=>o({value:n,error:e.toString(),isPending:!1})))}),[t,n]);const{value:r,error:s,isPending:c}=a;return[r,s,c]}(a,De),c=o.flat();return e(i).createElement(Pe.LoadingContent,{isLoading:s},c.map(((t,n)=>e(i).createElement(Je,{key:n,decodedMessage:t}))))},je=({message:t,display:n="utf8"})=>{let a;if("hex"===n)a=`0x${He.from(t).toString("hex")}`;else a=(new TextDecoder).decode(t);return e(i).createElement(We,null,e(i).createElement(Ke,null,e(i).createElement($.Text,{textAlign:"left",size:14,weight:600,lineHeight:17},"Sign message"),e(i).createElement(Fe.Info,{tooltipAlignment:"bottomRight",info:e(i).createElement(qe.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(qe.TooltipText,null,"Make sure you understand what you are signing and trust the application that is requesting this."))})),e(i).createElement(Ue,null,e(i).createElement(ze,null,e(i).createElement($.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"pre-line",wordBreak:"break-all",textAlign:"left",color:"#777"},a))))},We=q.default.section`
  background: #2a2a2a;
  border-radius: 6px;
  margin-bottom: 10px;
`,Ke=q.default.div`
  padding: 12px 18px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,Ue=q.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;
  > * {
    margin-top: 12px;
  }
`,ze=q.default.div`
  display: flex;
  justify-content: space-between;
`,$e=q.default.a.attrs({target:"_blank",rel:"noopener noreferrer"})`
  text-decoration: none;
  cursor: pointer;
`,Qe=({condition:e,wrapper:t,children:n})=>e?t(n):n,Je=({decodedMessage:t})=>{var n;const a=null===(n=pe.useFetchConnection())||void 0===n?void 0:n.data,o=null==a?void 0:a.cluster,r=i.useMemo((()=>Ge(t)),[t]),s=i.useMemo((()=>tt(t,o)),[t,o]);return e(i).createElement(Ze,{title:r,rowItems:s})},Ze=({title:t,rowItems:n,emptyDescription:a,info:o})=>e(i).createElement(We,null,e(i).createElement(Ke,null,e(i).createElement($.Text,{textAlign:"left",size:14,weight:500,lineHeight:17},t),o&&e(i).createElement(Fe.Info,{info:o})),e(i).createElement(Ue,null,n.map((({keyText:t,valueText:n,valueColor:a,link:o})=>e(i).createElement(ze,{key:t||n},t&&e(i).createElement($.Text,{size:14,lineHeight:17,color:"#777777"},t),e(i).createElement(Qe,{condition:o,wrapper:t=>e(i).createElement($e,{href:o},t)},e(i).createElement($.Text,{size:14,weight:500,lineHeight:17,color:a,whiteSpace:t?"normal":"pre-line",wordBreak:"break-word"},n))))),0===n.length&&e(i).createElement(ze,null,e(i).createElement($.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal"},a)))),_e={cancelOrder:"Cancel order",cancelOrderV2:"Cancel order",newOrder:"Place order",newOrderV3:"Place order",settleFunds:"Settle funds",matchOrders:"Match orders",initializeMint:"Initialize mint",initializeAccount:"Initialize account",transfer:"Transfer",approve:"Approve",mintTo:"Mint to",closeAccount:"Close account",systemCreate:"Create account",systemTransfer:"Transfer SOL",createAssociatedTokenAccount:"Create token account",signMessage:"Sign Message",unknown:"Unknown"},Ge=e=>{var t;const{type:n}=e;return null!==(t=_e[n])&&void 0!==t?t:n},Ve={side:{label:"Side",isAddress:!1},orderId:{label:"Order Id",isAddress:!1},limit:{label:"Limit",isAddress:!1},basePubkey:{label:"Base wallet",isAddress:!0},quotePubkey:{label:"Quote wallet",isAddress:!0}},Ye={amount:{label:"Amount",isAddress:!1},accountPubkey:{label:"Account",isAddress:!0},mintPubkey:{label:"Mint",isAddress:!0},sourcePubkey:{label:"Source",isAddress:!0},destinationPubkey:{label:"Destination",isAddress:!0},ownerPubkey:{label:"Owner",isAddress:!0}},Xe={toPubkey:{label:"To",isAddress:!0},accountPubkey:{label:"Account",isAddress:!0},basePubkey:{label:"Base",isAddress:!0},seed:{label:"Seed",isAddress:!1},noncePubkey:{label:"Nonce",isAddress:!0},authorizedPubkey:{label:"Authorized",isAddress:!0},newAuthorizedPubkey:{label:"New authorized",isAddress:!0},newAccountPubkey:{label:"New account",isAddress:!0},amount:{label:"Amount",isAddress:!1},lamports:{label:"Amount",isAddress:!1}},et=(e,t)=>{const{market:n,marketInfo:a,data:o}=e,r=[];a&&r.push({keyText:"Market",valueText:a.name});const{side:i,limitPrice:s,maxQuantity:c,maxBaseQuantity:l,orderType:u,ownerPubkey:d}=o;r.push({keyText:"Side",valueText:i.charAt(0).toUpperCase()+i.slice(1)}),r.push({keyText:"Price",valueText:(null==n?void 0:n.priceLotsToNumber(s))||""+s});const p=t?l:c;return r.push({keyText:"Quantity",valueText:(null==n?void 0:n.baseSizeLotsToNumber(p))||""+p}),r.push({keyText:"Type",valueText:u.charAt(0).toUpperCase()+u.slice(1)}),r.push({keyText:"Owner",valueText:at(d)}),r},tt=(e,t)=>{switch(e.type){case"cancelOrder":case"cancelOrderV2":case"matchOrders":case"settleFunds":return((e,t)=>{const n=[];return e.marketInfo&&n.push({keyText:"Market",valueText:e.marketInfo.name}),nt(n,e.data,Ve,t),n})(e,t);case"closeAccount":case"initializeAccount":case"transfer":case"approve":case"mintTo":return((e,t)=>{const n=[];return nt(n,e.data,Ye,t),n})(e,t);case"systemCreate":case"systemTransfer":return((e,t)=>{const n=[];return nt(n,e.data,Xe,t),n})(e,t);case"newOrder":return et(e,!1);case"newOrderV3":return et(e,!0);case"unknown":case"createAssociatedTokenAccount":return((e,t)=>{const n=e.rawData,a=n.length>20?N.formatHashMedium(n,10):n,o=e.data.programId,r=t?re.generateAddressSolscanUrl(o.toString(),t):void 0;return a?[{keyText:"Program Id",valueText:at(o),valueColor:"#8A81F8",link:r},{keyText:"Data",valueText:a}]:[{keyText:"Program Id",valueText:at(o),valueColor:"#8A81F8",link:r}]})(e,t);default:return[]}},nt=(e,t,n,a)=>{Object.entries(t).forEach((([t,o])=>{const r=n[t];if(r){const{label:n,isAddress:i}=r,s=n;let c,l,u="";i?(u=at(o),a&&(c=re.generateAddressSolscanUrl(o.toString(),a),l="#8A81F8")):"lamports"===t?u=`${N.formatTokenAmount(N.lamportsToSolana(Number(o)))} SOL`:"function"==typeof o.toString()?u=o.toString():"string"==typeof o&&(u=o),e.push({keyText:s,valueText:u,valueColor:l,link:c})}}))},at=e=>{const t=e.toString();return N.formatHashMedium(t)};qe=r("k8hDx"),Fe=r("k7WoY");var ot=r("2MtnF");const rt=q.default(Pe.LoadingContent)`
  height: 150px;
`,it=q.default($.Text)`
  color: ${e=>e.isKnownMalicious?lt:ct};
`,st=q.default.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 12px 20px;
  width: 100%;
  height: 48px;
  border-width: 1px;
  border-style: solid;
  border-color: ${e=>e.isKnownMalicious?lt:ct};
  border-radius: 6px;
  margin-bottom: 10px;
`,ct="#FFDC62",lt="#EB3742",ut=({tabId:t,origin:n,messages:a,confirmApproval:o,denyApproval:r,transactionName:s,isTxnKnownMalicious:c,isTxnSuspectedMalicious:u})=>{var d;const{t:p}=D.useTranslation(),m=xe.useGetNetworkFee()*l.getRequiredSignatures(a),[g,f]=i.useState(!1),y=ge.useFetchSolanaBalance(),h=y.data,T=ge.useFetchAssetsWithAccount(),E=T.data,A=fe.useFetchCollectibles(),b=A.data,x=i.useMemo((()=>{if(!E||!b)return oe.objectArrayToMap([],"account");const e=[...E,...b];return oe.objectArrayToMap(e,"account")}),[E,b]),k=!y.isFetched||!T.isFetched||!A.isFetched,w=((e,t=!1)=>{const n=Te.useFetchSimulatedTransaction(e,t),a=n.error,{accountClient:o}=S.useSelectedAccount(),r=n.data,s=i.useMemo((()=>{const e=new Map;if(r){for(const[t,n]of r)if(n&&n.data&&n.owner.toString()===ve.TOKEN_PROGRAM_ID.toString()){const[a]=n.data;try{const n=ye.deserializeTokenAccount(be.from(a,"base64"));n.owner===o.publicKey.toString()&&e.set(t,n)}catch(e){}}return e}}),[r]);return{balances:i.useMemo((()=>{const e={};if(!r||!s)return;const t=o.publicKey.toString(),n=null==r?void 0:r.get(t);n&&(e[t]={amount:new he.BigNumber(n.lamports)});for(const[n,a]of s)a.owner===t&&(e[n]={mint:a.mint,amount:a.amount,delegate:a.delegate});return e}),[r,s]),error:a}})(a,5e3),C=Object.values(null!==(d=w.balances)&&void 0!==d?d:{}).map((e=>e.mint)).filter((e=>!!e)),M=ke.useTokenMetasForMints(C),P=i.useMemo((()=>{var e;const{balances:t}=w;if(!t||k)return;const n=[];for(const[a,o]of Object.entries(t)){if(void 0===o.mint&&h){const e=o.amount.minus(h),t=N.lamportsToSolana(e.toNumber())+m;if(0!==t){const a=N.formatTokenAmount(Math.abs(t));n.push({keyText:v.SOLANA.symbol,valueText:e.isNegative()?`-${a} ${v.SOLANA.symbol}`:`+${a} ${v.SOLANA.symbol}`,valueColor:e.isNegative()?"#EB3742":"#21E56F"})}continue}const t=x[a],r=o.mint;if(t){const a=o.amount.minus(t.baseBalance),i=N.amountToUiAmount(a.abs(),t.decimals),s=N.formatTokenAmount(Math.abs(i));if("fungible"===t.type){const o=null!==(e=null==t?void 0:t.symbol)&&void 0!==e?e:N.formatAddressShort(null!=r?r:t.address);0!==i&&n.push({keyText:o,valueText:a.isNegative()?`-${s} ${o}`:`+${s} ${o}`,valueColor:a.isNegative()?"#EB3742":"#21E56F"})}else if("collectible"===t.type){const e="NFT";if(0!==i){const o="1"===s?"":`(${s})`;n.push({keyText:e,valueText:a.isNegative()?`-${t.name} ${o}`:`+${t.name} ${o}`})}}}else if(M.value&&r){const e=M.value[r];if(e){const t=N.amountToUiAmount(o.amount.toNumber(),e.decimals);if(0!==t){const a=N.formatTokenAmount(t),o="1"===a?"":`(${a})`;n.push({keyText:e.isCollectible?"NFT":e.symbol,valueText:e.isCollectible?`+${e.name} ${o}`:`+${a} ${e.symbol}`,valueColor:e.isCollectible?void 0:"#21E56F"})}}}}return n}),[w,x,h,m,M,k]),R=e(i).createElement(qe.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(qe.TooltipText,null,p("notificationTransactionApprovalEstimatesBasedOnSimulations")));let I=p("notificationTransactionApprovalUnableToFetchBalanceChanges");w.error instanceof me.TransactionSimulationError&&(I=p("notificationTransactionApprovalTransactionMayFailToConfirm"));const O=i.useMemo((()=>{const e=l.canEvadeTransactionSimulation(a);return e&&H.analytics.capture("transactionCanEvadeSimulation",{data:{messages:a.join("|")}}),e}),[a]);return O&&(I=p("notificationTransactionApprovalSignUnableToSimulate")),e(i).createElement(W.Container,null,e(i).createElement(K.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement(W.Body,null,e(i).createElement(W.Icon,null,e(i).createElement(z.TabIconHeader,{tabId:t,primaryText:s,secondaryText:N.removeWebPrefixes(n)})),e(i).createElement(rt,{isLoading:void 0===P&&!w.error,showingDelayMs:0},(c||u)&&e(i).createElement(st,{isKnownMalicious:c},e(i).createElement(it,{size:14,weight:500,lineHeight:19.6,isKnownMalicious:c},p(c?"notificationTransactionApprovalKnownMalicious":"notificationTransactionApprovalSuspectedMalicious"))),w.error||O?e(i).createElement(Be.RowCard,{title:p("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:[{valueText:I,valueColor:lt}],info:R}):e(i).createElement(Be.RowCard,{title:p("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:P,emptyDescription:p("notificationTransactionApprovalNoBalanceChanges"),info:R}),e(i).createElement(Re,null,e(i).createElement(Ie,null,e(i).createElement(Oe,null,e(i).createElement($.Text,{size:14,lineHeight:17,textAlign:"left",color:"#777",style:{gap:10,marginLeft:"-8px"}},e(i).createElement(Fe.Info,{info:e(i).createElement(qe.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(qe.TooltipText,null,p("notificationTransactionApprovalSolanaAmountRequired")))}),p("notificationTransactionApprovalNetworkFee")),e(i).createElement($.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word"},e(i).createElement(ot.SolBalance,null,m))))),e(i).createElement($.Text,{size:14,lineHeight:19,color:"#777777",margin:"17px 0",onClick:()=>f(!g)},p(g?"notificationTransactionApprovalHideAdvancedDetails":"notificationTransactionApprovalViewAdvancedDetails")),g&&e(i).createElement(Be.TransactionInstructionRows,{messages:a}))),e(i).createElement(W.Footer,null,e(i).createElement(U.ButtonPair,{primaryText:p("notificationTransactionApprovalActionButtonApprove"),secondaryText:p("notificationTransactionApprovalActionButtonCancel"),onPrimaryClicked:o,onSecondaryClicked:r})))};var dt=r("djb9u");W=r("bJYWD"),i=r("aZikt"),q=r("hHMPk"),D=r("7Qmuu"),N=r("cFuyE"),K=r("9AO5f"),z=r("lSpdH"),U=r("aADTv"),$=r("g7X40"),W=r("bJYWD");const pt=q.default.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,mt=q.default.div`
  border: 1px solid ${"#eb3742"};
  border-radius: 8px;
  padding: 10px 10px;
  margin-bottom: 10px;
`,gt=({tabId:t,origin:n,proceedToApproval:a,denyApproval:o})=>{const{t:r}=D.useTranslation();return e(i).createElement(W.Container,null,e(i).createElement(K.AccountHeader,{lastChild:e(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(i).createElement(W.Body,null,e(i).createElement(W.TopGroup,null,e(i).createElement(z.TabIconHeader,{tabId:t,secondaryText:N.removeWebPrefixes(n),showWarning:!0})),e(i).createElement(pt,null,e(i).createElement(mt,null,e(i).createElement($.Text,{size:14,color:"#eb3742"},r("maliciousTransactionWarning"))),e(i).createElement($.Text,{size:14,color:"#777777",hoverColor:"#eb3742",onClick:()=>a(n)},r("maliciousTransactionWarningIgnoreWarning")))),e(i).createElement(W.Footer,{plain:!0},e(i).createElement(U.Button,{onClick:()=>o(n)},r("maliciousTransactionWarningButtonClose"))))};X=r("lPkGw"),w=r("ixd3d");var ft=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};const vt=q.default.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: center;
  align-items: center;
`,yt=({origin:t,requestId:n,requestMethod:a,tabId:o,unsignedTransactionMessages:r=[],unsignedTransactions:s=[],signAndSendSignatures:u=[],options:d={}})=>{var p;const{t:m}=D.useTranslation(),[f,v]=i.useState(!1),{isTxSubmissionServiceEnabled:y}=w.useFeatureFlags(),h=C.useTransactionsManager(),T=g.usePostOutgoingBackgroundResponse(),{accountClient:E,accountMeta:A}=S.useSelectedAccount(),b=A.type===L.AccountType.Ledger,x=a===c.ProviderToWalletRequestMethods.SignTransaction,M=a===c.ProviderToWalletRequestMethods.SignAllTransactions,P=a===c.ProviderToWalletRequestMethods.SignAndSendTransaction,R=null===(p=pe.useFetchConnection())||void 0===p?void 0:p.data,I=null==R?void 0:R.connection,{pushDetailView:O,popDetailView:B}=k.useDetailViews(),F=l.canEvadeTransactionSimulation(r);let q=E;const N=q.publicKey.toString(),{isTxnKnownMalicious:j,isTxnSuspectedMalicious:K,isLoading:U}=((e,t)=>{const n=oe.getOrigin(t)||"",a=ie.useFetchScannedTransaction(e,n);return i.useEffect((()=>{null!==a.error&&a.error===se.ERR_REQUEST_TIMEOUT_REACHED?H.analytics.capture("scanTransactionRequestTimeoutReached",{data:{origin:n}}):null!==a.error&&H.analytics.capture("scanTransactionRequestError",{data:{origin:n,error:a.error.message}})}),[a,n]),a})(s,t),z=i.useCallback((a=>ft(void 0,void 0,void 0,(function*(){let o;if(b){if(!I)return;const e=re.createSignerFromLedgerAccountMeta(A,a);q=new ae.AccountClient(I,e,y,h)}try{if(P){const e=l.messageAndSignaturesToTransaction(r[0],u),a=yield q.signAndSendTransactionAsync(e,d);H.analytics.capture("signAndSendTransaction",{data:{origin:t}}),o=c.createSignSuccessResponse(n,a,N)}else{const e=[];for(const t of r)e.push(yield q.signMessageAsync(t));x?(H.analytics.capture("signTransaction",{data:{origin:t}}),o=c.createSignSuccessResponse(n,e[0],N)):M&&(H.analytics.capture("signAllTransactions",{data:{origin:t}}),o=c.createSignAllTransactionsSuccessResponse(n,e,N))}H.analytics.capture("transactionConfirm",{data:{origin:oe.getOrigin(t),canEvadeSimulation:F}}),T(o)}catch(t){console.error(t),dt.isKnownLedgerActionError(t)?O(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(dt.LedgerActionError,{ledgerActionError:t,onRetryClick:()=>{B()},onCancelClick:()=>{o=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.UserRejectedRequest),T(o)}}))):b?(o=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.UserRejectedRequest),T(o)):(o=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.TransactionRejected,null==t?void 0:t.message),T(o))}}))),[n,r,E,I,T,t,F]),$=i.useCallback((()=>{b?O(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(dt.LedgerAction,{ledgerAction:z,cancel:J})),{shouldShowBackButton:!1}):z()}),[z,s,t,N,F]),Q=i.useCallback((()=>{H.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:oe.getOrigin(t)}}),v(!0)}),[t]),J=i.useCallback((()=>{const e=c.createJsonRpcErrorResponse(n,c.RpcErrorCode.UserRejectedRequest);H.analytics.capture("transactionDeny",{data:{origin:oe.getOrigin(t),canEvadeSimulation:F}}),T(e)}),[n,T,t,F]);return U?e(i).createElement(vt,null,e(i).createElement(X.Spinner,null)):j&&!f?e(i).createElement(gt,{tabId:o,origin:t,proceedToApproval:Q,denyApproval:J}):e(i).createElement(ut,{tabId:o,origin:t,messages:r,confirmApproval:$,denyApproval:J,transactionName:m("notificationSignatureRequestApproveTransactionCapitalized"),isTxnKnownMalicious:j,isTxnSuspectedMalicious:K})};var ht={};t(ht,"SignMessageRequest",(function(){return At}),(function(e){return At=e}));i=r("aZikt"),H=r("8C6BZ"),c=r("eLyRJ"),L=r("lwple"),N=r("cFuyE"),S=r("82Ilk"),k=r("6rMcH"),pe=r("fMhDQ"),dt=r("djb9u"),U=r("aADTv"),K=r("9AO5f"),W=r("bJYWD"),z=r("lSpdH");var Tt=r("dkOkP").Buffer,Et=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))};const At=t=>{var n;const{origin:a,requestId:o,message:r,display:s,tabId:l}=t,u=g.usePostOutgoingBackgroundResponse(),{accountClient:d,accountMeta:p}=S.useSelectedAccount(),m=null===(n=pe.useFetchConnection())||void 0===n?void 0:n.data,f=null==m?void 0:m.connection,{pushDetailView:v}=k.useDetailViews(),y=i.useCallback((()=>Et(void 0,void 0,void 0,(function*(){const e=d;try{const t=yield e.signUTF8(Tt.from(r).toString()),n=e.publicKey.toString(),i=c.createSignSuccessResponse(o,t,n);H.analytics.capture("signMessageConfirm",{data:{origin:a}}),u(i)}catch(e){T()}}))),[o,r,d,f,u]),h=i.useCallback((()=>{p.type===L.AccountType.Ledger?v(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(dt.LedgerAction,{ledgerAction:y,cancel:T})),{shouldShowBackButton:!1}):y()}),[y]),T=i.useCallback((()=>{const e=c.createJsonRpcErrorResponse(o,c.RpcErrorCode.UserRejectedRequest);H.analytics.capture("transactionDeny",{data:{origin:a}}),u(e)}),[o,u]);return e(i).createElement(W.Container,null,e(i).createElement(K.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement(W.Body,null,e(i).createElement(W.Icon,null,e(i).createElement(z.TabIconHeader,{tabId:l,primaryText:"Signature Request",secondaryText:N.removeWebPrefixes(a)})),e(i).createElement(Be.SignMessageInstructionRow,{message:r,display:s})),e(i).createElement(W.Footer,null,e(i).createElement(U.ButtonPair,{primaryText:"Approve",secondaryText:"Cancel",onPrimaryClicked:h,onSecondaryClicked:T})))};var bt=r("i2Zy4"),xt=r("3JoTt"),kt=r("jd2rl");u.initSentry();const wt=()=>{const t=g.useIncomingBackgroundRequest();if(!t)return null;const{origin:n,req:a,tabId:o}=t,{id:r,method:s}=a,{message:u,messages:d,transaction:p,transactions:m,display:f,options:v}=a.params,y=p?l.transactionStringToMessageString(p):u,h=m?m.map((e=>l.transactionStringToMessageString(e))):d,T=s===c.ProviderToWalletRequestMethods.Connect,E=s===c.ProviderToWalletRequestMethods.SignMessage,A=s===c.ProviderToWalletRequestMethods.SignTransaction,b=s===c.ProviderToWalletRequestMethods.SignAllTransactions,x=s===c.ProviderToWalletRequestMethods.SignAndSendTransaction,w=A||b,S=y instanceof Uint8Array?y:c.objectToUint8Array(null!=y?y:{}),C=A||x?[y]:b?h:void 0,M=A||x?[u?l.messageStringToTransactionString(u):p]:b?d?d.map((e=>l.messageStringToTransactionString(e))):m:void 0,P=x&&p?l.transactionStringToTransaction(p,"bs58").signatures:void 0,R=T?"Connection Error":"Transaction Error",I=`There was an error attempting to ${T?"connect to the application":"sign the transaction"}. Please try again.`;return xt.useRootGroupEffect(),xt.useCaptureOpen("notificationOpen",{data:{method:s}}),e(i).createElement(bt.PopupAndNotificationErrorBoundary,{title:R,message:I},T?e(i).createElement(te,{tabId:o,origin:n,requestId:r}):E?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ht.SignMessageRequest,{tabId:o,origin:n,requestId:r,message:S,display:f})):w?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ne.SignatureRequest,{tabId:o,origin:n,requestId:r,requestMethod:s,unsignedTransactionMessages:C,unsignedTransactions:M})):x?e(i).createElement(k.DetailViewsProvider,null,e(i).createElement(ne.SignatureRequest,{tabId:o,origin:n,requestId:r,requestMethod:s,unsignedTransactionMessages:C,unsignedTransactions:M,signAndSendSignatures:P,options:v})):null)},St=()=>{const t=i.useCallback((t=>e(i).createElement(R.ModalsProvider,null,e(i).createElement(P.WalletMenuProvider,null,e(i).createElement(B.Unlock,{onUnlock:t})))),[]),n=i.useCallback((()=>{p.openTabAsync({url:"onboarding.html"}),window.close()}),[]);return e(i).createElement(e(i).Fragment,null,e(i).createElement(d.ThemedGlobalStyle,{backgroundColor:"#222222"}),e(i).createElement(bt.PopupAndNotificationErrorBoundary,null,e(i).createElement(O.Main,null,e(i).createElement(w.FeatureFlagsProvider,null,e(i).createElement(I.QueryProvider,null,e(i).createElement(g.BackgroundConnectionProvider,null,e(i).createElement(kt.ExtensionLockWrapper,{renderLocked:t,openOnboarding:n},e(i).createElement(C.TransactionsProvider,null,e(i).createElement(M.HardwareWalletProvider,null,e(i).createElement(S.AccountsProvider,null,e(i).createElement(P.WalletMenuProvider,null,e(i).createElement(wt,null))))))))),e(i).createElement("div",{id:m.MODAL_ID}))))};s.render(e(i).createElement(St,null),document.getElementById("root"));define=__define;})(window.define);