function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},r=n.parcelRequirea886;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},n.parcelRequirea886=r);var i=r("aZikt"),c=r("ihAua"),l=r("eLyRJ"),s=r("ci2Mj"),u=r("8C6BZ"),d=r("5cKs6"),p=r("iyOkC"),m=r("4yWCU");r("6CHoY");var g={};t(g,"BackgroundConnectionProvider",(function(){return T}),(function(e){return T=e})),t(g,"useIncomingBackgroundRequest",(function(){return b}),(function(e){return b=e})),t(g,"usePostOutgoingBackgroundResponse",(function(){return k}),(function(e){return k=e}));i=r("aZikt");var f=r("e5x4G"),v=r("6oEu9"),y=(p=r("iyOkC"),function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))});const h={isConnected:!1,lastMessage:null,postMessage:v.NOOP},E=e(i).createContext(h),T=({children:t})=>{const[n,a,o]=function(){const[e,t]=i.useState(null),[n,a]=i.useState(null);i.useEffect((()=>{let e;return(()=>y(this,void 0,void 0,(function*(){const n=`notification/${(yield p.getCurrentWindowAsync()).id}`;e=f.browser.runtime.connect({name:n}),t(e),e.onMessage.addListener((e=>{a(e)})),e.onDisconnect.addListener((()=>{t(null)}))})))(),()=>{null==e||e.disconnect()}}),[]);const o=i.useCallback((t=>{e&&e.postMessage(t)}),[e]);return[!!e,n,o]}();return e(i).createElement(E.Provider,{value:{isConnected:n,lastMessage:a,postMessage:o}},t)};function A(){const e=i.useContext(E);if(!e)throw new Error("Missing background connection context");return e}function b(){const{lastMessage:e}=A();return e&&"string"==typeof e.origin&&e.origin&&e.req&&"string"==typeof e.req.method&&e.req.method?e:null}function k(){const e=b(),{postMessage:t}=A();return i.useCallback((n=>{if(!e)throw new Error("No request received from the background yet");if(e.req.id!==n.id)throw new Error(`Request id: ${e.req.id} does not match response id: ${n.id}`);t(n)}),[e,t])}var x=r("6rMcH"),w=r("eduP0"),C=r("ixd3d"),S=r("82Ilk"),M=r("9ZliH"),P=r("5DQqc"),R=r("eeuNW"),I=r("g9lcT"),B=r("h5G75"),F=r("bMYcF"),q=r("6mzlH"),O=r("jSC0s"),H=r("cjUNA"),D=(i=r("aZikt"),r("hHMPk")),L=(u=r("8C6BZ"),r("lwple")),j=(l=r("eLyRJ"),S=r("82Ilk"),i=r("aZikt"),D=r("hHMPk"),r("7Qmuu")),z=r("cFuyE"),N=r("hJDxl"),W=r("bJYWD"),$=r("9AO5f"),U=r("aADTv"),Z=r("lSpdH"),K=r("g7X40");const J=D.default.div`
  border-top: 1px solid #333333;
  border-bottom: 1px solid #333333;
  width: 100%;
  display: flex;
  padding: 10px 5px;
`,Q=D.default.div`
  > * {
    margin: 18px 0px;
  }
`,V=D.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  > * {
    margin: 0px ${e=>e.spacing}px;
    text-align: left;
  }
`,G=({tabId:t,origin:n,confirmApproval:a,denyApproval:o})=>{const{t:r}=j.useTranslation();return e(i).createElement(W.Container,null,e(i).createElement($.AccountHeader,{lastChild:e(i).createElement("div",null),walletMenuShowOnlyAccounts:!0}),e(i).createElement(W.Body,null,e(i).createElement(W.TopGroup,null,e(i).createElement(Z.TabIconHeader,{tabId:t,secondaryText:z.removeWebPrefixes(n)})),e(i).createElement(J,null,e(i).createElement(Q,null,e(i).createElement(V,{spacing:8},e(i).createElement(K.Text,{size:14,color:"#777777",lineHeight:16.94,weight:500},r("notificationApplicationApprovalPermissionsPrimary"))),e(i).createElement(V,{spacing:8},e(i).createElement(N.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement(K.Text,{size:14,lineHeight:17},r("notificationApplicationApprovalPermissionsViewWalletActivity"))),e(i).createElement(V,{spacing:8},e(i).createElement(N.CheckmarkIcon,{fill:"#21E56F"}),e(i).createElement(K.Text,{size:14,lineHeight:17},r("notificationApplicationApprovalPermissionsTransactionApproval"))))),e(i).createElement(W.BottomGroup,null,e(i).createElement(V,{spacing:4},e(i).createElement(K.Text,{size:14,lineHeight:17,color:"#777"},r("notificationApplicationApprovalConnectDisclaimer"))))),e(i).createElement(W.Footer,{plain:!0},e(i).createElement(U.ButtonPair,{primaryText:r("notificationApplicationApprovalActionButtonConnect"),secondaryText:r("notificationApplicationApprovalActionButtonCancel"),onPrimaryClicked:()=>a(n),onSecondaryClicked:()=>o(n)})))};var Y=r("6oQjh"),_=r("iO2dB"),X=r("9OxTN"),ee=r("lPkGw");const te=D.default.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: center;
  align-items: center;
`,ne=({tabId:t,origin:n,requestId:a})=>{var o;const{accountClient:r}=S.useSelectedAccount(),c=r.publicKey.toString(),s=g.usePostOutgoingBackgroundResponse(),[d,p,m]=Y.useStorage(L.StorageKeys.TrustedApplicationsByOwnerBrowser,{}),f=null!==(o=d[c])&&void 0!==o?o:{},v=void 0!==f[n],[y,h]=e(i).useState(!1),[E,T]=e(i).useState(!1),A=t=>{const n=e(H)(f);n[t]=!0,u.analytics.capture("connectionConfirm",{data:{origin:t}}),m(Object.assign(Object.assign({},d),{[c]:n}))},b=()=>{u.analytics.capture("connectionDeny",{data:{origin:n}});const e=l.createJsonRpcErrorResponse(a,l.RpcErrorCode.UserRejectedRequest);s(e)};if(i.useEffect((()=>{v?(()=>{const e={publicKey:c},t=l.createJsonRpcResponse(a,e);s(t)})():X.detectPhishing(n).then((e=>{T(e.result),h(!0)})).catch((()=>{h(!0)}))}),[v]),v)return null;return p||!y?e(i).createElement(te,null,e(i).createElement(ee.Spinner,null)):E?e(i).createElement(_.BlocklistConnectRequest,{tabId:t,origin:n,confirmApproval:A,denyApproval:b}):e(i).createElement(G,{tabId:t,origin:n,confirmApproval:A,denyApproval:b})};var ae={};t(ae,"SignatureRequest",(function(){return at}),(function(e){return at=e}));i=r("aZikt"),j=r("7Qmuu");var oe=r("bgp3N"),re=(u=r("8C6BZ"),l=r("eLyRJ"),r("HEK4k")),ie=(L=r("lwple"),r("7Lj33")),ce=(S=r("82Ilk"),M=r("9ZliH"),x=r("6rMcH"),r("fMhDQ")),le=(D=r("hHMPk"),i=r("aZikt"),j=r("7Qmuu"),v=r("6oEu9"),r("9qtir")),se=(z=r("cFuyE"),re=r("HEK4k"),r("6gzK9")),ue=r("lzptm"),de=r("2t1ms"),pe=(i=r("aZikt"),r("hZalX")),me=r("ljcNr"),ge=(S=r("82Ilk"),r("jC9PB")),fe={};t(fe,"useFetchSimulatedTransaction",(function(){return ye}),(function(e){return ye=e}));se=r("6gzK9"),re=r("HEK4k"),S=r("82Ilk"),B=r("h5G75");var ve=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))};function ye(e,t){const{accountClient:n}=S.useSelectedAccount(),a=["simulated-tx",{messages:e}],o=!!e;return B.useQuery({queryKey:a,queryFn:()=>ve(this,void 0,void 0,(function*(){const t=re.messagesToTransaction(e);t.recentBlockhash||(t.recentBlockhash=yield n.getRecentBlockHash()),t.feePayer||(t.feePayer=n.publicKey);const a=re.getAccountsFromTransaction(t).filter((e=>!/1111111111111111/.test(e.toString()))),o=(yield n.simulateTransaction(t,a)).value.accounts;return new Map(se.zip(a.map((e=>e.toString())),o))})),enabled:o,refetchInterval:t})}var he=r("dkOkP").Buffer;i=r("aZikt"),re=r("HEK4k"),u=r("8C6BZ");z=r("cFuyE");var Ee=r("j2x34");var Te={};t(Te,"useTokenMetasForMints",(function(){return xe}),(function(e){return xe=e}));var Ae=r("lxqKj"),be=r("9MFgk"),ke=(ie=r("7Lj33"),z=r("cFuyE"),ue=r("lzptm"),ce=r("fMhDQ"),function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))});const xe=e=>{var t;const n=ue.useFetchTokenMetas().data,a=new Map(null==n?void 0:n.map((e=>[e.address,e]))),o=null===(t=ce.useFetchConnection())||void 0===t?void 0:t.data,r=null==o?void 0:o.connection;return Ae.useAsync((()=>ke(void 0,void 0,void 0,(function*(){var t,n,o;if(!e.length||!r)return{};const i={},c=[];for(const t of e){const e=a.get(t);e?i[t]=e:c.push(t)}if(c.length){const e=yield ie.fetchMintInfos(c,r),a=(yield be.fetchCollectibleMetadata(c,r)).reduce(((e,t)=>(e[t.mint.toString()]=t,e)),{});for(const r of c){const c=e[r],l=a[r];if(c){let e;l&&(e=yield be.fetchUriData(l.data.uri,r)),i[r]={decimals:c.decimals,address:r,symbol:null!==(t=null==l?void 0:l.data.symbol)&&void 0!==t?t:z.formatAddressShort(r),name:null!==(o=null!==(n=null==e?void 0:e.name)&&void 0!==n?n:null==l?void 0:l.data.name)&&void 0!==o?o:"Unknown",isCollectible:!!l&&!!l.data.uri}}}}return i}))),[e.length])};W=r("bJYWD"),$=r("9AO5f"),U=r("aADTv"),Z=r("lSpdH");var we=r("eopQk");D=r("hHMPk"),K=r("g7X40");const Ce=D.default.section`
  background: #2a2a2a;
  border-radius: 6px;
  margin-bottom: 10px;
`,Se=D.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;
  > * {
    margin-top: 12px;
  }
`,Me=(D.default.div`
  padding: 12px 18px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,D.default(K.Text).attrs({textAlign:"left",size:14,weight:500,lineHeight:17})``,D.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  > * {
    display: flex;
    align-items: center;
  }
`);K=r("g7X40");var Pe={};t(Pe,"TransactionInstructionRows",(function(){return Oe}),(function(e){return Oe=e})),t(Pe,"SignMessageInstructionRow",(function(){return He}),(function(e){return He=e})),t(Pe,"RowCard",(function(){return We}),(function(e){return We=e}));D=r("hHMPk"),i=r("aZikt"),u=r("8C6BZ"),z=r("cFuyE"),S=r("82Ilk"),i=r("aZikt");we=r("eopQk"),K=r("g7X40");var Re=r("k7WoY"),Ie=r("k8hDx"),Be=r("dkOkP").Buffer,Fe=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))};const qe=[],Oe=({messages:t})=>{const{accountClient:n}=S.useSelectedAccount(),a=i.useCallback((()=>Fe(void 0,void 0,void 0,(function*(){const e=(yield Promise.all(t.map((e=>n.decodeMessageAsync(e))))).filter((e=>void 0!==e));return e.flat().forEach((e=>{e&&u.analytics.capture("transactionInstructionApproval",{data:{origin:origin,type:e.type}})})),e}))),[t]),[o,r,c]=function(t,n){const[a,o]=e(i).useState({value:n,error:null,isPending:!0});e(i).useEffect((()=>{t().then((e=>o({value:e,error:null,isPending:!1}))).catch((e=>o({value:n,error:e.toString(),isPending:!1})))}),[t,n]);const{value:r,error:c,isPending:l}=a;return[r,c,l]}(a,qe),l=o.flat();return e(i).createElement(we.LoadingContent,{isLoading:c},l.map(((t,n)=>e(i).createElement(Ne,{key:n,decodedMessage:t}))))},He=({message:t,display:n="utf8"})=>{let a;if("hex"===n)a=`0x${Be.from(t).toString("hex")}`;else a=(new TextDecoder).decode(t);return e(i).createElement(De,null,e(i).createElement(Le,null,e(i).createElement(K.Text,{textAlign:"left",size:14,weight:600,lineHeight:17},"Sign message"),e(i).createElement(Re.Info,{tooltipAlignment:"bottomRight",info:e(i).createElement(Ie.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(Ie.TooltipText,{size:14,color:"#FFF",weight:500,lineHeight:20},"Make sure you understand what you are signing and trust the application that is requesting this."))})),e(i).createElement(je,null,e(i).createElement(ze,null,e(i).createElement(K.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"pre-line",wordBreak:"break-all",textAlign:"left",color:"#777"},a))))},De=D.default.section`
  background: #2a2a2a;
  border-radius: 6px;
  margin-bottom: 10px;
`,Le=D.default.div`
  padding: 12px 18px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`,je=D.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;
  > * {
    margin-top: 12px;
  }
`,ze=D.default.div`
  display: flex;
  justify-content: space-between;
`,Ne=({decodedMessage:t})=>{const n=i.useMemo((()=>Ue(t)),[t]),a=i.useMemo((()=>Ve(t)),[t]);return e(i).createElement(We,{title:n,rowItems:a})},We=({title:t,rowItems:n,emptyDescription:a,info:o})=>e(i).createElement(De,null,e(i).createElement(Le,null,e(i).createElement(K.Text,{textAlign:"left",size:14,weight:500,lineHeight:17},t),o&&e(i).createElement(Re.Info,{info:o})),e(i).createElement(je,null,n.map((({keyText:t,valueText:n,valueColor:a})=>e(i).createElement(ze,{key:t||n},t&&e(i).createElement(K.Text,{size:14,lineHeight:17,color:"#777777"},t),e(i).createElement(K.Text,{size:14,weight:500,lineHeight:17,color:a,whiteSpace:t?"normal":"pre-line",wordBreak:"break-word"},n)))),0===n.length&&e(i).createElement(ze,null,e(i).createElement(K.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal"},a)))),$e={cancelOrder:"Cancel order",cancelOrderV2:"Cancel order",newOrder:"Place order",newOrderV3:"Place order",settleFunds:"Settle funds",matchOrders:"Match orders",initializeMint:"Initialize mint",initializeAccount:"Initialize account",transfer:"Transfer",approve:"Approve",mintTo:"Mint to",closeAccount:"Close account",systemCreate:"Create account",systemTransfer:"Transfer SOL",createAssociatedTokenAccount:"Create token account",signMessage:"Sign Message",unknown:"Unknown"},Ue=e=>{var t;const{type:n}=e;return null!==(t=$e[n])&&void 0!==t?t:n},Ze={side:{label:"Side",isAddress:!1},orderId:{label:"Order Id",isAddress:!1},limit:{label:"Limit",isAddress:!1},basePubkey:{label:"Base wallet",isAddress:!0},quotePubkey:{label:"Quote wallet",isAddress:!0}},Ke={amount:{label:"Amount",isAddress:!1},accountPubkey:{label:"Account",isAddress:!0},mintPubkey:{label:"Mint",isAddress:!0},sourcePubkey:{label:"Source",isAddress:!0},destinationPubkey:{label:"Destination",isAddress:!0},ownerPubkey:{label:"Owner",isAddress:!0}},Je={toPubkey:{label:"To",isAddress:!0},accountPubkey:{label:"Account",isAddress:!0},basePubkey:{label:"Base",isAddress:!0},seed:{label:"Seed",isAddress:!1},noncePubkey:{label:"Nonce",isAddress:!0},authorizedPubkey:{label:"Authorized",isAddress:!0},newAuthorizedPubkey:{label:"New authorized",isAddress:!0},newAccountPubkey:{label:"New account",isAddress:!0},amount:{label:"Amount",isAddress:!1},lamports:{label:"Amount",isAddress:!1}},Qe=(e,t)=>{const{market:n,marketInfo:a,data:o}=e,r=[];a&&r.push({keyText:"Market",valueText:a.name});const{side:i,limitPrice:c,maxQuantity:l,maxBaseQuantity:s,orderType:u,ownerPubkey:d}=o;r.push({keyText:"Side",valueText:i.charAt(0).toUpperCase()+i.slice(1)}),r.push({keyText:"Price",valueText:(null==n?void 0:n.priceLotsToNumber(c))||""+c});const p=t?s:l;return r.push({keyText:"Quantity",valueText:(null==n?void 0:n.baseSizeLotsToNumber(p))||""+p}),r.push({keyText:"Type",valueText:u.charAt(0).toUpperCase()+u.slice(1)}),r.push({keyText:"Owner",valueText:Ye(d)}),r},Ve=e=>{switch(e.type){case"cancelOrder":case"cancelOrderV2":case"matchOrders":case"settleFunds":return(e=>{const t=[];return e.marketInfo&&t.push({keyText:"Market",valueText:e.marketInfo.name}),Ge(t,e.data,Ze),t})(e);case"closeAccount":case"initializeAccount":case"transfer":case"approve":case"mintTo":return(e=>{const t=[];return Ge(t,e.data,Ke),t})(e);case"systemCreate":case"systemTransfer":return(e=>{const t=[];return Ge(t,e.data,Je),t})(e);case"newOrder":return Qe(e,!1);case"newOrderV3":return Qe(e,!0);case"unknown":case"createAssociatedTokenAccount":return(e=>{const t=e.rawData,n=t.length>20?z.formatHashMedium(t,10):t;return n?[{keyText:"Program Id",valueText:Ye(e.data.programId)},{keyText:"Data",valueText:n}]:[{keyText:"Program Id",valueText:Ye(e.data.programId)}]})(e);default:return[]}},Ge=(e,t,n)=>{Object.entries(t).forEach((([t,a])=>{const o=n[t];if(o){const{label:n,isAddress:r}=o,i=n;let c="";r?c=Ye(a):"lamports"===t?c=`${z.formatTokenAmount(z.lamportsToSolana(a))} SOL`:"function"==typeof a.toString()?c=a.toString():"string"==typeof a&&(c=a),e.push({keyText:i,valueText:c})}}))},Ye=e=>{const t=e.toString();return z.formatHashMedium(t)};Ie=r("k8hDx"),Re=r("k7WoY");var _e=r("2MtnF");const Xe=D.default(we.LoadingContent)`
  height: 150px;
`,et=({tabId:t,origin:n,messages:a,confirmApproval:o,denyApproval:r,transactionName:c})=>{var l;const{t:s}=j.useTranslation(),d=(()=>{const{feeCalculator:e}=Ee.useBlockchainState();return z.lamportsToSolana(e.lamportsPerSignature)})()*re.getRequiredSignatures(a),[p,m]=i.useState(!1),g=ue.useFetchSolanaBalance(),f=g.data,y=ue.useFetchAssetsWithAccount(),h=y.data,E=de.useFetchCollectibles(),T=E.data,A=i.useMemo((()=>{if(!h||!T)return se.objectArrayToMap([],"account");const e=[...h,...T];return se.objectArrayToMap(e,"account")}),[h,T]),b=!g.isFetched||!y.isFetched||!E.isFetched,k=((e,t=!1)=>{const n=fe.useFetchSimulatedTransaction(e,t),a=n.error,{accountClient:o}=S.useSelectedAccount(),r=n.data,c=i.useMemo((()=>{const e=new Map;if(r){for(const[t,n]of r)if(n&&n.data&&n.owner.toString()===pe.TOKEN_PROGRAM_ID.toString()){const[a]=n.data;try{const n=me.deserializeTokenAccount(he.from(a,"base64"));n.owner===o.publicKey.toString()&&e.set(t,n)}catch(e){}}return e}}),[r]);return{balances:i.useMemo((()=>{const e={};if(!r||!c)return;const t=o.publicKey.toString(),n=null==r?void 0:r.get(t);n&&(e[t]={amount:new ge.BigNumber(n.lamports)});for(const[n,a]of c)a.owner===t&&(e[n]={mint:a.mint,amount:a.amount,delegate:a.delegate});return e}),[r,c]),error:a}})(a,5e3),x=Object.values(null!==(l=k.balances)&&void 0!==l?l:{}).map((e=>e.mint)).filter((e=>!!e)),w=Te.useTokenMetasForMints(x),C=i.useMemo((()=>{var e;const{balances:t}=k;if(!t||b)return;const n=[];for(const[a,o]of Object.entries(t)){if(void 0===o.mint&&f){const e=o.amount.minus(f),t=z.lamportsToSolana(e.toNumber())+d;if(0!==t){const a=z.formatTokenAmount(Math.abs(t));n.push({keyText:v.SOLANA.symbol,valueText:e.isNegative()?`-${a} ${v.SOLANA.symbol}`:`+${a} ${v.SOLANA.symbol}`,valueColor:e.isNegative()?"#EB3742":"#21E56F"})}continue}const t=A[a],r=o.mint;if(t){const a=o.amount.minus(t.baseBalance),i=z.amountToUiAmount(a.abs(),t.decimals),c=z.formatTokenAmount(Math.abs(i));if("fungible"===t.type){const o=null!==(e=null==t?void 0:t.symbol)&&void 0!==e?e:z.formatAddressShort(null!=r?r:t.address);0!==i&&n.push({keyText:o,valueText:a.isNegative()?`-${c} ${o}`:`+${c} ${o}`,valueColor:a.isNegative()?"#EB3742":"#21E56F"})}else if("collectible"===t.type){const e="NFT";if(0!==i){const o="1"===c?"":`(${c})`;n.push({keyText:e,valueText:a.isNegative()?`-${t.name} ${o}`:`+${t.name} ${o}`})}}}else if(w.value&&r){const e=w.value[r];if(e){const t=z.amountToUiAmount(o.amount.toNumber(),e.decimals);if(0!==t){const a=z.formatTokenAmount(t),o="1"===a?"":`(${a})`;n.push({keyText:e.isCollectible?"NFT":e.symbol,valueText:e.isCollectible?`+${e.name} ${o}`:`+${a} ${e.symbol}`,valueColor:e.isCollectible?void 0:"#21E56F"})}}}}return n}),[k,A,f,d,w,b]),M=e(i).createElement(Ie.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(Ie.TooltipText,{size:14,color:"#FFF",lineHeight:18},s("notificationTransactionApprovalEstimatesBasedOnSimulations")));let P=s("notificationTransactionApprovalUnableToFetchBalanceChanges");k.error instanceof le.TransactionSimulationError&&(P=s("notificationTransactionApprovalTransactionMayFailToConfirm"));const R=function(e){const[t,n]=i.useState(!1);return i.useEffect((()=>{const t=re.canEvadeTransactionSimulation(e);n(t),u.analytics.capture("transactionCanEvadeSimulation",{data:{messages:e.join("|")}})}),[e]),t}(a);return R&&(P=s("notificationTransactionApprovalSignUnableToSimulate")),e(i).createElement(W.Container,null,e(i).createElement($.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement(W.Body,null,e(i).createElement(W.Icon,null,e(i).createElement(Z.TabIconHeader,{tabId:t,primaryText:c,secondaryText:z.removeWebPrefixes(n)})),e(i).createElement(Xe,{isLoading:void 0===C&&!k.error,showingDelayMs:0},k.error||R?e(i).createElement(Pe.RowCard,{title:s("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:[{valueText:P,valueColor:"#EB3742"}],info:M}):e(i).createElement(Pe.RowCard,{title:s("notificationTransactionApprovalEstimatedBalanceChanges"),rowItems:C,emptyDescription:s("notificationTransactionApprovalNoBalanceChanges"),info:M}),e(i).createElement(Ce,null,e(i).createElement(Se,null,e(i).createElement(Me,null,e(i).createElement(K.Text,{size:14,lineHeight:17,textAlign:"left",color:"#777",style:{gap:10,marginLeft:"-8px"}},e(i).createElement(Re.Info,{info:e(i).createElement(Ie.TooltipContent,{paddingLeft:10,paddingRight:10},e(i).createElement(Ie.TooltipText,{size:14,color:"#FFF",lineHeight:18},s("notificationTransactionApprovalSolanaAmountRequired")))}),s("notificationTransactionApprovalNetworkFee")),e(i).createElement(K.Text,{size:14,weight:500,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word"},e(i).createElement(_e.SolBalance,null,d))))),e(i).createElement(K.Text,{size:14,lineHeight:19,color:"#777777",margin:"17px 0",onClick:()=>m(!p)},s(p?"notificationTransactionApprovalHideAdvancedDetails":"notificationTransactionApprovalViewAdvancedDetails")),p&&e(i).createElement(Pe.TransactionInstructionRows,{messages:a}))),e(i).createElement(W.Footer,null,e(i).createElement(U.ButtonPair,{primaryText:s("notificationTransactionApprovalActionButtonApprove"),secondaryText:s("notificationTransactionApprovalActionButtonCancel"),onPrimaryClicked:o,onSecondaryClicked:r})))};var tt=r("djb9u"),nt=(W=r("bJYWD"),function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))});const at=({origin:t,requestId:n,requestMethod:a,tabId:o,unsignedTransactionMessages:r=[],options:c={}})=>{var s;const{t:d}=j.useTranslation(),p=M.useTransactionsManager(),m=g.usePostOutgoingBackgroundResponse(),{accountClient:f,accountMeta:v}=S.useSelectedAccount(),y=v.type===L.AccountType.Ledger,h=a===l.ProviderToWalletRequestMethods.SignTransaction,E=a===l.ProviderToWalletRequestMethods.SignAllTransactions,T=a===l.ProviderToWalletRequestMethods.SignAndSendTransaction,A=null===(s=ce.useFetchConnection())||void 0===s?void 0:s.data,b=null==A?void 0:A.connection,{pushDetailView:k,popDetailView:w}=x.useDetailViews(),C=re.canEvadeTransactionSimulation(r),P=i.useCallback((a=>nt(void 0,void 0,void 0,(function*(){let o=f;const s=o.publicKey.toString(),d=[];let g;if(y){if(!b)return;const e=ie.createSignerFromLedgerAccountMeta(v,a);o=new oe.AccountClient(b,e,p)}try{if(T){const e=re.messageToTransaction(r[0]),t=yield o.signAndSendTransactionAsync(e,c);g=l.createSignSuccessResponse(n,t,s)}else{for(const e of r)d.push(yield o.signMessageAsync(e));h?g=l.createSignSuccessResponse(n,d[0],s):E&&(g=l.createSignAllTransactionsSuccessResponse(n,d,s))}u.analytics.capture("transactionConfirm",{data:{origin:t,messages:r.join("|"),canEvadeSimulation:C}}),m(g)}catch(t){console.error(t),tt.isKnownLedgerActionError(t)?k(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(tt.LedgerActionError,{ledgerActionError:t,onRetryClick:()=>{w()},onCancelClick:()=>{g=l.createJsonRpcErrorResponse(n,l.RpcErrorCode.UserRejectedRequest),m(g)}}))):y?(g=l.createJsonRpcErrorResponse(n,l.RpcErrorCode.UserRejectedRequest),m(g)):(g=l.createJsonRpcErrorResponse(n,l.RpcErrorCode.TransactionRejected),m(g))}}))),[n,r,f,b,m]),R=i.useCallback((()=>{y?k(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(tt.LedgerAction,{ledgerAction:P,cancel:I})),{shouldShowBackButton:!1}):P()}),[P]),I=i.useCallback((()=>{const e=l.createJsonRpcErrorResponse(n,l.RpcErrorCode.UserRejectedRequest);u.analytics.capture("transactionDeny",{data:{origin:t,messages:r.join("|"),canEvadeSimulation:C}}),m(e)}),[n,m]);return e(i).createElement(et,{tabId:o,origin:t,messages:r,confirmApproval:R,denyApproval:I,transactionName:d("notificationSignatureRequestApproveTransactionCapitalized")})};var ot={};t(ot,"SignMessageRequest",(function(){return ct}),(function(e){return ct=e}));i=r("aZikt"),u=r("8C6BZ"),l=r("eLyRJ"),L=r("lwple"),z=r("cFuyE"),S=r("82Ilk"),x=r("6rMcH"),ce=r("fMhDQ"),tt=r("djb9u"),U=r("aADTv"),$=r("9AO5f"),W=r("bJYWD"),Z=r("lSpdH");var rt=r("dkOkP").Buffer,it=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))};const ct=t=>{var n;const{origin:a,requestId:o,message:r,display:c,tabId:s}=t,d=g.usePostOutgoingBackgroundResponse(),{accountClient:p,accountMeta:m}=S.useSelectedAccount(),f=null===(n=ce.useFetchConnection())||void 0===n?void 0:n.data,v=null==f?void 0:f.connection,{pushDetailView:y}=x.useDetailViews(),h=i.useCallback((()=>it(void 0,void 0,void 0,(function*(){const e=p;try{const t=yield e.signUTF8(rt.from(r).toString()),n=e.publicKey.toString(),i=l.createSignSuccessResponse(o,t,n);u.analytics.capture("signMessageConfirm",{data:{origin:a}}),d(i)}catch(e){T()}}))),[o,r,p,v,d]),E=i.useCallback((()=>{m.type===L.AccountType.Ledger?y(e(i).createElement(W.LedgerWrapper,null,e(i).createElement(tt.LedgerAction,{ledgerAction:h,cancel:T})),{shouldShowBackButton:!1}):h()}),[h]),T=i.useCallback((()=>{const e=l.createJsonRpcErrorResponse(o,l.RpcErrorCode.UserRejectedRequest);u.analytics.capture("transactionDeny",{data:{origin:a}}),d(e)}),[o,d]);return e(i).createElement(W.Container,null,e(i).createElement($.AccountHeader,{firstChild:e(i).createElement("div",null),lastChild:e(i).createElement("div",null)}),e(i).createElement(W.Body,null,e(i).createElement(W.Icon,null,e(i).createElement(Z.TabIconHeader,{tabId:s,primaryText:"Signature Request",secondaryText:z.removeWebPrefixes(a)})),e(i).createElement(Pe.SignMessageInstructionRow,{message:r,display:c})),e(i).createElement(W.Footer,null,e(i).createElement(U.ButtonPair,{primaryText:"Approve",secondaryText:"Cancel",onPrimaryClicked:E,onSecondaryClicked:T})))};var lt=r("i2Zy4");s.initSentry();const st=()=>{const t=g.useIncomingBackgroundRequest();if(!t)return null;const{origin:n,req:a,tabId:o}=t,{id:r,method:c}=a,{message:s,messages:d,display:p,options:m}=a.params,f=c===l.ProviderToWalletRequestMethods.Connect,v=c===l.ProviderToWalletRequestMethods.SignMessage,y=c===l.ProviderToWalletRequestMethods.SignTransaction,h=c===l.ProviderToWalletRequestMethods.SignAllTransactions,E=c===l.ProviderToWalletRequestMethods.SignAndSendTransaction,T=y||h,A=s instanceof Uint8Array?s:l.objectToUint8Array(null!=s?s:{}),b=y||E?[s]:h?d:void 0,k=f?"Connection Error":"Transaction Error",w=`There was an error attempting to ${f?"connect to the application":"sign the transaction"}. Please try again.`;return i.useEffect((()=>{u.analytics.capture("notificationOpen",{data:{method:c}})}),[c]),e(i).createElement(lt.PopupAndNotificationErrorBoundary,{title:k,message:w},f?e(i).createElement(ne,{tabId:o,origin:n,requestId:r}):v?e(i).createElement(x.DetailViewsProvider,null,e(i).createElement(ot.SignMessageRequest,{tabId:o,origin:n,requestId:r,message:A,display:p})):T?e(i).createElement(x.DetailViewsProvider,null,e(i).createElement(ae.SignatureRequest,{tabId:o,origin:n,requestId:r,requestMethod:c,unsignedTransactionMessages:b})):E?e(i).createElement(x.DetailViewsProvider,null,e(i).createElement(ae.SignatureRequest,{tabId:o,origin:n,requestId:r,requestMethod:c,unsignedTransactionMessages:b,options:m})):null)},ut=()=>{const t=i.useCallback((t=>e(i).createElement(I.ModalsProvider,null,e(i).createElement(R.WalletMenuProvider,null,e(i).createElement(O.Unlock,{unlockSeedAndMnemonic:t})))),[]),n=i.useCallback((()=>{p.openTabAsync({url:"onboarding.html"}),window.close()}),[]);return e(i).createElement(e(i).Fragment,null,e(i).createElement(d.ThemedGlobalStyle,{backgroundColor:"#222222"}),e(i).createElement(lt.PopupAndNotificationErrorBoundary,null,e(i).createElement(q.Main,null,e(i).createElement(C.FeatureFlagsProvider,null,e(i).createElement(F.BannerProvider,null,e(i).createElement(B.QueryProvider,null,e(i).createElement(g.BackgroundConnectionProvider,null,e(i).createElement(w.SeedProvider,{renderLocked:t,openOnboarding:n},e(i).createElement(M.TransactionsProvider,null,e(i).createElement(P.HardwareWalletProvider,null,e(i).createElement(S.AccountsProvider,null,e(i).createElement(R.WalletMenuProvider,null,e(i).createElement(st,null)))))))))),e(i).createElement("div",{id:m.MODAL_ID}))))};c.render(e(i).createElement(ut,null),document.getElementById("root"));