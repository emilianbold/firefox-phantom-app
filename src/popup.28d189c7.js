(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,n,t,r){Object.defineProperty(e,n,{get:t,set:r,enumerable:!0,configurable:!0})}function n(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},a=t.parcelRequirea886;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in o){var n=o[e];delete o[e];var t={id:e,exports:{}};return r[e]=t,n.call(t.exports,t,t.exports),t.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){o[e]=n},t.parcelRequirea886=a),a.register("cAlJD",(function(n,t){e(n.exports,"Main",(function(){return l}));var r=a("cuInp"),o=a("5BN27"),u=a("36vNa"),c=a("bgo6t");function i(){var e=r.taggedTemplateLiteral(["\n  background-color: #222222;\n  min-width: ","px;\n  min-height: ","px;\n  height: 100vh;\n  width: 100vw;\n  ","\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n  ","\n"]);return i=function(){return e},e}var s,l=o.default.div(s||(s=i()),u.PHANTOM_WIDTH,u.PHANTOM_HEIGHT,(function(e){return e.withBorder&&u.BROWSER_ENV.browser.name!==c.BROWSER_MAP.safari?"border: 1px solid #323232;":""}),u.BROWSER_ENV.browser.name===c.BROWSER_MAP.firefox?"border-radius: 8px;":"")})),a.register("cwHVg",(function(t,r){e(t.exports,"useRootGroupEffect",(function(){return E}),(function(e){return E=e})),e(t.exports,"useCaptureOpen",(function(){return b}),(function(e){return b=e}));var o,u=a("cuInp"),c=a("1vgyn"),i=a("yrqZm"),s=a("57m2V"),l=a("226dB"),f=a("hYuzo"),p=a("a9P2W"),d=a("8fnAG"),g=a("865pP"),m=a("bMiEi"),v=a("1GEm5"),h=a("53yns"),w=a("lx1eT"),x=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,c)}i((r=r.apply(e,n||[])).next())}))},y=(o={},u.defineProperty(o,"CLIENT-PLATFORM","extension"),u.defineProperty(o,"CLIENT-VERSION",w.getManifestVersion()),o),E=function(){var e=u.slicedToArray(g.useFeatureFlags(["root-group-extension-v2"]),1)[0];!function(e){var t=v.useStoreStorageValue(l.StorageKeys.RootHashes).mutateAsync,r=v.useClearStorageValue(l.StorageKeys.RootHashes).mutateAsync,o=i.useCallback((function(){return x(void 0,void 0,void 0,n(c).mark((function o(){var a,u,i,l,f;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.getMnemonic();case 3:if(a=n.sent,e&&a){n.next=7;break}return r(),n.abrupt("return");case 7:n.t0=a.type,n.next="bip39"===n.t0?10:"deprecated"===n.t0?16:22;break;case 10:return u=a.value.getEntropy(),i=p.genRootHash(u),u.fill(0),n.next=15,t([i]);case 15:return n.abrupt("break",22);case 16:return l=s.mnemonicToEntropy(a.value),f=p.genRootHash(l),l.fill(0),n.next=21,t([f]);case 21:return n.abrupt("break",22);case 22:n.next=27;break;case 24:n.prev=24,n.t1=n.catch(0),r();case 27:case"end":return n.stop()}}),o,null,[[0,24]])})))}),[e,t,r]);i.useEffect((function(){o()}),[o])}(e),function(e){var t=v.useFetchStorageValue(l.StorageKeys.RootHashes).data,r=v.useStoreStorageValue(l.StorageKeys.RootGroup).mutateAsync,o=v.useClearStorageValue(l.StorageKeys.RootGroup).mutateAsync,a=i.useCallback((function(){return x(void 0,void 0,void 0,n(c).mark((function a(){var u,i;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,u=null!=t?t:[],e&&u.length){n.next=5;break}return o(),n.abrupt("return");case 5:return n.next=7,f.fetchRootGroup(u,y);case 7:return i=n.sent.rootGroup,n.next=10,r(i);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),o();case 15:case"end":return n.stop()}}),a,null,[[0,12]])})))}),[t,r,o]);i.useEffect((function(){a()}),[a])}(e),function(e){var n=v.useFetchStorageValue(l.StorageKeys.RootGroup).data,t=v.useFetchStorageValue(l.StorageKeys.IsAnalyticsOptedOut).data,r=i.useCallback((function(){var r="";!t&&e&&(r=null!=n?n:""),r&&m.analytics.assignGroup("rootGroup",r)}),[n]);i.useEffect((function(){r()}),[r])}(e)},b=function(e,t){var r=i.useCallback((function(){return x(void 0,void 0,void 0,n(c).mark((function r(){var o,a,u;return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.getStorageValue(l.StorageKeys.IsAnalyticsOptedOut);case 2:return o=n.sent,n.next=5,d.getStorageValue(l.StorageKeys.RootGroup);case 5:a=n.sent,u="",o||(u=null!=a?a:""),m.analytics.assignGroup("rootGroup",u),m.analytics.capture(e,t);case 10:case"end":return n.stop()}}),r)})))}),[e,t]);i.useEffect((function(){r()}),[r])}})),a.register("hYuzo",(function(t,r){e(t.exports,"fetchRootGroup",(function(){return p}),(function(e){return p=e}));var o=a("cuInp"),u=a("1vgyn"),c=a("6CCmb"),i=a("9Qkis"),s=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,c)}i((r=r.apply(e,n||[])).next())}))},l="fb25ad6d-1a0d-4238-a329-2394017625ef",f={Accept:"application/json","Content-Type":"application/json","root-group-api-key":l},p=function(e,t){return s(void 0,void 0,void 0,n(u).mark((function r(){var a,s;return n(u).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l.length){n.next=2;break}throw new Error("Must have Root Group API key before fetching.");case 2:if(e.length){n.next=4;break}throw new Error("Must send at least 1 root hash.");case 4:return n.next=6,fetch("".concat("".concat(c.getAPIEnvironment(),"/root_group/v1")),{method:"POST",headers:t?Object.assign(Object.assign({},t),f):f,body:JSON.stringify(o.defineProperty({},"root_hashes",e))});case 6:return a=n.sent,n.next=9,a.json();case 9:if(s=n.sent,200===a.status){n.next=14;break}if(!i.isErrorResponse(s)){n.next=13;break}throw new Error(s.message);case 13:throw new Error("Unable to fetch root group with root hashes: ".concat(e.toString()));case 14:if(!(r=s)||"string"!=typeof r.root_group){n.next=16;break}return n.abrupt("return",{rootGroup:s.root_group});case 16:throw new Error("Invalid root group response: ".concat(null==s?void 0:s.toString()));case 17:case"end":return n.stop()}var r}),r)})))}})),a.register("9Qkis",(function(n,t){e(n.exports,"isErrorResponse",(function(){return r}));var r=function(e){return!!e&&"string"==typeof e.message}})),a.register("a9P2W",(function(n,t){e(n.exports,"genRootHash",(function(){return u}));var r=a("dBiie"),o=new Set([16,20,24,28,32]);function u(e){if(!o.has(e.length))throw Error("Incorrect data length for RootHash:".concat(e.length));return r.sha256(r.sha256(e)).slice(2,34)}})),a.register("icEzW",(function(t,r){e(t.exports,"Unlock",(function(){return B}),(function(e){return B=e}));var o=a("cuInp"),u=a("1vgyn"),c=a("yrqZm"),i=a("5BN27"),s=a("gVpKh"),l=a("4BxPA"),f=a("bMiEi"),p=a("lx1eT"),d=a("lP5so"),g=a("efDiT"),m=a("dfTp4"),v=a("1Jwz2"),h=a("iUzHJ"),w=a("kb4iW"),x=a("2vdh8"),y=a("9ThfF"),E=a("gXPCw"),b=a("bYUy0");function k(){var e=o.taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  flex: 1;\n"]);return k=function(){return e},e}function S(){var e=o.taggedTemplateLiteral(["\n  flex: 1;\n  height: 100%;\n  margin-top: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return S=function(){return e},e}function T(){var e=o.taggedTemplateLiteral(["\n  margin-top: 26px;\n  margin-bottom: 15px;\n"]);return T=function(){return e},e}function R(){var e=o.taggedTemplateLiteral(["\n  width: 12px;\n"]);return R=function(){return e},e}function P(){var e=o.taggedTemplateLiteral(["\n  visibility: ",";\n  margin-top: 18px;\n  text-decoration: none;\n  &:hover {\n    color: #999999;\n  }\n"]);return P=function(){return e},e}var I,O,C,A,F,M=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function u(e){try{i(r.next(e))}catch(e){a(e)}}function c(e){try{i(r.throw(e))}catch(e){a(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,c)}i((r=r.apply(e,n||[])).next())}))},W=i.default.form(I||(I=k())),G=i.default.div(O||(O=S()),(function(e){return e.isFullScreen?"40px":"105px"})),H=i.default(h.Input)(C||(C=T())),V=i.default.div(A||(A=R())),L=i.default(w.Text)(F||(F=P()),(function(e){return e.visibility})),B=function(e){var t=e.onUnlock,r=e.isFullScreen,o=s.useTranslation().t,a=l.useForm(),i=a.register,d=a.handleSubmit,v=a.errors,h=a.getValues,k=a.setError,S=b.useWalletMenu().showWalletMenu,T=c.useCallback((function(){return M(void 0,void 0,void 0,n(u).mark((function e(){return n(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(h("password"));case 3:if(e.sent){e.next=6;break}throw new Error("Incorrect password");case 6:f.analytics.capture("unlockWallet"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0.message&&e.t0.message.includes("Incorrect password")?k("password",{type:"manual",message:o("unlockErrorIncorrectPassword")}):k("password",{type:"manual",message:o("unlockErrorSomethingWentWrong")});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))}),[t]),R=function(){f.analytics.capture("forgotPassword"),p.openTabAsync({url:"onboarding.html?restore=true"})};return r?n(c).createElement(E.Body,null,n(c).createElement(W,{onSubmit:d(T)},n(c).createElement(G,{isFullScreen:!0},n(c).createElement(N,null),n(c).createElement(_,{register:i,warning:v.password})),n(c).createElement(K,null),n(c).createElement(j,{error:v.password,onClick:R}))):n(c).createElement(E.Container,null,n(c).createElement(g.Header,{justifyContent:"space-between"},n(c).createElement(x.IconWrapper,{onClick:function(){var e=n(c).createElement(n(c).Fragment,null,n(c).createElement(y.ResetWalletMenuItem,null),n(c).createElement(y.HelpMenuItem,null));S(e)}},n(c).createElement(m.WalletMenuIcon,null)),n(c).createElement(w.Text,{weight:500,size:16,color:"#555555"},"Phantom.app"),n(c).createElement(V,null)),n(c).createElement(E.Body,null,n(c).createElement(W,{id:"unlock-form",onSubmit:d(T)},n(c).createElement(G,{isFullScreen:!1},n(c).createElement(N,null),n(c).createElement(_,{register:i,warning:v.password}),n(c).createElement(j,{error:v.password,onClick:R})))),n(c).createElement(E.Footer,{plain:!0},n(c).createElement(K,{"data-testid":"unlock-form-submit-button",form:"unlock-form"})))},_=function(e){var t=e.register,r=e.warning,o=s.useTranslation().t;return n(c).createElement(H,{"data-testid":"unlock-form-password-input",name:"password",autoFocus:!0,placeholder:o("unlockPassword"),type:"password",ref:t({required:!0}),warning:r})},N=function(){var e=s.useTranslation().t;return n(c).createElement(v.IconHeader,{icon:n(c).createElement(m.LogoDark,null),primaryText:e("unlockEnterPassword")})},j=function(e){var t=e.onClick,r=e.error,o=s.useTranslation().t;return n(c).createElement(L,{size:16,color:"#666666",onClick:t,visibility:r?"visible":"hidden"},o("unlockForgotPassword"))},K=function(e){var t=s.useTranslation().t;return n(c).createElement(d.Button,Object.assign({type:"submit",theme:"primary"},e),t("unlockActionButtonUnlock"))}})),a.register("5j83m",(function(t,r){e(t.exports,"ExtensionLockWrapper",(function(){return c}));var o=a("yrqZm"),u=a("eFhEL"),c=function(e){var t=e.openOnboarding,r=e.renderLocked,a=u.useExtensionLockState(),c=a.state,i=a.refresh,s=a.unlock;return o.useEffect((function(){"unknown"===c&&i(),"onboarding"===c&&t()}),[c,i,t]),"locked"===c?n(o).createElement(n(o).Fragment,null,r(s)):"unlocked"===c?n(o).createElement(n(o).Fragment,null,e.children):null}}))}();define=__define;})(window.define);