(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},a=n.parcelRequirea886;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},n.parcelRequirea886=a),a.register("6mzlH",(function(t,n){e(t.exports,"Main",(function(){return i}));var o=a("hHMPk"),r=a("4yWCU"),s=a("fCuks");const i=o.default.div`
  background-color: #222222;
  min-width: ${r.PHANTOM_WIDTH}px;
  min-height: ${r.PHANTOM_HEIGHT}px;
  height: 100vh;
  width: 100vw;
  ${e=>e.withBorder&&r.BROWSER_ENV.browser.name!==s.BROWSER_MAP.safari?"border: 1px solid #323232;":""}
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: hidden;
  ${r.BROWSER_ENV.browser.name===s.BROWSER_MAP.firefox?"border-radius: 8px;":""}
`})),a.register("3JoTt",(function(t,n){e(t.exports,"useRootGroupEffect",(function(){return y}),(function(e){return y=e})),e(t.exports,"useCaptureOpen",(function(){return E}),(function(e){return E=e}));var o=a("aZikt"),r=a("3XPpL"),s=a("lwple"),i=a("dODMx"),l=a("8x0K0"),c=a("czDD7"),u=a("fRhfQ"),d=a("8C6BZ"),f=a("02ZG7"),p=a("aF4zF"),g=a("iyOkC"),m=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((o=o.apply(e,t||[])).next())}))};const h={"CLIENT-PLATFORM":"extension","CLIENT-VERSION":g.getManifestVersion()},y=()=>{const[e]=u.useFeatureFlags(["root-group-extension-v2"]);(e=>{const{mutateAsync:t}=f.useStoreStorageValue(s.StorageKeys.RootHashes),{mutateAsync:n}=f.useClearStorageValue(s.StorageKeys.RootHashes),a=o.useCallback((()=>m(void 0,void 0,void 0,(function*(){try{const o=yield p.getMnemonic();if(!e||!o)return void n();switch(o.type){case"bip39":{const e=o.value.getEntropy(),n=l.genRootHash(e);e.fill(0),yield t([n]);break}case"deprecated":{const e=r.mnemonicToEntropy(o.value),n=l.genRootHash(e);e.fill(0),yield t([n]);break}}}catch(e){n()}}))),[e,t,n]);o.useEffect((()=>{a()}),[a])})(e),(e=>{const{data:t}=f.useFetchStorageValue(s.StorageKeys.RootHashes),{mutateAsync:n}=f.useStoreStorageValue(s.StorageKeys.RootGroup),{mutateAsync:r}=f.useClearStorageValue(s.StorageKeys.RootGroup),a=o.useCallback((()=>m(void 0,void 0,void 0,(function*(){try{const o=null!=t?t:[];if(!e||!o.length)return void r();const a=(yield i.fetchRootGroup(o,h)).rootGroup;yield n(a)}catch(e){r()}}))),[t,n,r]);o.useEffect((()=>{a()}),[a])})(e),(e=>{const{data:t}=f.useFetchStorageValue(s.StorageKeys.RootGroup),{data:n}=f.useFetchStorageValue(s.StorageKeys.IsAnalyticsOptedOut),r=o.useCallback((()=>{let o="";!n&&e&&(o=null!=t?t:""),o&&d.analytics.assignGroup("rootGroup",o)}),[t]);o.useEffect((()=>{r()}),[r])})(e)},E=(e,t)=>{const n=o.useCallback((()=>m(void 0,void 0,void 0,(function*(){const n=yield c.getStorageValue(s.StorageKeys.IsAnalyticsOptedOut),o=yield c.getStorageValue(s.StorageKeys.RootGroup);let r="";n||(r=null!=o?o:""),d.analytics.assignGroup("rootGroup",r),d.analytics.capture(e,t)}))),[e,t]);o.useEffect((()=>{n()}),[n])}})),a.register("dODMx",(function(t,n){e(t.exports,"fetchRootGroup",(function(){return c}),(function(e){return c=e}));var o=a("jEn2x"),r=a("lUIcg"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((o=o.apply(e,t||[])).next())}))};const i=(void 0,""),l={Accept:"application/json","Content-Type":"application/json","root-group-api-key":i},c=(e,t)=>s(void 0,void 0,void 0,(function*(){if(!i.length)throw new Error("Must have Root Group API key before fetching.");if(!e.length)throw new Error("Must send at least 1 root hash.");const n=yield fetch(`${o.getAPIEnvironment()}/root_group/v1`,{method:"POST",headers:t?Object.assign(Object.assign({},t),l):l,body:JSON.stringify({root_hashes:e})}),a=yield n.json();if(200!==n.status){if(r.isErrorResponse(a))throw new Error(a.message);throw new Error(`Unable to fetch root group with root hashes: ${e.toString()}`)}if((s=a)&&"string"==typeof s.root_group)return{rootGroup:a.root_group};var s;throw new Error(`Invalid root group response: ${null==a?void 0:a.toString()}`)}))})),a.register("lUIcg",(function(t,n){e(t.exports,"isErrorResponse",(function(){return o}));const o=e=>!!e&&"string"==typeof e.message})),a.register("8x0K0",(function(t,n){e(t.exports,"genRootHash",(function(){return s}));var o=a("lkm1S");const r=new Set([16,20,24,28,32]);function s(e){if(!r.has(e.length))throw Error(`Incorrect data length for RootHash:${e.length}`);return o.sha256(o.sha256(e)).slice(2,34)}})),a.register("jSC0s",(function(n,o){e(n.exports,"Unlock",(function(){return O}),(function(e){return O=e}));var r=a("aZikt"),s=a("hHMPk"),i=a("7Qmuu"),l=a("1vmp5"),c=a("8C6BZ"),u=a("iyOkC"),d=a("aADTv"),f=a("3rE52"),p=a("hJDxl"),g=a("lSpdH"),m=a("a80wK"),h=a("g7X40"),y=a("jiwMC"),E=a("8sl7I"),w=a("bJYWD"),v=a("eeuNW"),x=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((o=o.apply(e,t||[])).next())}))};const k=s.default.form`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  flex: 1;
`,b=s.default.div`
  flex: 1;
  height: 100%;
  margin-top: ${e=>e.isFullScreen?"40px":"105px"};
  display: flex;
  flex-direction: column;
  align-items: center;
`,S=s.default(m.Input)`
  margin-top: 26px;
  margin-bottom: 15px;
`,R=s.default.div`
  width: 12px;
`,C=s.default(h.Text)`
  visibility: ${e=>e.visibility};
  margin-top: 18px;
  text-decoration: none;
  &:hover {
    color: #999999;
  }
`,O=({onUnlock:e,isFullScreen:n})=>{const{t:o}=i.useTranslation(),{register:a,handleSubmit:s,errors:d,getValues:g,setError:m}=l.useForm(),{showWalletMenu:S}=v.useWalletMenu(),C=r.useCallback((()=>x(void 0,void 0,void 0,(function*(){try{if(!(yield e(g("password"))))throw new Error("Incorrect password");c.analytics.capture("unlockWallet")}catch(e){console.error(e),e.message&&e.message.includes("Incorrect password")?m("password",{type:"manual",message:o("unlockErrorIncorrectPassword")}):m("password",{type:"manual",message:o("unlockErrorSomethingWentWrong")})}}))),[e]),O=()=>{c.analytics.capture("forgotPassword"),u.openTabAsync({url:"onboarding.html?restore=true"})};return n?t(r).createElement(w.Body,null,t(r).createElement(k,{onSubmit:s(C)},t(r).createElement(b,{isFullScreen:!0},t(r).createElement(I,null),t(r).createElement(T,{register:a,warning:d.password})),t(r).createElement(P,null),t(r).createElement(M,{error:d.password,onClick:O}))):t(r).createElement(w.Container,null,t(r).createElement(f.Header,{justifyContent:"space-between"},t(r).createElement(y.IconWrapper,{onClick:()=>{const e=t(r).createElement(t(r).Fragment,null,t(r).createElement(E.ResetWalletMenuItem,null),t(r).createElement(E.HelpMenuItem,null));S(e)}},t(r).createElement(p.WalletMenuIcon,null)),t(r).createElement(h.Text,{weight:500,size:16,color:"#555555"},"Phantom.app"),t(r).createElement(R,null)),t(r).createElement(w.Body,null,t(r).createElement(k,{id:"unlock-form",onSubmit:s(C)},t(r).createElement(b,{isFullScreen:!1},t(r).createElement(I,null),t(r).createElement(T,{register:a,warning:d.password}),t(r).createElement(M,{error:d.password,onClick:O})))),t(r).createElement(w.Footer,{plain:!0},t(r).createElement(P,{"data-testid":"unlock-form-submit-button",form:"unlock-form"})))},T=({register:e,warning:n})=>{const{t:o}=i.useTranslation();return t(r).createElement(S,{"data-testid":"unlock-form-password-input",name:"password",autoFocus:!0,placeholder:o("unlockPassword"),type:"password",ref:e({required:!0}),warning:n})},I=()=>{const{t:e}=i.useTranslation();return t(r).createElement(g.IconHeader,{icon:t(r).createElement(p.LogoDark,null),primaryText:e("unlockEnterPassword")})},M=({onClick:e,error:n})=>{const{t:o}=i.useTranslation();return t(r).createElement(C,{size:16,color:"#666666",onClick:e,visibility:n?"visible":"hidden"},o("unlockForgotPassword"))},P=e=>{const{t:n}=i.useTranslation();return t(r).createElement(d.Button,Object.assign({type:"submit",theme:"primary"},e),n("unlockActionButtonUnlock"))}})),a.register("jd2rl",(function(n,o){e(n.exports,"ExtensionLockWrapper",(function(){return i}));var r=a("aZikt"),s=a("9Qmsl");const i=e=>{const{openOnboarding:n,renderLocked:o}=e,{state:a,refresh:i,unlock:l}=s.useExtensionLockState();return r.useEffect((()=>{"unknown"===a&&i(),"onboarding"===a&&n()}),[a,i,n]),"locked"===a?t(r).createElement(t(r).Fragment,null,o(l)):"unlocked"===a?t(r).createElement(t(r).Fragment,null,e.children):null}}));define=__define;})(window.define);